(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.date,n=window.wp.apiFetch;var o=e.n(n);let s="";const i={siteUrl:"",searchType:"web",startDate:(0,t.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-29)),endDate:(0,t.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-1)),dimensions:["page"],dimensionFilterGroups:{},startRow:0,rowLimit:1},a=[];function r(){window.gapi.client.load("searchconsole","v1").then((()=>{window.gapi.client.setToken(s),window.gapi.client.webmasters.sitemaps.list({siteUrl:i.siteUrl}).then((function(){c()})).catch((e=>{401===e.status&&o()({path:"/searchconsole/v1/refresh",method:"POST"}).then((e=>{window.gapi.client.setToken(e),c()}))}))}))}function c(){const e=window.gapi.client.newBatch(),n=window.gapi.client.newBatch();for(const o of a){const s=[{filters:[{dimension:"page",operator:"EQUALS",expression:o}]}];e.add(window.gapi.client.webmasters.searchanalytics.query({...i,dimensionFilterGroups:s}),{id:o}),n.add(window.gapi.client.webmasters.searchanalytics.query({...i,dimensionFilterGroups:s,startDate:(0,t.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-57)),endDate:(0,t.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-30))}),{id:o})}Promise.all([e,n]).then((e=>{const t=e[0].result,n=e[1].result,o={};for(const e in t)n[e].result?.rows?.[0]&&(o[e]={current:t[e].result.rows[0],previous:n[e].result.rows[0]},a.indexOf(e)>-1&&o[e]&&window.jQuery('span[data-url="'+e+'"]').html(d(o[e])))}))}window.jQuery(document).ready((function(){window.jQuery(".gsc-url").each(((e,t)=>{a.push(window.jQuery(t).data("url"))}))})),window.onGoogleScriptLoad=()=>{o()({path:"/wp/v2/settings/"}).then((e=>{s=e.search_console.token,i.siteUrl=e.search_console.site,window.gapi.load("client",r)}))};const d=({current:e,previous:t})=>`\n\t<b>Clicks:</b> ${e.clicks||"n/a"} (${t.clicks||"n/a"})<br />\n\t<b>Position:</b> ${Math.round(100*e.position)/100||"n/a"} (${Math.round(100*t.position)/100||"n/a"})<br />\n\t<b>CTR:</b> ${(100*e.ctr).toFixed(2)+"%"||0} (${(100*t.ctr).toFixed(2)+"%"||0})<br />\n\t<b>Impressions:</b> ${e.impressions||"n/a"} (${t.impressions||"n/a"})<br />`;!function(){const e="google-js",t=document.getElementsByTagName("script")[0];if(document.getElementById(e))return;const n=document.createElement("script");n.id=e,n.src="https://apis.google.com/js/platform.js",n.onload=window.onGoogleScriptLoad,t.parentNode.insertBefore(n,t)}()})();