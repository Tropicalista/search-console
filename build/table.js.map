{"version":3,"file":"table.js","mappings":"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","sources":["webpack://search-console/./src/table/loadGapi.js","webpack://search-console/external window [\"wp\",\"apiFetch\"]","webpack://search-console/external window [\"wp\",\"date\"]","webpack://search-console/webpack/bootstrap","webpack://search-console/webpack/runtime/compat get default export","webpack://search-console/webpack/runtime/define property getters","webpack://search-console/webpack/runtime/hasOwnProperty shorthand","webpack://search-console/webpack/runtime/make namespace object","webpack://search-console/./src/table/index.js"],"sourcesContent":["export const loadGoogleScript = () => {\n\t// Loads the Google JavaScript Library\n\t( function () {\n\t\tconst id = 'google-js';\n\t\tconst src = 'https://apis.google.com/js/platform.js';\n\n\t\t// We have at least one script\n\t\tconst firstJs = document.getElementsByTagName( 'script' )[ 0 ];\n\n\t\t// Prevent script from loading twice\n\t\tif ( document.getElementById( id ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst js = document.createElement( 'script' );\n\t\tjs.id = id;\n\t\tjs.src = src;\n\t\tjs.onload = window.onGoogleScriptLoad;\n\t\tfirstJs.parentNode.insertBefore( js, firstJs );\n\t} )();\n};\n","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"date\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { loadGoogleScript } from './loadGapi';\nimport { dateI18n } from '@wordpress/date';\nimport apiFetch from '@wordpress/api-fetch';\n\n\nconst chart = '';\nlet token = '';\nconst chartQuery = {\n\tsiteUrl: '',\n\trowLimit: null,\n\tsearchType: 'web',\n    startDate: dateI18n( 'Y-m-d', new Date().setDate( new Date().getDate() - 29 ) ),\n    endDate: dateI18n( 'Y-m-d', new Date().setDate( new Date().getDate() - 1 ) ),\n\tdimensions: [ 'page' ],\n};\n\nconst allUrls = [];\n\njQuery( document ).ready( function () {\n\tjQuery( '.gsc-url' ).each( function ( index ) {\n\t\tallUrls.push( jQuery( this ).data( 'url' ) );\n\t} );\n} );\n\nfunction refreshToken() {\n\tapiFetch( {\n\t\tpath: '/searchconsole/v1/refresh',\n\t\tmethod: 'POST',\n\t} )\n\t\t.then( ( result ) => {\n\t\t\tgapi.client.setToken( result );\n\t\t} )\n\t\t.catch( ( error ) => {\n\t\t\tconsole.log( error );\n\t\t} )\n\t\t.finally( () => console.log( 'refreshed' ) );\n};\n\n// callback on gapi loaded\nwindow.onGoogleScriptLoad = () => {\n\tconst _gapi = window.gapi; // set gapi globally\n\n\t// get settings\n\tapiFetch( { path: '/searchconsole/v1/settings/' } )\n\t\t.then( ( result ) => {\n\t\t\ttoken = result.token;\n\t\t\tchartQuery.siteUrl = result.site;\n\t\t\tgapi.load( 'client', start );\n\t\t} )\n\t\t.catch( ( error ) => console.log( error.responseText ) );\n};\n\nfunction start() {\n\tgapi.client.load( 'searchconsole', 'v1' ).then( () => {\n\t\tgapi.client.setToken( token );\n\t\tgetReport();\n\t} );\n}\n\nfunction getReport() {\n\tgapi.client.webmasters.searchanalytics\n\t\t.query( chartQuery )\n\t\t.then( function ( response ) {\n\t\t\tresponse.result.rows.forEach( function ( x ) {\n\t\t\t\tif ( allUrls.indexOf( x.keys[ 0 ] ) > -1 ) {\n\t\t\t\t\tjQuery( 'span[data-url=\"' + x.keys[ 0 ] + '\"]' ).html(\n\t\t\t\t\t\t'<b>Clicks:</b> ' +\n\t\t\t\t\t\t\tx.clicks +\n\t\t\t\t\t\t\t'<br>' +\n\t\t\t\t\t\t\t'<b>Position:</b> ' +\n\t\t\t\t\t\t\tMath.round( x.position * 100 ) / 100 +\n\t\t\t\t\t\t\t'<br>' +\n\t\t\t\t\t\t\t'<b>CTR:</b> ' +\n\t\t\t\t\t\t\tMath.round( x.ctr * 10000 ) / 100 +\n\t\t\t\t\t\t\t'%' +\n\t\t\t\t\t\t\t'<br>' +\n\t\t\t\t\t\t\t'<b>Impressions:</b> ' +\n\t\t\t\t\t\t\tx.impressions\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} );\n\t\t} )\n\t\t.catch( (error) => {\n\t\t\tif ( 401 === error.status ) {\n\t\t\t\trefreshToken()\n\t\t\t}\n\t\t} );\n\n\n\tconst t = {\n      requestBody: {\n\t\tsiteUrl: 'https://www.calcolorataprestito.com',\n        startDate: dateI18n( 'Y-m-d', new Date().setDate( new Date().getDate() - 29 ) ),\n        endDate: dateI18n( 'Y-m-d', new Date().setDate( new Date().getDate() - 1 ) ),\n        dimensions: [\"page\"],\n        dimensionFilterGroups: [\n          {\n            groupType: \"and\",\n            filters: [\n              {\n                dimension: \"page\",\n                operator: \"equals\",\n                expression: 'https://www.calcolorataprestito.com/index.php',\n              },\n              {\n                dimension: \"page\",\n                operator: \"equals\",\n                expression: 'https://www.calcolorataprestito.com/prestiti-inpdap.php',\n              },\n            ],\n          },\n        ],\n        aggregationType: \"byPage\",\n        startRow: 0,\n        rowLimit: null,\n      },\n    } \nconsole.log(t)\n\tgapi.client.webmasters.searchanalytics\n\t\t.query( t.requestBody )\n\t\t.then( function ( response ) {\n\t\t\tconsole.log(response)\n\t\t})\n\t\t.catch( (error) => {\n\t\t\tconsole.log(error)\n\t\t} );\n\n}\n\nloadGoogleScript();\n"],"names":["loadGoogleScript","id","src","firstJs","document","getElementsByTagName","getElementById","js","createElement","onload","window","onGoogleScriptLoad","parentNode","insertBefore","dateI18n","apiFetch","chart","token","chartQuery","siteUrl","rowLimit","searchType","startDate","Date","setDate","getDate","endDate","dimensions","allUrls","jQuery","ready","each","index","push","data","refreshToken","path","method","then","result","gapi","client","setToken","catch","error","console","log","finally","_gapi","site","load","start","responseText","getReport","webmasters","searchanalytics","query","response","rows","forEach","x","indexOf","keys","html","clicks","Math","round","position","ctr","impressions","status","t","requestBody","dimensionFilterGroups","groupType","filters","dimension","operator","expression","aggregationType","startRow"],"sourceRoot":""}