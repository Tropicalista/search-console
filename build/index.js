(()=>{var e,t,n,r={315:(e,t,n)=>{"use strict";var r=n(609),o=n.t(r,2),a=n.n(r);const i=window.wp.element,s=window.wp.components,l=window.wp.data,c=window.wp.notices;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var d;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(d||(d={}));var m="beforeunload";function p(e){e.preventDefault(),e.returnValue=""}function f(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}const h=window.wp.url,v=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function o(){var e=n.location,t=e.pathname,o=e.search,a=e.hash,i=r.state||{};return[i.idx,{pathname:t,search:o,hash:a,state:i.usr||null,key:i.key||"default"}]}var a=null;n.addEventListener("popstate",(function(){if(a)v.call(a),a=null;else{var e=d.Pop,t=o(),n=t[0],r=t[1];if(v.length){if(null!=n){var i=l-n;i&&(a={action:e,location:r,retry:function(){E(-1*i)}},E(i))}}else x(e)}}));var i=d.Pop,s=o(),l=s[0],c=s[1],h=f(),v=f();function g(e){return"string"==typeof e?e:(n=(t=e).pathname,r=void 0===n?"/":n,o=t.search,a=void 0===o?"":o,i=t.hash,s=void 0===i?"":i,a&&"?"!==a&&(r+="?"===a.charAt(0)?a:"?"+a),s&&"#"!==s&&(r+="#"===s.charAt(0)?s:"#"+s),r);var t,n,r,o,a,i,s}function w(e,t){return void 0===t&&(t=null),u({pathname:c.pathname,hash:"",search:""},"string"==typeof e?function(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}(e):e,{state:t,key:Math.random().toString(36).substr(2,8)})}function b(e,t){return[{usr:e.state,key:e.key,idx:t},g(e)]}function y(e,t,n){return!v.length||(v.call({action:e,location:t,retry:n}),!1)}function x(e){i=e;var t=o();l=t[0],c=t[1],h.call({action:i,location:c})}function E(e){r.go(e)}return null==l&&(l=0,r.replaceState(u({},r.state,{idx:l}),"")),{get action(){return i},get location(){return c},createHref:g,push:function e(t,o){var a=d.Push,i=w(t,o);if(y(a,i,(function(){e(t,o)}))){var s=b(i,l+1),c=s[0],u=s[1];try{r.pushState(c,"",u)}catch(e){n.location.assign(u)}x(a)}},replace:function e(t,n){var o=d.Replace,a=w(t,n);if(y(o,a,(function(){e(t,n)}))){var i=b(a,l),s=i[0],c=i[1];r.replaceState(s,"",c),x(o)}},go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(e){return h.push(e)},block:function(e){var t=v.push(e);return 1===v.length&&n.addEventListener(m,p),function(){t(),v.length||n.removeEventListener(m,p)}}}}(),g=v.push,w=v.replace;v.push=function(e,t){const n=(0,h.getQueryArgs)(window.location.href),r=(0,h.removeQueryArgs)(window.location.href,...Object.keys(n)),o=(0,h.addQueryArgs)(r,e);return g.call(v,o,t)},v.replace=function(e,t){const n=(0,h.getQueryArgs)(window.location.href),r=(0,h.removeQueryArgs)(window.location.href,...Object.keys(n)),o=(0,h.addQueryArgs)(r,e);return w.call(v,o,t)};const b=v,y=(0,i.createContext)(),x=(0,i.createContext)();function E(){return(0,i.useContext)(x)}function C(e){const t=new URLSearchParams(e.search);return{...e,params:Object.fromEntries(t.entries())}}function _({children:e}){const[t,n]=(0,i.useState)((()=>C(b.location)));return(0,i.useEffect)((()=>b.listen((({location:e})=>{n(C(e))}))),[]),(0,r.createElement)(x.Provider,{value:b},(0,r.createElement)(y.Provider,{value:t},e))}const S=window.wp.apiFetch;var I=n.n(S);const k=window.wp.date,j={settings:!1,sites:[{label:"Select a site",value:""}],customDate:!1,dimension:"query",searchType:"web",startDate:(0,k.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-29)),endDate:(0,k.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-1)),filters:[]},D={setSites:e=>({type:"SET_SITES",sites:e}),setSettings:e=>({type:"SET_SETTINGS",settings:e}),setSetting:(e,t)=>({type:"SET_SETTING",setting:e,value:t}),setSearchType:e=>({type:"SET_SEARCHTYPE",searchType:e}),setFilter:e=>({type:"SET_FILTER",filter:e}),setDimension:e=>({type:"SET_DIMENSION",dimension:e}),setCustomDate:e=>({type:"SET_CUSTOMDATE",val:e}),setStartDate:e=>({type:"SET_STARTDATE",date:e}),setEndDate:e=>({type:"SET_ENDDATE",date:e}),removeFilter:e=>({type:"REMOVE_FILTER",filter:e}),fetchFromAPI:e=>({type:"FETCH_FROM_API",path:e})},T=(0,l.createReduxStore)("searchconsole",{reducer(e=j,t){switch(t.type){case"SET_SETTINGS":return{...e,settings:t.settings};case"SET_SITES":return{...e,sites:t.sites};case"SET_SETTING":return{...e,settings:{...e.settings,[t.setting]:t.value}};case"SET_SEARCHTYPE":return{...e,searchType:t.searchType};case"SET_DIMENSION":return{...e,dimension:t.dimension};case"SET_CUSTOMDATE":return{...e,customDate:t.val};case"SET_STARTDATE":return{...e,startDate:t.date};case"SET_ENDDATE":return{...e,endDate:t.date};case"SET_FILTER":const n={dimension:t.filter.dimension,expression:t.filter.expression,operator:t.filter.operator},r=e.filters.filter((e=>e.dimension!==t.filter.dimension));return r.push(n),{...e,filters:r};case"REMOVE_FILTER":const o=e.filters.filter((e=>e.dimension!==t.filter.dimension));return{...e,filters:o}}return e},actions:D,selectors:{isReady(e){var t;return null!==(t=e.settings)&&void 0!==t&&t},getSettings(e){const{settings:t}=e;return t},getSites(e){const{sites:t}=e;return t},getSite(e){const{settings:t}=e;return t.site},getQuery(e){const{searchType:t,filters:n,dimension:r,startDate:o,endDate:a}=e;return{dimension:r,startDate:o,endDate:a,searchType:t,filters:n}},getFilterByDimension:(e,t)=>e.filters.length?e.filters.find((e=>e.dimension===t)):{dimension:"",expression:"",operator:""},getSearchType(e){const{searchType:t}=e;return t},getFilters(e){const{filters:t}=e;return t},getCustomDate(e){const{customDate:t}=e;return t}},controls:{FETCH_FROM_API:e=>I()({path:e.path})},resolvers:{*getSettings(){const e=yield D.fetchFromAPI("/searchconsole/v1/settings/");return D.setSettings(e)}}});(0,l.register)(T);const A=window.wp.i18n;function M({text:e}){return(0,r.createElement)("div",{className:"loading-settings"},(0,r.createElement)(s.Spinner,null),(0,r.createElement)("span",{className:"description"},e))}function P(e){let{onLoad:t,onError:n,...o}=e;const[a,i]=function(e){let{chartVersion:t="current",chartPackages:n=["corechart","controls"],chartLanguage:o="en",mapsApiKey:a}=e;const[i,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1);var u,d,m;return u="https://www.gstatic.com/charts/loader.js",d=()=>{const e=null===window||void 0===window?void 0:window.google;e&&(e.charts.load(t,{packages:n,language:o,mapsApiKey:a}),e.charts.setOnLoadCallback((()=>{s(e)})))},m=()=>{c(!0)},(0,r.useEffect)((()=>{if(!document)return;const e=document.querySelector('script[src="'.concat(u,'"]'));if(null==e?void 0:e.dataset.loaded)return void(null==d||d());const t=e||document.createElement("script");e||(t.src=u);const n=()=>{t.dataset.loaded="1",null==d||d()};return t.addEventListener("load",n),m&&t.addEventListener("error",m),e||document.head.append(t),()=>{t.removeEventListener("load",n),m&&t.removeEventListener("error",m)}}),[]),[i,l]}(o);return(0,r.useEffect)((()=>{a&&t&&t(a)}),[a]),(0,r.useEffect)((()=>{i&&n&&n()}),[i]),null}const O={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let V=0;const N=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],{Provider:F,Consumer:L}=r.createContext(O),R=e=>{let{children:t,value:n}=e;return r.createElement(F,{value:n},t)},B=e=>{let{render:t}=e;return r.createElement(L,null,(e=>t(e)))};class z extends r.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:e,googleChartWrapper:t}=this.props;window.removeEventListener("resize",this.onResize),e.visualization.events.removeAllListeners(t),"Timeline"===t.getChartType()&&t.getChart()&&t.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...e){super(...e),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:e,googleChartWrapper:t}=this.props;e.visualization.events.addListener(t,"select",(()=>{const e=t.getChart().getSelection(),n=t.getDataTable();if(0===e.length||e[0].row||!n)return;const r=e[0].column,o=this.getColumnID(n,r);this.state.hiddenColumns.includes(o)?this.setState((e=>({...e,hiddenColumns:[...e.hiddenColumns.filter((e=>e!==o))]}))):this.setState((e=>({...e,hiddenColumns:[...e.hiddenColumns,o]})))}))},this.applyFormatters=(e,t)=>{const{google:n}=this.props;for(let r of t)switch(r.type){case"ArrowFormat":new n.visualization.ArrowFormat(r.options).format(e,r.column);break;case"BarFormat":new n.visualization.BarFormat(r.options).format(e,r.column);break;case"ColorFormat":{const t=new n.visualization.ColorFormat(r.options),{ranges:o}=r;for(let e of o)t.addRange(...e);t.format(e,r.column);break}case"DateFormat":new n.visualization.DateFormat(r.options).format(e,r.column);break;case"NumberFormat":new n.visualization.NumberFormat(r.options).format(e,r.column);break;case"PatternFormat":new n.visualization.PatternFormat(r.options).format(e,r.column)}},this.getColumnID=(e,t)=>e.getColumnId(t)||e.getColumnLabel(t),this.draw=async e=>{let{data:t,diffdata:n,rows:r,columns:o,options:a,legend_toggle:i,legendToggle:s,chartType:l,formatters:c,spreadSheetUrl:u,spreadSheetQueryParameters:d}=e;const{google:m,googleChartWrapper:p}=this.props;let f,h=null;if(n){const e=m.visualization.arrayToDataTable(n.old),t=m.visualization.arrayToDataTable(n.new);h=m.visualization[l].prototype.computeDiff(e,t)}f=null!==t?Array.isArray(t)?m.visualization.arrayToDataTable(t):new m.visualization.DataTable(t):r&&o?m.visualization.arrayToDataTable([o,...r]):u?await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((r,o)=>{const a="".concat(n.headers?"headers=".concat(n.headers):"headers=0"),i="".concat(n.query?"&tq=".concat(encodeURIComponent(n.query)):""),s="".concat(n.gid?"&gid=".concat(n.gid):""),l="".concat(n.sheet?"&sheet=".concat(n.sheet):""),c="".concat(n.access_token?"&access_token=".concat(n.access_token):""),u="".concat(a).concat(s).concat(l).concat(i).concat(c),d="".concat(t,"/gviz/tq?").concat(u);new e.visualization.Query(d).send((e=>{e.isError()?o("Error in query:  ".concat(e.getMessage()," ").concat(e.getDetailedMessage())):r(e.getDataTable())}))}))}(m,u,d):m.visualization.arrayToDataTable([]);const v=f.getNumberOfColumns();for(let e=0;e<v;e+=1){const t=this.getColumnID(f,e);if(this.state.hiddenColumns.includes(t)){const t=f.getColumnLabel(e),n=f.getColumnId(e),r=f.getColumnType(e);f.removeColumn(e),f.addColumn({label:t,id:n,type:r})}}const g=p.getChart();"Timeline"===p.getChartType()&&g&&g.clearChart(),p.setChartType(l),p.setOptions(a||{}),p.setDataTable(f),p.draw(),null!==this.props.googleChartDashboard&&this.props.googleChartDashboard.draw(f),h&&(p.setDataTable(h),p.draw()),c&&(this.applyFormatters(f,c),p.setDataTable(f),p.draw()),!0!==s&&!0!==i||this.grayOutHiddenColumns({options:a})},this.grayOutHiddenColumns=e=>{let{options:t}=e;const{googleChartWrapper:n}=this.props,r=n.getDataTable();if(!r)return;const o=r.getNumberOfColumns();if(!1==this.state.hiddenColumns.length>0)return;const a=Array.from({length:o-1}).map(((e,n)=>{const o=this.getColumnID(r,n+1);return this.state.hiddenColumns.includes(o)?"#CCCCCC":t&&t.colors?t.colors[n]:N[n]}));n.setOptions({...t,colors:a}),n.draw()},this.onResize=()=>{const{googleChartWrapper:e}=this.props;e.draw()}}}class H extends r.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:e,googleChartWrapper:t,googleChartDashboard:n}=this.props;return r.createElement(B,{render:o=>r.createElement(z,Object.assign({},o,{google:e,googleChartWrapper:t,googleChartDashboard:n}))})}}class W extends r.Component{shouldComponentUpdate(){return!1}listenToEvents(e){let{chartEvents:t,google:n,googleChartWrapper:r}=e;if(t){n.visualization.events.removeAllListeners(r);for(let e of t){var o=this;const{eventName:t,callback:a}=e;n.visualization.events.addListener(r,t,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a({chartWrapper:r,props:o.props,google:n,eventArgs:t})}))}}}render(){const{google:e,googleChartWrapper:t}=this.props;return r.createElement(B,{render:n=>(this.listenToEvents({chartEvents:n.chartEvents||null,google:e,googleChartWrapper:t}),null)})}}let K=0;class G extends r.Component{componentDidMount(){const{options:e,google:t,chartType:n,chartWrapperParams:r,toolbarItems:o,getChartEditor:a,getChartWrapper:i}=this.props,s={chartType:n,options:e,containerId:this.getGraphID(),...r},l=new t.visualization.ChartWrapper(s);l.setOptions(e||{}),i&&i(l,t);const c=new t.visualization.Dashboard(this.dashboard_ref),u=this.addControls(l,c);o&&t.visualization.drawToolbar(this.toolbar_ref.current,o);let d=null;a&&(d=new t.visualization.ChartEditor,a({chartEditor:d,chartWrapper:l,google:t})),this.setState({googleChartEditor:d,googleChartControls:u,googleChartDashboard:c,googleChartWrapper:l,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper)return;if(!this.state.googleChartDashboard)return;if(!this.state.googleChartControls)return;const{controls:e}=this.props;if(e)for(let t=0;t<e.length;t+=1){const{controlType:n,options:r,controlWrapperParams:o}=e[t];o&&"state"in o&&this.state.googleChartControls[t].control.setState(o.state),this.state.googleChartControls[t].control.setOptions(r),this.state.googleChartControls[t].control.setControlType(n)}}shouldComponentUpdate(e,t){return this.state.isReady!==t.isReady||e.controls!==this.props.controls}render(){const{width:e,height:t,options:n,style:o}=this.props,a={height:t||n&&n.height,width:e||n&&n.width,...o};return this.props.render?r.createElement("div",{ref:this.dashboard_ref,style:a},r.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):r.createElement("div",{ref:this.dashboard_ref,style:a},this.renderControl((e=>{let{controlProp:t}=e;return"bottom"!==t.controlPosition})),this.renderChart(),this.renderControl((e=>{let{controlProp:t}=e;return"bottom"===t.controlPosition})),this.renderToolBar())}constructor(...e){var t;super(),t=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=r.createRef(),this.toolbar_ref=r.createRef(),this.getGraphID=()=>{const{graphID:e,graph_id:t}=this.props;let n;return e||t?n=e&&!t?e:t&&!e?t:e:this.graphID?n=this.graphID:(V+=1,n="reactgooglegraph-".concat(V)),this.graphID=n,this.graphID},this.getControlID=(e,t)=>{let n;return K+=1,n=void 0===e?"googlechart-control-".concat(t,"-").concat(K):e,n},this.addControls=(e,t)=>{const{google:n,controls:r}=this.props,o=r?r.map(((e,t)=>{const{controlID:r,controlType:o,options:a,controlWrapperParams:i}=e,s=this.getControlID(r,t);return{controlProp:e,control:new n.visualization.ControlWrapper({containerId:s,controlType:o,options:a,...i})}})):null;if(!o)return null;t.bind(o.map((e=>{let{control:t}=e;return t})),e);for(let t of o){const{control:r,controlProp:o}=t,{controlEvents:i=[]}=o;for(let t of i){var a=this;const{callback:o,eventName:i}=t;n.visualization.events.removeListener(r,i,o),n.visualization.events.addListener(r,i,(function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];o({chartWrapper:e,controlWrapper:r,props:a.props,google:n,eventArgs:i})}))}}return o},this.renderChart=()=>{const{width:e,height:t,options:n,style:o,className:a,rootProps:i,google:s}=this.props,l={height:t||n&&n.height,width:e||n&&n.width,...o};return r.createElement("div",Object.assign({id:this.getGraphID(),style:l,className:a},i),this.state.isReady&&null!==this.state.googleChartWrapper?r.createElement(r.Fragment,null,r.createElement(H,{googleChartWrapper:this.state.googleChartWrapper,google:s,googleChartDashboard:this.state.googleChartDashboard}),r.createElement(W,{googleChartWrapper:this.state.googleChartWrapper,google:s})):null)},this.renderControl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>!0;return t.state.isReady&&null!==t.state.googleChartControls?r.createElement(r.Fragment,null,t.state.googleChartControls.filter((t=>{let{controlProp:n,control:r}=t;return e({control:r,controlProp:n})})).map((e=>{let{control:t,controlProp:n}=e;return r.createElement("div",{key:t.getContainerId(),id:t.getContainerId()})}))):null},this.renderToolBar=()=>this.props.toolbarItems?r.createElement("div",{ref:this.toolbar_ref}):null}}class U extends r.Component{render(){const{chartLanguage:e,chartPackages:t,chartVersion:n,mapsApiKey:o,loader:a,errorElement:i}=this.props;return r.createElement(R,{value:this.props},"ready"===this.state.loadingStatus&&null!==this.state.google?r.createElement(G,Object.assign({},this.props,{google:this.state.google})):"errored"===this.state.loadingStatus&&i?i:a,r.createElement(P,{chartLanguage:e,chartPackages:t,chartVersion:n,mapsApiKey:o,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(e){const{controls:t,toolbarItems:n,getChartEditor:r}=this.props;return e&&e.visualization&&e.visualization.ChartWrapper&&e.visualization.Dashboard&&(!t||e.visualization.ChartWrapper)&&(!r||e.visualization.ChartEditor)&&(!n||e.visualization.drawToolbar)}constructor(...e){super(...e),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=e=>{if(this.props.onLoad&&this.props.onLoad(e),this.isFullyLoaded(e))this.onSuccess(e);else{const e=setInterval((()=>{const t=window.google;this._isMounted?t&&this.isFullyLoaded(t)&&(clearInterval(e),this.onSuccess(t)):clearInterval(e)}),1e3)}},this.onSuccess=e=>{this.setState({loadingStatus:"ready",google:e})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}var q;U.defaultProps=O,function(e){e.annotation="annotation",e.annotationText="annotationText",e.certainty="certainty",e.emphasis="emphasis",e.interval="interval",e.scope="scope",e.style="style",e.tooltip="tooltip",e.domain="domain"}(q||(q={}));const Y={width:"100%",height:"400",colors:["#4285f4","#5e35b1","#00897b","#E8710A"],animation:{duration:1e3,easing:"out",startup:!0},focusTarget:"category",chartArea:{width:"100%",height:"80%"},hAxis:{gridlines:{count:0,minSpacing:150},minorGridlines:{count:0},showTextEvery:1,format:"MMM dd"},vAxis:{gridlines:{count:0,minSpacing:100},minorGridlines:{count:1},showTextEvery:2},vAxes:{0:{title:"clicks"},1:{title:"impressions"},2:{format:"#%",viewWindow:{min:0,max:1}},3:{direction:-1,viewWindow:{min:1}}},series:{0:{type:"line",targetAxisIndex:0,tooltip:!0},1:{type:"line",targetAxisIndex:1,tooltip:!0},2:{type:"line",targetAxisIndex:2,tooltip:!0},3:{type:"line",targetAxisIndex:3,tooltip:!0}}},$=window.wp.coreData,Q=(0,i.createContext)(),X=function(e){const t={customDate:!1,type:"web",startDate:(0,k.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-29)),endDate:(0,k.dateI18n)("Y-m-d",(new Date).setDate((new Date).getDate()-1)),dimensions:["QUERY"],fields:"rows",dimensionFilterGroups:[]},[n,o]=(0,i.useState)(!1),[a,s]=(0,i.useState)(t),[u,d]=(0,i.useState)(!1),m=E(),[p,f]=(0,$.useEntityProp)("root","site","search_console"),{saveEditedEntityRecord:h}=(0,l.useDispatch)($.store),{createNotice:v}=(0,l.useDispatch)(c.store),{isSaving:g,hasEdits:w}=(0,l.useSelect)((e=>({isSaving:e($.store).isSavingEntityRecord("root","site"),hasEdits:e($.store).hasEditsForEntityRecord("root","site",void 0,"search_console")})),[]),b=()=>{I()({path:"/searchconsole/v1/refresh",method:"POST"}).then((e=>{f({...p,token:e}),window.gapi.client.setToken(e),x()})).catch((e=>{console.log(e),v("error","⚠️ "+e.message.error_description,{type:"snackbar",explicitDismiss:!0,actions:[{label:"Reauthenticate on settings page",onClick:()=>m.push({page:"search-console-settings"})}]})}))},y=(e,t)=>{f({...p,[e]:t})};(0,i.useEffect)((()=>{const e=document.createElement("script");return e.src="https://apis.google.com/js/api.js",e.async=!0,e.defer=!0,e.onload=async()=>await window.gapi.load("client",x),document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]);const x=()=>{window.gapi.client.setToken(window.search_console.token),window.gapi.client.load("searchconsole","v1").then((()=>{C()}))},C=()=>{o(!0)};return(0,r.createElement)(Q.Provider,{value:{query:a,updateQuery:(e,t)=>{s({...a,[e]:t})},settings:p,updateSetting:y,setSettings:f,saveSettings:async()=>h("root","site").then((()=>{v("info","🎯 "+(0,A.__)("Settings saved.","formello"),{type:"snackbar"})})).catch((e=>{v("error","⚠️ "+e.message,{type:"snackbar",explicitDismiss:!0})})),isSaving:g,ready:n,refreshToken:b,revokeToken:()=>{I()({path:"/searchconsole/v1/revoke",method:"POST",data:{token:p.token.refresh_token}}).then((()=>{y("token",{access_token:"",expires_in:3600,id_token:"",refresh_token:"",scope:"",token_type:""}),d(!1)}))},email:u,hasEdits:w,showError:e=>{401!==e.status&&v("error","⚠️ "+e.result.error.message,{type:"snackbar",explicitDismiss:!0}),401===e.status&&b()}}},e.children)};function J(){const{settings:e,query:t,showError:n}=(0,i.useContext)(Q),[o,a]=(0,i.useState)(!1);(0,i.useEffect)((()=>{e.token.access_token&&s()}),[t,e.token]);const s=()=>{window.gapi?.client?.setToken(e.token),window.gapi?.client?.webmasters?.searchanalytics.query({...t,siteUrl:e.site,dimensions:["date"],fields:"rows"}).then((e=>{const t=e.result.rows,n=[];n.push([(0,A.__)("Keys","search-console"),(0,A.__)("Clicks","search-console"),(0,A.__)("Impressions","search-console"),"CTR",(0,A.__)("Position","search-console")]),t.forEach((e=>{n.push([window.moment(e.keys[0],"YYYY-MM-DD").toDate(),l(e.clicks),l(e.impressions),{v:e.ctr,f:l(e.ctr,"ctr")},{v:e.position,f:l(e.position,"position")}])})),a(n)})).catch((e=>{n(e)}))},l=(e,t)=>"ctr"===t?(100*e).toFixed(2)+"%":"position"===t?e.toFixed(2):e;return o?(0,r.createElement)("div",{className:"search-console-chart"},(0,r.createElement)(U,{chartType:"LineChart",data:o,options:Y,legendToggle:!0})):(0,r.createElement)(M,{text:(0,A.__)("Fetching data…","search-console")})}const Z=window.wp.primitives,ee=window.ReactJSXRuntime,te=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})}),ne=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})}),re=(0,i.memo)((function({view:e,onChangeView:t,paginationInfo:{totalItems:n=0,totalPages:r}}){var o;if(!n||!r)return null;const a=null!==(o=e.page)&&void 0!==o?o:1;return!!n&&1!==r&&(0,ee.jsxs)(s.__experimentalHStack,{expanded:!1,spacing:6,justify:"end",className:"dataviews-pagination",children:[(0,ee.jsx)(s.__experimentalHStack,{justify:"flex-start",expanded:!1,spacing:2,className:"dataviews-pagination__page-selection",children:(0,i.createInterpolateElement)((0,A.sprintf)(
// translators: %s: Total number of pages.
// translators: %s: Total number of pages.
(0,A._x)("Page <CurrentPageControl /> of %s","paging"),r),{CurrentPageControl:(0,ee.jsx)(s.SelectControl,{"aria-label":(0,A.__)("Current page"),value:e.page?.toString(),options:Array.from(Array(r)).map(((e,t)=>{const n=t+1;return{value:n.toString(),label:n.toString()}})),onChange:n=>{t({...e,page:+n})},size:"compact",__nextHasNoMarginBottom:!0})})}),(0,ee.jsxs)(s.__experimentalHStack,{expanded:!1,spacing:1,children:[(0,ee.jsx)(s.Button,{onClick:()=>t({...e,page:a-1}),disabled:1===a,accessibleWhenDisabled:!0,label:(0,A.__)("Previous page"),icon:te,showTooltip:!0,size:"compact",tooltipPosition:"top"}),(0,ee.jsx)(s.Button,{onClick:()=>t({...e,page:a+1}),disabled:a>=r,accessibleWhenDisabled:!0,label:(0,A.__)("Next page"),icon:ne,showTooltip:!0,size:"compact",tooltipPosition:"top"})]})]})})),oe=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})}),ae=window.wp.privateApis,{lock:ie,unlock:se}=(0,ae.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/dataviews"),le="is",ce="isNot",ue="isAny",de="isNone",me="isAll",pe="isNotAll",fe=[le,ce,ue,de,me,pe],he={[le]:{key:"is-filter",label:(0,A.__)("Is")},[ce]:{key:"is-not-filter",label:(0,A.__)("Is not")},[ue]:{key:"is-any-filter",label:(0,A.__)("Is any")},[de]:{key:"is-none-filter",label:(0,A.__)("Is none")},[me]:{key:"is-all-filter",label:(0,A.__)("Is all")},[pe]:{key:"is-not-all-filter",label:(0,A.__)("Is not all")}},ve=["asc","desc"],ge={asc:"↑",desc:"↓"},we={asc:"ascending",desc:"descending"},be={asc:(0,A.__)("Sort ascending"),desc:(0,A.__)("Sort descending")},ye="table",xe="grid",Ee=(0,ee.jsx)(Z.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ee.jsx)(Z.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v3.5h-15V5c0-.3.2-.5.5-.5zm8 5.5h6.5v3.5H13V10zm-1.5 3.5h-7V10h7v3.5zm-7 5.5v-4h7v4.5H5c-.3 0-.5-.2-.5-.5zm14.5.5h-6V15h6.5v4c0 .3-.2.5-.5.5z"})}),Ce=(0,ee.jsx)(Z.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ee.jsx)(Z.Path,{d:"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z",fillRule:"evenodd",clipRule:"evenodd"})}),_e=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M4 8.8h8.9V7.2H4v1.6zm0 7h8.9v-1.5H4v1.5zM18 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})}),Se=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M11.1 15.8H20v-1.5h-8.9v1.5zm0-8.6v1.5H20V7.2h-8.9zM6 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})});function Ie(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Ie(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const ke=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Ie(e))&&(r&&(r+=" "),r+=t);return r},je=(0,ee.jsx)(Z.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ee.jsx)(Z.Path,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z"})}),De=(0,ee.jsx)(Z.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ee.jsx)(Z.Path,{d:"M4.67 10.664s-2.09 1.11-2.917 1.582l.494.87 1.608-.914.002.002c.343.502.86 1.17 1.563 1.84.348.33.742.663 1.185.976L5.57 16.744l.858.515 1.02-1.701a9.1 9.1 0 0 0 4.051 1.18V19h1v-2.263a9.1 9.1 0 0 0 4.05-1.18l1.021 1.7.858-.514-1.034-1.723c.442-.313.837-.646 1.184-.977.703-.669 1.22-1.337 1.563-1.839l.002-.003 1.61.914.493-.87c-1.75-.994-2.918-1.58-2.918-1.58l-.003.005a8.29 8.29 0 0 1-.422.689 10.097 10.097 0 0 1-1.36 1.598c-1.218 1.16-3.042 2.293-5.544 2.293-2.503 0-4.327-1.132-5.546-2.293a10.099 10.099 0 0 1-1.359-1.599 8.267 8.267 0 0 1-.422-.689l-.003-.005Z"})});function Te({selection:e,onSelectionChange:t,item:n,getItemId:r,primaryField:o,disabled:a}){const i=r(n),l=!a&&e.includes(i);let c;return c=o?.getValue&&n?(0,A.sprintf)(/* translators: %s: item title. */
l?(0,A.__)("Deselect item: %s"):(0,A.__)("Select item: %s"),o.getValue({item:n})):l?(0,A.__)("Select a new item"):(0,A.__)("Deselect item"),(0,ee.jsx)(s.CheckboxControl,{className:"dataviews-view-table-selection-checkbox",__nextHasNoMarginBottom:!0,"aria-label":c,"aria-disabled":a,checked:l,onChange:()=>{a||t(e.includes(i)?e.filter((e=>i!==e)):[...e,i])}})}const Ae=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})}),{DropdownMenuV2:Me,DropdownMenuGroupV2:Pe,DropdownMenuItemV2:Oe,DropdownMenuItemLabelV2:Ve,kebabCase:Ne}=se(s.privateApis);function Fe({action:e,onClick:t,items:n}){const r="string"==typeof e.label?e.label:e.label(n);return(0,ee.jsx)(s.Button,{label:r,icon:e.icon,isDestructive:e.isDestructive,size:"compact",onClick:t})}function Le({action:e,onClick:t,items:n}){const r="string"==typeof e.label?e.label:e.label(n);return(0,ee.jsx)(Oe,{onClick:t,hideOnClick:!("RenderModal"in e),children:(0,ee.jsx)(Ve,{children:r})})}function Re({action:e,items:t,closeModal:n}){const r="string"==typeof e.label?e.label:e.label(t);return(0,ee.jsx)(s.Modal,{title:e.modalHeader||r,__experimentalHideHeader:!!e.hideModalHeader,onRequestClose:null!=n?n:()=>{},focusOnMount:"firstContentElement",size:"small",overlayClassName:`dataviews-action-modal dataviews-action-modal__${Ne(e.id)}`,children:(0,ee.jsx)(e.RenderModal,{items:t,closeModal:n})})}function Be({action:e,items:t,ActionTrigger:n,isBusy:r}){const[o,a]=(0,i.useState)(!1),s={action:e,onClick:()=>{a(!0)},items:t,isBusy:r};return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(n,{...s}),o&&(0,ee.jsx)(Re,{action:e,items:t,closeModal:()=>a(!1)})]})}function ze({actions:e,item:t}){const n=(0,l.useRegistry)();return(0,ee.jsx)(Pe,{children:e.map((e=>"RenderModal"in e?(0,ee.jsx)(Be,{action:e,items:[t],ActionTrigger:Le},e.id):(0,ee.jsx)(Le,{action:e,onClick:()=>{e.callback([t],{registry:n})},items:[t]},e.id)))})}function He({item:e,actions:t,isCompact:n}){const r=(0,l.useRegistry)(),{primaryActions:o,eligibleActions:a}=(0,i.useMemo)((()=>{const n=t.filter((t=>!t.isEligible||t.isEligible(e)));return{primaryActions:n.filter((e=>e.isPrimary&&!!e.icon)),eligibleActions:n}}),[t,e]);return n?(0,ee.jsx)(We,{item:e,actions:a}):(0,ee.jsxs)(s.__experimentalHStack,{spacing:1,justify:"flex-end",className:"dataviews-item-actions",style:{flexShrink:"0",width:"auto"},children:[!!o.length&&o.map((t=>"RenderModal"in t?(0,ee.jsx)(Be,{action:t,items:[e],ActionTrigger:Fe},t.id):(0,ee.jsx)(Fe,{action:t,onClick:()=>{t.callback([e],{registry:r})},items:[e]},t.id))),(0,ee.jsx)(We,{item:e,actions:a})]})}function We({item:e,actions:t}){return(0,ee.jsx)(Me,{trigger:(0,ee.jsx)(s.Button,{size:"compact",icon:Ae,label:(0,A.__)("Actions"),accessibleWhenDisabled:!0,disabled:!t.length,className:"dataviews-all-actions-button"}),placement:"bottom-end",children:(0,ee.jsx)(ze,{actions:t,item:e})})}function Ke(e){let t=e.filterBy?.operators;return t&&Array.isArray(t)||(t=[ue,de]),t=t.filter((e=>fe.includes(e))),(t.includes(le)||t.includes(ce))&&(t=t.filter((e=>[le,ce].includes(e)))),t}const{DropdownMenuV2:Ge,DropdownMenuGroupV2:Ue,DropdownMenuItemV2:qe,DropdownMenuSeparatorV2:Ye}=se(s.privateApis);function $e(e,t){return(0,i.useMemo)((()=>e.some((e=>e.supportsBulk&&(!e.isEligible||e.isEligible(t))))),[e,t])}function Qe(e,t){return(0,i.useMemo)((()=>t.some((t=>e.some((e=>e.supportsBulk&&(!e.isEligible||e.isEligible(t))))))),[e,t])}function Xe({action:e,selectedItems:t,setActionWithModal:n,onMenuOpenChange:r}){const o=(0,i.useMemo)((()=>t.filter((t=>!e.isEligible||e.isEligible(t)))),[e,t]),{RenderModal:a,hideModalHeader:l}=e,c=(0,i.useCallback)((()=>{n(void 0)}),[n]),u="string"==typeof e.label?e.label:e.label(t);return(0,ee.jsx)(s.Modal,{title:l?void 0:u,__experimentalHideHeader:!!l,onRequestClose:c,overlayClassName:"dataviews-action-modal",children:(0,ee.jsx)(a,{items:o,closeModal:c,onActionPerformed:()=>r(!1)})})}function Je({action:e,selectedItems:t,setActionWithModal:n}){const r=(0,l.useRegistry)(),o=(0,i.useMemo)((()=>t.filter((t=>!e.isEligible||e.isEligible(t)))),[e,t]),a="RenderModal"in e;return(0,ee.jsx)(qe,{disabled:0===o.length,hideOnClick:!a,onClick:async()=>{a?n(e):e.callback(o,{registry:r})},suffix:o.length>0?o.length:void 0,children:e.label},e.id)}function Ze({actions:e,selectedItems:t,setActionWithModal:n}){return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(Ue,{children:e.map((e=>(0,ee.jsx)(Je,{action:e,selectedItems:t,setActionWithModal:n},e.id)))}),(0,ee.jsx)(Ye,{})]})}function et({data:e,actions:t,selection:n,onSelectionChange:r,getItemId:o}){const a=(0,i.useMemo)((()=>t.filter((e=>e.supportsBulk))),[t]),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(),m=(0,i.useMemo)((()=>e.filter((e=>a.some((t=>!t.isEligible||t.isEligible(e)))))),[e,a]),p=m.length,f=(0,i.useMemo)((()=>e.filter((e=>n.includes(o(e))&&m.includes(e)))),[n,e,o,m]),h=f.length===p;return 0===a.length?null:(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(Ge,{open:l,onOpenChange:c,label:(0,A.__)("Bulk actions"),style:{minWidth:"240px"},trigger:(0,ee.jsx)(s.Button,{className:"dataviews-bulk-edit-button",__next40pxDefaultSize:!0,variant:"tertiary",size:"compact",children:f.length?(0,A.sprintf)(/* translators: %d: Number of items. */ /* translators: %d: Number of items. */
(0,A._n)("Edit %d item","Edit %d items",f.length),f.length):(0,A.__)("Bulk edit")}),children:[(0,ee.jsx)(Ze,{actions:a,setActionWithModal:d,selectedItems:f}),(0,ee.jsxs)(Ue,{children:[(0,ee.jsx)(qe,{disabled:h,hideOnClick:!1,onClick:()=>{r(m.map((e=>o(e))))},suffix:p,children:(0,A.__)("Select all")}),(0,ee.jsx)(qe,{disabled:0===n.length,hideOnClick:!1,onClick:()=>{r([])},children:(0,A.__)("Deselect")})]})]}),u&&(0,ee.jsx)(Xe,{action:u,selectedItems:f,setActionWithModal:d,onMenuOpenChange:c})]})}const{DropdownMenuV2:tt,DropdownMenuGroupV2:nt,DropdownMenuItemV2:rt,DropdownMenuRadioItemV2:ot,DropdownMenuItemLabelV2:at,DropdownMenuSeparatorV2:it}=se(s.privateApis);function st({children:e}){return i.Children.toArray(e).filter(Boolean).map(((e,t)=>(0,ee.jsxs)(i.Fragment,{children:[t>0&&(0,ee.jsx)(it,{}),e]},t)))}const lt=(0,i.forwardRef)((function({field:e,view:t,fields:n,onChangeView:r,onHide:o,setOpenedFilter:a},i){const l=!1!==e.enableHiding,c=!1!==e.enableSorting,u=t.sort?.field===e.id,d=Ke(e),m=!(t.filters?.some((t=>e.id===t.field))||!e.elements?.length||!d.length||e.filterBy?.isPrimary);return c||l||m?(0,ee.jsx)(tt,{align:"start",trigger:(0,ee.jsxs)(s.Button,{size:"compact",className:"dataviews-view-table-header-button",ref:i,variant:"tertiary",children:[e.header,t.sort&&u&&(0,ee.jsx)("span",{"aria-hidden":"true",children:ge[t.sort.direction]})]}),style:{minWidth:"240px"},children:(0,ee.jsxs)(st,{children:[c&&(0,ee.jsx)(nt,{children:ve.map((n=>{const o=t.sort&&u&&t.sort.direction===n,a=`${e.id}-${n}`;return(0,ee.jsx)(ot,{name:"view-table-sorting",value:a,checked:o,onChange:()=>{r({...t,sort:{field:e.id,direction:n}})},children:(0,ee.jsx)(at,{children:be[n]})},a)}))}),m&&(0,ee.jsx)(nt,{children:(0,ee.jsx)(rt,{prefix:(0,ee.jsx)(s.Icon,{icon:je}),onClick:()=>{a(e.id),r({...t,page:1,filters:[...t.filters||[],{field:e.id,value:void 0,operator:d[0]}]})},children:(0,ee.jsx)(at,{children:(0,A.__)("Add filter")})})}),l&&(0,ee.jsx)(rt,{prefix:(0,ee.jsx)(s.Icon,{icon:De}),onClick:()=>{const a=t.fields||n.map((e=>e.id));o(e),r({...t,fields:a.filter((t=>t!==e.id))})},children:(0,ee.jsx)(at,{children:(0,A.__)("Hide")})})]})}):e.header}));function ct({selection:e,onSelectionChange:t,data:n,actions:r,getItemId:o}){const a=(0,i.useMemo)((()=>n.filter((e=>r.some((t=>t.supportsBulk&&(!t.isEligible||t.isEligible(e))))))),[n,r]),l=n.filter((t=>e.includes(o(t))&&a.includes(t))),c=l.length===a.length;return(0,ee.jsx)(s.CheckboxControl,{className:"dataviews-view-table-selection-checkbox",__nextHasNoMarginBottom:!0,checked:c,indeterminate:!c&&!!l.length,onChange:()=>{t(c?[]:a.map((e=>o(e))))},"aria-label":c?(0,A.__)("Deselect all"):(0,A.__)("Select all")})}function ut({hasBulkActions:e,item:t,actions:n,id:r,visibleFields:o,primaryField:a,selection:s,getItemId:l,onSelectionChange:c}){const u=$e(n,t),d=u&&s.includes(r),[m,p]=(0,i.useState)(!1),f=(0,i.useRef)(!1);return(0,ee.jsxs)("tr",{className:ke("dataviews-view-table__row",{"is-selected":u&&d,"is-hovered":m,"has-bulk-actions":u}),onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},onTouchStart:()=>{f.current=!0},onClick:()=>{u&&(f.current||"Range"===document.getSelection()?.type||c(s.includes(r)?s.filter((e=>r!==e)):[...s,r]))},children:[e&&(0,ee.jsx)("td",{className:"dataviews-view-table__checkbox-column",style:{width:"1%"},children:(0,ee.jsx)("div",{className:"dataviews-view-table__cell-content-wrapper",children:(0,ee.jsx)(Te,{item:t,selection:s,onSelectionChange:c,getItemId:l,primaryField:a,disabled:!u})})}),o.map((e=>(0,ee.jsx)("td",{style:{width:e.width||void 0,minWidth:e.minWidth||void 0,maxWidth:e.maxWidth||void 0},children:(0,ee.jsx)("div",{className:ke("dataviews-view-table__cell-content-wrapper",{"dataviews-view-table__primary-field":a?.id===e.id}),children:e.render({item:t})})},e.id))),!!n?.length&&(0,ee.jsx)("td",{className:"dataviews-view-table__actions-column",onClick:e=>e.stopPropagation(),children:(0,ee.jsx)(He,{item:t,actions:n})})]})}function dt({selection:e,onSelectionChange:t,getItemId:n,item:r,actions:o,mediaField:a,primaryField:i,visibleFields:l,badgeFields:c,columnFields:u}){const d=$e(o,r),m=n(r),p=e.includes(m);return(0,ee.jsxs)(s.__experimentalVStack,{spacing:0,className:ke("dataviews-view-grid__card",{"is-selected":d&&p}),onClickCapture:n=>{if(n.ctrlKey||n.metaKey){if(n.stopPropagation(),n.preventDefault(),!d)return;t(e.includes(m)?e.filter((e=>m!==e)):[...e,m])}},children:[(0,ee.jsx)("div",{className:"dataviews-view-grid__media",children:a?.render({item:r})}),(0,ee.jsxs)(s.__experimentalHStack,{justify:"space-between",className:"dataviews-view-grid__title-actions",children:[(0,ee.jsx)(Te,{item:r,selection:e,onSelectionChange:t,getItemId:n,primaryField:i,disabled:!d}),(0,ee.jsx)(s.__experimentalHStack,{className:"dataviews-view-grid__primary-field",children:i?.render({item:r})}),(0,ee.jsx)(He,{item:r,actions:o,isCompact:!0})]}),!!c?.length&&(0,ee.jsx)(s.__experimentalHStack,{className:"dataviews-view-grid__badge-fields",spacing:2,wrap:!0,alignment:"top",justify:"flex-start",children:c.map((e=>{const t=e.render({item:r});return t?(0,ee.jsx)(s.FlexItem,{className:"dataviews-view-grid__field-value",children:t},e.id):null}))}),!!l?.length&&(0,ee.jsx)(s.__experimentalVStack,{className:"dataviews-view-grid__fields",spacing:3,children:l.map((e=>{const t=e.render({item:r});return t?(0,ee.jsx)(s.Flex,{className:ke("dataviews-view-grid__field",u?.includes(e.id)?"is-column":"is-row"),gap:1,justify:"flex-start",expanded:!0,style:{height:"auto"},direction:u?.includes(e.id)?"column":"row",children:(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(s.FlexItem,{className:"dataviews-view-grid__field-name",children:e.header}),(0,ee.jsx)(s.FlexItem,{className:"dataviews-view-grid__field-value",style:{maxHeight:"none"},children:t})]})},e.id):null}))})]},m)}const mt=window.wp.compose,{useCompositeStoreV2:pt,CompositeV2:ft,CompositeItemV2:ht,CompositeRowV2:vt,DropdownMenuV2:gt}=se(s.privateApis);function wt({actions:e,id:t,isSelected:n,item:r,mediaField:o,onSelect:a,primaryField:c,store:u,visibleFields:d}){const m=(0,l.useRegistry)(),p=(0,i.useRef)(null),f=`${t}-label`,h=`${t}-description`,[v,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{n&&p.current?.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}),[n]);const{primaryAction:w,eligibleActions:b}=(0,i.useMemo)((()=>{const t=e.filter((e=>!e.isEligible||e.isEligible(r))),n=t.filter((e=>e.isPrimary&&!!e.icon));return{primaryAction:n?.[0],eligibleActions:t}}),[e,r]),[y,x]=(0,i.useState)(!1),E=w&&("string"==typeof w.label?w.label:w.label([r]));return(0,ee.jsx)(vt,{ref:p,render:(0,ee.jsx)("li",{}),role:"row",className:ke({"is-selected":n,"is-hovered":v}),onMouseEnter:()=>{g(!0)},onMouseLeave:()=>{g(!1)},children:(0,ee.jsxs)(s.__experimentalHStack,{className:"dataviews-view-list__item-wrapper",alignment:"center",spacing:0,children:[(0,ee.jsx)("div",{role:"gridcell",children:(0,ee.jsx)(ht,{store:u,render:(0,ee.jsx)("div",{}),role:"button",id:t,"aria-pressed":n,"aria-labelledby":f,"aria-describedby":h,className:"dataviews-view-list__item",onClick:()=>a(r),children:(0,ee.jsxs)(s.__experimentalHStack,{spacing:3,justify:"start",alignment:"flex-start",children:[(0,ee.jsx)("div",{className:"dataviews-view-list__media-wrapper",children:o?.render({item:r})||(0,ee.jsx)("div",{className:"dataviews-view-list__media-placeholder"})}),(0,ee.jsxs)(s.__experimentalVStack,{spacing:0,children:[(0,ee.jsx)("span",{className:"dataviews-view-list__primary-field",id:f,children:c?.render({item:r})}),(0,ee.jsx)("div",{className:"dataviews-view-list__fields",id:h,children:d.map((e=>(0,ee.jsxs)("div",{className:"dataviews-view-list__field",children:[(0,ee.jsx)(s.VisuallyHidden,{as:"span",className:"dataviews-view-list__field-label",children:e.header}),(0,ee.jsx)("span",{className:"dataviews-view-list__field-value",children:e.render({item:r})})]},e.id)))})]})]})})}),b?.length>0&&(0,ee.jsxs)(s.__experimentalHStack,{spacing:1,justify:"flex-end",className:"dataviews-view-list__item-actions",style:{flexShrink:"0",width:"auto"},children:[w&&"RenderModal"in w&&(0,ee.jsx)("div",{role:"gridcell",children:(0,ee.jsx)(ht,{store:u,render:(0,ee.jsx)(s.Button,{label:E,icon:w.icon,isDestructive:w.isDestructive,size:"compact",onClick:()=>x(!0)}),children:y&&(0,ee.jsx)(Re,{action:w,items:[r],closeModal:()=>x(!1)})})}),w&&!("RenderModal"in w)&&(0,ee.jsx)("div",{role:"gridcell",children:(0,ee.jsx)(ht,{store:u,render:(0,ee.jsx)(s.Button,{label:E,icon:w.icon,isDestructive:w.isDestructive,size:"compact",onClick:()=>{w.callback([r],{registry:m})}})})},w.id),(0,ee.jsx)("div",{role:"gridcell",children:(0,ee.jsx)(gt,{trigger:(0,ee.jsx)(ht,{store:u,render:(0,ee.jsx)(s.Button,{size:"compact",icon:Ae,label:(0,A.__)("Actions"),accessibleWhenDisabled:!0,disabled:!e.length,onKeyDown:e=>{"ArrowDown"===e.key&&(e.preventDefault(),u.move(u.down())),"ArrowUp"===e.key&&(e.preventDefault(),u.move(u.up()))}})}),placement:"bottom-end",children:(0,ee.jsx)(ze,{actions:b,item:r})})})]})]})})}const bt=[{type:ye,label:(0,A.__)("Table"),component:function({actions:e,data:t,fields:n,getItemId:r,isLoading:o=!1,onChangeView:a,onSelectionChange:l,selection:c,setOpenedFilter:u,view:d}){const m=(0,i.useRef)(new Map),p=(0,i.useRef)(),[f,h]=(0,i.useState)(),v=Qe(e,t);(0,i.useEffect)((()=>{p.current&&(p.current.focus(),p.current=void 0)}));const g=(0,i.useId)();if(f)return p.current=f,void h(void 0);const w=e=>{const t=m.current.get(e.id),n=t?m.current.get(t.fallback):void 0;h(n?.node)},b=d.fields||n.map((e=>e.id)),y=n.filter((e=>b.includes(e.id)||[d.layout?.mediaField].includes(e.id))),x=!!t?.length,E=n.find((e=>e.id===d.layout?.primaryField));return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)("table",{className:"dataviews-view-table","aria-busy":o,"aria-describedby":g,children:[(0,ee.jsx)("thead",{children:(0,ee.jsxs)("tr",{className:"dataviews-view-table__row",children:[v&&(0,ee.jsx)("th",{className:"dataviews-view-table__checkbox-column",style:{width:"1%"},"data-field-id":"selection",scope:"col",children:(0,ee.jsx)(ct,{selection:c,onSelectionChange:l,data:t,actions:e,getItemId:r})}),y.map(((e,t)=>(0,ee.jsx)("th",{style:{width:e.width||void 0,minWidth:e.minWidth||void 0,maxWidth:e.maxWidth||void 0},"data-field-id":e.id,"aria-sort":d.sort?.field===e.id?we[d.sort.direction]:void 0,scope:"col",children:(0,ee.jsx)(lt,{ref:n=>{n?m.current.set(e.id,{node:n,fallback:y[t>0?t-1:1]?.id}):m.current.delete(e.id)},field:e,view:d,fields:n,onChangeView:a,onHide:w,setOpenedFilter:u})},e.id))),!!e?.length&&(0,ee.jsx)("th",{"data-field-id":"actions",className:"dataviews-view-table__actions-column",children:(0,ee.jsx)("span",{className:"dataviews-view-table-header",children:(0,A.__)("Actions")})})]})}),(0,ee.jsx)("tbody",{children:x&&t.map(((t,n)=>(0,ee.jsx)(ut,{item:t,hasBulkActions:v,actions:e,id:r(t)||n.toString(),visibleFields:y,primaryField:E,selection:c,getItemId:r,onSelectionChange:l},r(t))))})]}),(0,ee.jsx)("div",{className:ke({"dataviews-loading":o,"dataviews-no-results":!x&&!o}),id:g,children:!x&&(0,ee.jsx)("p",{children:o?(0,ee.jsx)(s.Spinner,{}):(0,A.__)("No results")})})]})},icon:Ee},{type:xe,label:(0,A.__)("Grid"),component:function({actions:e,data:t,fields:n,getItemId:r,isLoading:o,onSelectionChange:a,selection:i,view:l}){const c=n.find((e=>e.id===l.layout?.mediaField)),u=n.find((e=>e.id===l.layout?.primaryField)),d=l.fields||n.map((e=>e.id)),{visibleFields:m,badgeFields:p}=n.reduce(((e,t)=>(!d.includes(t.id)||[l.layout?.mediaField,l?.layout?.primaryField].includes(t.id)||e[l.layout?.badgeFields?.includes(t.id)?"badgeFields":"visibleFields"].push(t),e)),{visibleFields:[],badgeFields:[]}),f=!!t?.length;return(0,ee.jsxs)(ee.Fragment,{children:[f&&(0,ee.jsx)(s.__experimentalGrid,{gap:8,columns:2,alignment:"top",className:"dataviews-view-grid","aria-busy":o,children:t.map((t=>(0,ee.jsx)(dt,{selection:i,onSelectionChange:a,getItemId:r,item:t,actions:e,mediaField:c,primaryField:u,visibleFields:m,badgeFields:p,columnFields:l.layout?.columnFields},r(t))))}),!f&&(0,ee.jsx)("div",{className:ke({"dataviews-loading":o,"dataviews-no-results":!o}),children:(0,ee.jsx)("p",{children:o?(0,ee.jsx)(s.Spinner,{}):(0,A.__)("No results")})})]})},icon:Ce},{type:"list",label:(0,A.__)("List"),component:function e(t){const{actions:n,data:r,fields:o,getItemId:a,isLoading:l,onSelectionChange:c,selection:u,view:d}=t,m=(0,mt.useInstanceId)(e,"view-list"),p=r?.findLast((e=>u.includes(a(e)))),f=o.find((e=>e.id===d.layout?.mediaField)),h=o.find((e=>e.id===d.layout?.primaryField)),v=d.fields||o.map((e=>e.id)),g=o.filter((e=>v.includes(e.id)&&![d.layout?.primaryField,d.layout?.mediaField].includes(e.id))),w=e=>c([a(e)]),b=(0,i.useCallback)((e=>e?`${m}-${a(e)}`:void 0),[m,a]),y=pt({defaultActiveId:b(p)}),x=y.useState((e=>e.items.some((t=>t.id===e.activeId))));(0,i.useEffect)((()=>{x||(y.down()?y.move(y.down()):y.up()&&y.move(y.up()))}),[x]);const E=r?.length;return E?(0,ee.jsx)(ft,{id:m,render:(0,ee.jsx)("ul",{}),className:"dataviews-view-list",role:"grid",store:y,children:r.map((e=>{const t=b(e);return(0,ee.jsx)(wt,{id:t,actions:n,item:e,isSelected:e===p,onSelect:w,mediaField:f,primaryField:h,store:y,visibleFields:g},t)}))}):(0,ee.jsx)("div",{className:ke({"dataviews-loading":l,"dataviews-no-results":!E&&!l}),children:!E&&(0,ee.jsx)("p",{children:l?(0,ee.jsx)(s.Spinner,{}):(0,A.__)("No results")})})},icon:(0,A.isRTL)()?_e:Se}],{DropdownMenuV2:yt,DropdownMenuGroupV2:xt,DropdownMenuItemV2:Et,DropdownMenuRadioItemV2:Ct,DropdownMenuCheckboxItemV2:_t,DropdownMenuItemLabelV2:St}=se(s.privateApis);function It({view:e,onChangeView:t,defaultLayouts:n={list:{},grid:{},table:{}}}){const r=Object.keys(n);return r.length<=1?null:r.map((r=>{const o=bt.find((e=>e.type===r));return o?(0,ee.jsx)(Ct,{value:r,name:"view-actions-available-view",checked:r===e.type,hideOnClick:!0,onChange:r=>{switch(r.target.value){case"list":case"grid":case"table":return t({...e,type:r.target.value,...n[r.target.value]})}throw new Error("Invalid dataview")},children:(0,ee.jsx)(St,{children:o.label})},r):null}))}const kt=[10,20,50,100];function jt({view:e,onChangeView:t}){return(0,ee.jsx)(yt,{trigger:(0,ee.jsx)(Et,{suffix:(0,ee.jsx)("span",{"aria-hidden":"true",children:e.perPage}),children:(0,ee.jsx)(St,{children:(0,A.__)("Items per page")})}),children:kt.map((n=>(0,ee.jsx)(Ct,{value:n,name:"view-actions-page-size",checked:e.perPage===n,onChange:()=>{t({...e,perPage:n,page:1})},children:(0,ee.jsx)(St,{children:n})},n)))})}function Dt({view:e,onChangeView:t,fields:n}){const r=n.filter((t=>!1!==t.enableHiding&&t.id!==e?.layout?.mediaField)),o=e.fields||n.map((e=>e.id));return r?.length?(0,ee.jsx)(yt,{trigger:(0,ee.jsx)(Et,{children:(0,ee.jsx)(St,{children:(0,A.__)("Fields")})}),children:r?.map((n=>(0,ee.jsx)(_t,{value:n.id,checked:o.includes(n.id),onChange:()=>{t({...e,fields:o.includes(n.id)?o.filter((e=>e!==n.id)):[...o,n.id]})},children:(0,ee.jsx)(St,{children:n.header})},n.id)))}):null}function Tt({fields:e,view:t,onChangeView:n}){const r=e.filter((e=>!1!==e.enableSorting));if(!r?.length)return null;const o=e.find((e=>e.id===t.sort?.field));return(0,ee.jsx)(yt,{trigger:(0,ee.jsx)(Et,{suffix:(0,ee.jsx)("span",{"aria-hidden":"true",children:o?.header}),children:(0,ee.jsx)(St,{children:(0,A.__)("Sort by")})}),children:r?.map((e=>{const r=t.sort?.direction;return(0,ee.jsx)(yt,{trigger:(0,ee.jsx)(Et,{children:(0,ee.jsx)(St,{children:e.header})}),style:{minWidth:"220px"},children:ve.map((a=>{const i=void 0!==o&&r===a&&e.id===o.id,s=`${e.id}-${a}`;return(0,ee.jsx)(Ct,{name:"view-actions-sorting",value:s,checked:i,onChange:()=>{n({...t,sort:{field:e.id,direction:a}})},children:(0,ee.jsx)(St,{children:be[a]})},s)}))},e.id)}))})}const At=(0,i.memo)((function({fields:e,view:t,onChangeView:n,defaultLayouts:r}){const o=bt.find((e=>t.type===e.type));return(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsxs)(s.__experimentalHStack,{spacing:1,expanded:!1,style:{flexShrink:0},children:[(0,ee.jsx)(yt,{trigger:(0,ee.jsx)(s.Button,{size:"compact",icon:o?.icon,label:(0,A.__)("Layout")}),children:(0,ee.jsx)(It,{view:t,onChangeView:n,defaultLayouts:r})}),(0,ee.jsx)(yt,{trigger:(0,ee.jsx)(s.Button,{size:"compact",icon:oe,label:(0,A._x)("View options","View is used as a noun")}),children:(0,ee.jsxs)(xt,{children:[(0,ee.jsx)(Tt,{fields:e,view:t,onChangeView:n}),(0,ee.jsx)(Dt,{fields:e,view:t,onChangeView:n}),(0,ee.jsx)(jt,{view:t,onChangeView:n})]})})]})})})),Mt=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});var Pt={id:null};function Ot(e,t){return t&&e.item(t)||null}var Vt=Symbol("FOCUS_SILENTLY");function Nt(e,t,n){if(!t)return!1;if(t===n)return!1;const r=e.item(t.id);return!(!r||n&&r.element===n)}var Ft=Object.defineProperty,Lt=Object.defineProperties,Rt=Object.getOwnPropertyDescriptors,Bt=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Wt=(e,t,n)=>t in e?Ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kt=(e,t)=>{for(var n in t||(t={}))zt.call(t,n)&&Wt(e,n,t[n]);if(Bt)for(var n of Bt(t))Ht.call(t,n)&&Wt(e,n,t[n]);return e},Gt=(e,t)=>Lt(e,Rt(t)),Ut=(e,t)=>{var n={};for(var r in e)zt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Bt)for(var r of Bt(e))t.indexOf(r)<0&&Ht.call(e,r)&&(n[r]=e[r]);return n},qt=Object.defineProperty,Yt=Object.defineProperties,$t=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable,Zt=(e,t,n)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,en=(e,t)=>{for(var n in t||(t={}))Xt.call(t,n)&&Zt(e,n,t[n]);if(Qt)for(var n of Qt(t))Jt.call(t,n)&&Zt(e,n,t[n]);return e},tn=(e,t)=>Yt(e,$t(t)),nn=(e,t)=>{var n={};for(var r in e)Xt.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Qt)for(var r of Qt(e))t.indexOf(r)<0&&Jt.call(e,r)&&(n[r]=e[r]);return n};function rn(...e){}function on(e,t){return"function"==typeof Object.hasOwn?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t)}function an(...e){return(...t)=>{for(const n of e)"function"==typeof n&&n(...t)}}function sn(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function ln(e){return e}function cn(e,t){if(!e){if("string"!=typeof t)throw new Error("Invariant failed");throw new Error(t)}}function un(e){return e.disabled||!0===e["aria-disabled"]||"true"===e["aria-disabled"]}function dn(...e){for(const t of e)if(void 0!==t)return t}var mn,pn="undefined"!=typeof window&&!!(null==(mn=window.document)?void 0:mn.createElement);function fn(e){return e?e.ownerDocument||e:document}function hn(e,t=!1){const{activeElement:n}=fn(e);if(!(null==n?void 0:n.nodeName))return null;if("IFRAME"===n.tagName&&n.contentDocument)return hn(n.contentDocument.body,t);if(t){const e=n.getAttribute("aria-activedescendant");if(e){const t=fn(n).getElementById(e);if(t)return t}}return n}function vn(e,t){return e===t||e.contains(t)}function gn(e){const t=e.tagName.toLowerCase();return"button"===t||!("input"!==t||!e.type)&&-1!==wn.indexOf(e.type)}var wn=["button","color","file","image","reset","submit"];function bn(e,t){return"matches"in e?e.matches(t):"msMatchesSelector"in e?e.msMatchesSelector(t):e.webkitMatchesSelector(t)}function yn(e){try{const t=e instanceof HTMLInputElement&&null!==e.selectionStart,n="TEXTAREA"===e.tagName;return t||n||!1}catch(e){return!1}}function xn(e,t){const n=null==e?void 0:e.getAttribute("role");return n&&-1!==["dialog","menu","listbox","tree","grid"].indexOf(n)?n:t}function En(e,t){var n;const r=xn(e);return r&&null!=(n={menu:"menuitem",listbox:"option",tree:"treeitem",grid:"gridcell"}[r])?n:t}function Cn(e){if(!e)return null;if(e.clientHeight&&e.scrollHeight>e.clientHeight){const{overflowY:t}=getComputedStyle(e);if("visible"!==t&&"hidden"!==t)return e}else if(e.clientWidth&&e.scrollWidth>e.clientWidth){const{overflowX:t}=getComputedStyle(e);if("visible"!==t&&"hidden"!==t)return e}return Cn(e.parentElement)||document.scrollingElement||document.body}function Sn(e,...t){/text|search|password|tel|url/i.test(e.type)&&e.setSelectionRange(...t)}function In(){return!!pn&&/mac|iphone|ipad|ipod/i.test(navigator.platform)}function kn(){return pn&&In()&&/apple/i.test(navigator.vendor)}function jn(e){return Boolean(e.currentTarget&&!vn(e.currentTarget,e.target))}function Dn(e){return e.target===e.currentTarget}function Tn(e,t){const n=new FocusEvent("blur",t),r=e.dispatchEvent(n),o=tn(en({},t),{bubbles:!0});return e.dispatchEvent(new FocusEvent("focusout",o)),r}function An(e,t){const n=new MouseEvent("click",t);return e.dispatchEvent(n)}function Mn(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!vn(n,r)}function Pn(e,t,n){const r=requestAnimationFrame((()=>{e.removeEventListener(t,o,!0),n()})),o=()=>{cancelAnimationFrame(r),n()};return e.addEventListener(t,o,{once:!0,capture:!0}),r}function On(e,t,n,r=window){const o=[];try{r.document.addEventListener(e,t,n);for(const a of Array.from(r.frames))o.push(On(e,t,n,a))}catch(e){}return()=>{try{r.document.removeEventListener(e,t,n)}catch(e){}o.forEach((e=>e()))}}var Vn=Kt({},o),Nn=Vn.useId,Fn=(Vn.useDeferredValue,Vn.useInsertionEffect),Ln=pn?r.useLayoutEffect:r.useEffect;function Rn(e){const t=(0,r.useRef)((()=>{throw new Error("Cannot call an event handler while rendering.")}));return Fn?Fn((()=>{t.current=e})):t.current=e,(0,r.useCallback)(((...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)}),[])}function Bn(...e){return(0,r.useMemo)((()=>{if(e.some(Boolean))return t=>{e.forEach((e=>function(e,t){"function"==typeof e?e(t):e&&(e.current=t)}(e,t)))}}),e)}function zn(e){if(Nn){const t=Nn();return e||t}const[t,n]=(0,r.useState)(e);return Ln((()=>{if(e||t)return;const r=Math.random().toString(36).substr(2,6);n(`id-${r}`)}),[e,t]),e||t}function Hn(e,t){const n=e=>{if("string"==typeof e)return e},[o,a]=(0,r.useState)((()=>n(t)));return Ln((()=>{const r=e&&"current"in e?e.current:e;a((null==r?void 0:r.tagName.toLowerCase())||n(t))}),[e,t]),o}function Wn(e,t){const n=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(n.current)return e();n.current=!0}),t),(0,r.useEffect)((()=>()=>{n.current=!1}),[])}function Kn(e){return Rn("function"==typeof e?e:()=>e)}function Gn(e,t,n=[]){const o=(0,r.useCallback)((n=>(e.wrapElement&&(n=e.wrapElement(n)),t(n))),[...n,e.wrapElement]);return Gt(Kt({},e),{wrapElement:o})}Symbol("setNextState");var Un=!1,qn=0,Yn=0;function $n(e){(function(e){const t=e.movementX||e.screenX-qn,n=e.movementY||e.screenY-Yn;return qn=e.screenX,Yn=e.screenY,t||n||!1})(e)&&(Un=!0)}function Qn(){Un=!1}function Xn(e){return r.forwardRef(((t,n)=>e(Kt({ref:n},t))))}function Jn(e){const t=Xn(e);return r.memo(t)}function Zn(e,t){const n=t,{as:o,wrapElement:a,render:i}=n,s=Ut(n,["as","wrapElement","render"]);let l;const c=Bn(t.ref,function(e){return function(e){return!!e&&!!(0,r.isValidElement)(e)&&"ref"in e}(e)?e.ref:null}(i));if(o&&"string"!=typeof o)l=(0,ee.jsx)(o,Gt(Kt({},s),{render:i}));else if(r.isValidElement(i)){const e=Gt(Kt({},i.props),{ref:c});l=r.cloneElement(i,function(e,t){const n=Kt({},e);for(const r in t){if(!on(t,r))continue;if("className"===r){const r="className";n[r]=e[r]?`${e[r]} ${t[r]}`:t[r];continue}if("style"===r){const r="style";n[r]=e[r]?Kt(Kt({},e[r]),t[r]):t[r];continue}const o=t[r];if("function"==typeof o&&r.startsWith("on")){const t=e[r];if("function"==typeof t){n[r]=(...e)=>{o(...e),t(...e)};continue}}n[r]=o}return n}(s,e))}else if(i)l=i(s);else if("function"==typeof t.children){const e=s,{children:n}=e,r=Ut(e,["children"]);l=t.children(r)}else l=o?(0,ee.jsx)(o,Kt({},s)):(0,ee.jsx)(e,Kt({},s));return a?a(l):l}function er(e){return(t={})=>{const n=e(t),r={};for(const e in n)on(n,e)&&void 0!==n[e]&&(r[e]=n[e]);return r}}function tr(e=[],t=[]){const n=r.createContext(void 0),o=r.createContext(void 0),a=()=>r.useContext(n),i=t=>e.reduceRight(((e,n)=>(0,ee.jsx)(n,Gt(Kt({},t),{children:e}))),(0,ee.jsx)(n.Provider,Kt({},t)));return{context:n,scopedContext:o,useContext:a,useScopedContext:(e=!1)=>{const t=r.useContext(o),n=a();return e?t:t||n},useProviderContext:()=>{const e=r.useContext(o),t=a();if(!e||e!==t)return t},ContextProvider:i,ScopedContextProvider:e=>(0,ee.jsx)(i,Gt(Kt({},e),{children:t.reduceRight(((t,n)=>(0,ee.jsx)(n,Gt(Kt({},e),{children:t}))),(0,ee.jsx)(o.Provider,Kt({},e)))}))}}var nr=tr(),rr=nr.useContext,or=(nr.useScopedContext,nr.useProviderContext,tr([nr.ContextProvider],[nr.ScopedContextProvider])),ar=or.useContext,ir=(or.useScopedContext,or.useProviderContext),sr=or.ContextProvider,lr=or.ScopedContextProvider,cr=(0,r.createContext)(void 0),ur=(0,r.createContext)(void 0),dr="";function mr(){dr=""}function pr(e,t){var n;const r=(null==(n=e.element)?void 0:n.textContent)||e.children;return!!r&&sn(r).trim().toLowerCase().startsWith(t.toLowerCase())}var fr=er((e=>{var t=e,{store:n,typeahead:o=!0}=t,a=Ut(t,["store","typeahead"]);const i=ar();cn(n=n||i,!1);const s=a.onKeyDownCapture,l=(0,r.useRef)(0),c=Rn((e=>{if(null==s||s(e),e.defaultPrevented)return;if(!o)return;if(!n)return;const{items:t,activeId:r}=n.getState();if(!function(e){const t=e.target;return(!t||!yn(t))&&(!(" "!==e.key||!dr.length)||1===e.key.length&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&/^[\p{Letter}\p{Number}]$/u.test(e.key))}(e))return mr();let a=function(e){return e.filter((e=>!e.disabled))}(t);if(!function(e,t){if(Dn(e))return!0;const n=e.target;return!!n&&t.some((e=>e.element===n))}(e,a))return mr();e.preventDefault(),window.clearTimeout(l.current),l.current=window.setTimeout((()=>{dr=""}),500);const i=e.key.toLowerCase();dr+=i,a=function(e,t,n){if(!n)return e;const r=e.find((e=>e.id===n));return r&&pr(r,t)?dr!==t&&pr(r,dr)?e:(dr=t,function(e,t,n=!1){const r=e.findIndex((e=>e.id===t));return[...e.slice(r+1),...n?[Pt]:[],...e.slice(0,r)]}(e.filter((e=>pr(e,dr))),n).filter((e=>e.id!==n))):e}(a,i,r);const c=a.find((e=>pr(e,dr)));c?n.move(c.id):mr()}));return Gt(Kt({},a),{onKeyDownCapture:c})})),hr=Xn((e=>Zn("div",fr(e))));function vr(e){return!!bn(e,"input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])")&&!!function(e){const t=e;return t.offsetWidth>0||t.offsetHeight>0||e.getClientRects().length>0}(e)&&!function(e,t){if("closest"in e)return e.closest(t);do{if(bn(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}(e,"[inert]")}function gr(e){const t=hn(e);if(!t)return!1;if(t===e)return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&n===e.id}function wr(e){const t=hn(e);if(!t)return!1;if(vn(e,t))return!0;const n=t.getAttribute("aria-activedescendant");return!!n&&"id"in e&&(n===e.id||!!e.querySelector(`#${CSS.escape(n)}`))}function br(e){const t=e.relatedTarget;return(null==t?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null}var yr=Symbol("composite-hover"),xr=er((e=>{var t=e,{store:n,focusOnHover:o=!0,blurOnHoverEnd:a=!!o}=t,i=Ut(t,["store","focusOnHover","blurOnHoverEnd"]);const s=ar();cn(n=n||s,!1);const l=((0,r.useEffect)((()=>{On("mousemove",$n,!0),On("mousedown",Qn,!0),On("mouseup",Qn,!0),On("keydown",Qn,!0),On("scroll",Qn,!0)}),[]),Rn((()=>Un))),c=i.onMouseMove,u=Kn(o),d=Rn((e=>{if(null==c||c(e),!e.defaultPrevented&&l()&&u(e)){if(!wr(e.currentTarget)){const e=null==n?void 0:n.getState().baseElement;e&&!gr(e)&&e.focus()}null==n||n.setActiveId(e.currentTarget.id)}})),m=i.onMouseLeave,p=Kn(a),f=Rn((e=>{var t;null==m||m(e),e.defaultPrevented||l()&&(function(e){const t=br(e);return!!t&&vn(e.currentTarget,t)}(e)||function(e){let t=br(e);if(!t)return!1;do{if(on(t,yr)&&t[yr])return!0;t=t.parentElement}while(t);return!1}(e)||u(e)&&p(e)&&(null==n||n.setActiveId(null),null==(t=null==n?void 0:n.getState().baseElement)||t.focus()))})),h=(0,r.useCallback)((e=>{e&&(e[yr]=!0)}),[]);return Gt(Kt({},i),{ref:Bn(h,i.ref),onMouseMove:d,onMouseLeave:f})})),Er=Jn((e=>Zn("div",xr(e))));function Cr(e,t){const n=e.__unstableInternals;return cn(n,"Invalid store"),n[t]}function _r(e,...t){let n=e,r=n,o=Symbol(),a=rn;const i=new Set,s=new Set,l=new Set,c=new Set,u=new Set,d=new WeakMap,m=new WeakMap,p=(e,t,n=c)=>(n.add(t),m.set(t,e),()=>{var e;null==(e=d.get(t))||e(),d.delete(t),m.delete(t),n.delete(t)}),f=(e,a,i=!1)=>{if(!on(n,e))return;const l=(p=a,f=n[e],function(e){return"function"==typeof e}(p)?p(function(e){return"function"==typeof e}(f)?f():f):p);var p,f;if(l===n[e])return;i||t.forEach((t=>{var n;null==(n=null==t?void 0:t.setState)||n.call(t,e,l)}));const h=n;n=tn(en({},n),{[e]:l});const v=Symbol();o=v,s.add(e);const g=(t,r,o)=>{var a;const i=m.get(t);i&&!i.some((t=>o?o.has(t):t===e))||(null==(a=d.get(t))||a(),d.set(t,t(n,r)))};c.forEach((e=>{g(e,h)})),queueMicrotask((()=>{if(o!==v)return;const e=n;u.forEach((e=>{g(e,r,s)})),r=e,s.clear()}))},h={getState:()=>n,setState:f,__unstableInternals:{setup:e=>(l.add(e),()=>l.delete(e)),init:()=>{const e=i.size,r=Symbol();i.add(r);const o=()=>{i.delete(r),i.size||a()};if(e)return o;const s=(c=n,Object.keys(c)).map((e=>an(...t.map((t=>{var n;const r=null==(n=null==t?void 0:t.getState)?void 0:n.call(t);if(r&&on(r,e))return jr(t,[e],(t=>{f(e,t[e],!0)}))})))));var c;const u=[];l.forEach((e=>u.push(e())));const d=t.map(Ir);return a=an(...s,...u,...d),o},subscribe:(e,t)=>p(e,t),sync:(e,t)=>(d.set(t,t(n,n)),p(e,t)),batch:(e,t)=>(d.set(t,t(n,r)),p(e,t,u)),pick:e=>_r(function(e,t){const n={};for(const r of t)on(e,r)&&(n[r]=e[r]);return n}(n,e),h),omit:e=>_r(function(e,t){const n=en({},e);for(const e of t)on(n,e)&&delete n[e];return n}(n,e),h)}};return h}function Sr(e,...t){if(e)return Cr(e,"setup")(...t)}function Ir(e,...t){if(e)return Cr(e,"init")(...t)}function kr(e,...t){if(e)return Cr(e,"subscribe")(...t)}function jr(e,...t){if(e)return Cr(e,"sync")(...t)}function Dr(e,...t){if(e)return Cr(e,"batch")(...t)}function Tr(e,...t){if(e)return Cr(e,"omit")(...t)}function Ar(...e){const t=e.reduce(((e,t)=>{var n;const r=null==(n=null==t?void 0:t.getState)?void 0:n.call(t);return r?en(en({},e),r):e}),{});return _r(t,...e)}var Mr=n(888),{useSyncExternalStore:Pr}=Mr,Or=()=>()=>{};function Vr(e,t=ln){const n=r.useCallback((t=>e?kr(e,null,t):Or()),[e]),o=()=>{const n="string"==typeof t?t:null,r="function"==typeof t?t:null,o=null==e?void 0:e.getState();return r?r(o):o&&n&&on(o,n)?o[n]:void 0};return Pr(n,o,o)}function Nr(e,t,n,o){const a=on(t,n)?t[n]:void 0,i=o?t[o]:void 0,s=function(e){const t=(0,r.useRef)(e);return Ln((()=>{t.current=e})),t}({value:a,setValue:i});Ln((()=>jr(e,[n],((e,t)=>{const{value:r,setValue:o}=s.current;o&&e[n]!==t[n]&&e[n]!==r&&o(e[n])}))),[e,n]),Ln((()=>{if(void 0!==a)return e.setState(n,a),Dr(e,[n],(()=>{void 0!==a&&e.setState(n,a)}))}))}function Fr(e,t,n){return Nr(e=function(e,t,n){return Wn(t,[n.store]),Nr(e,n,"items","setItems"),e}(e,t,n),n,"activeId","setActiveId"),Nr(e,n,"includesBaseElement"),Nr(e,n,"virtualFocus"),Nr(e,n,"orientation"),Nr(e,n,"rtl"),Nr(e,n,"focusLoop"),Nr(e,n,"focusWrap"),Nr(e,n,"focusShift"),e}function Lr(e,t,n){return function(e,t,n){return Wn(t,[n.store,n.disclosure]),Nr(e,n,"open","setOpen"),Nr(e,n,"mounted","setMounted"),Nr(e,n,"animated"),e}(e,t,n)}function Rr(e={}){var t;e.store;const n=null==(t=e.store)?void 0:t.getState(),r=dn(e.items,null==n?void 0:n.items,e.defaultItems,[]),o=new Map(r.map((e=>[e.id,e]))),a={items:r,renderedItems:dn(null==n?void 0:n.renderedItems,[])},i=function(e){return null==e?void 0:e.__unstablePrivateStore}(e.store),s=_r({items:r,renderedItems:a.renderedItems},i),l=_r(a,e.store),c=e=>{const t=function(e){const t=e.map(((e,t)=>[t,e]));let n=!1;return t.sort((([e,t],[r,o])=>{const a=t.element,i=o.element;return a===i?0:a&&i?function(e,t){return Boolean(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}(a,i)?(e>r&&(n=!0),-1):(e<r&&(n=!0),1):0})),n?t.map((([e,t])=>t)):e}(e);s.setState("renderedItems",t),l.setState("renderedItems",t)};Sr(l,(()=>Ir(s))),Sr(s,(()=>Dr(s,["items"],(e=>{l.setState("items",e.items)})))),Sr(s,(()=>Dr(s,["renderedItems"],(e=>{let t=!0,n=requestAnimationFrame((()=>{const{renderedItems:t}=l.getState();e.renderedItems!==t&&c(e.renderedItems)}));if("function"!=typeof IntersectionObserver)return()=>cancelAnimationFrame(n);const r=function(e){var t;const n=e.find((e=>!!e.element)),r=[...e].reverse().find((e=>!!e.element));let o=null==(t=null==n?void 0:n.element)?void 0:t.parentElement;for(;o&&(null==r?void 0:r.element);){if(r&&o.contains(r.element))return o;o=o.parentElement}return fn(o).body}(e.renderedItems),o=new IntersectionObserver((()=>{t?t=!1:(cancelAnimationFrame(n),n=requestAnimationFrame((()=>c(e.renderedItems))))}),{root:r});for(const t of e.renderedItems)t.element&&o.observe(t.element);return()=>{cancelAnimationFrame(n),o.disconnect()}}))));const u=(e,t,n=!1)=>{let r;return t((t=>{const n=t.findIndex((({id:t})=>t===e.id)),a=t.slice();if(-1!==n){r=t[n];const i=en(en({},r),e);a[n]=i,o.set(e.id,i)}else a.push(e),o.set(e.id,e);return a})),()=>{t((t=>{if(!r)return n&&o.delete(e.id),t.filter((({id:t})=>t!==e.id));const a=t.findIndex((({id:t})=>t===e.id));if(-1===a)return t;const i=t.slice();return i[a]=r,o.set(e.id,r),i}))}},d=e=>u(e,(e=>s.setState("items",e)),!0);return tn(en({},l),{registerItem:d,renderItem:e=>an(d(e),u(e,(e=>s.setState("renderedItems",e)))),item:e=>{if(!e)return null;let t=o.get(e);if(!t){const{items:n}=l.getState();t=n.find((t=>t.id===e)),t&&o.set(e,t)}return t||null},__unstablePrivateStore:s})}function Br(e){const t=[];for(const n of e)t.push(...n);return t}function zr(e){return e.slice().reverse()}var Hr={id:null};function Wr(e,t){return e.find((e=>t?!e.disabled&&e.id!==t:!e.disabled))}function Kr(e,t){return e.filter((e=>e.rowId===t))}function Gr(e){const t=[];for(const n of e){const e=t.find((e=>{var t;return(null==(t=e[0])?void 0:t.rowId)===n.rowId}));e?e.push(n):t.push([n])}return t}function Ur(e){let t=0;for(const{length:n}of e)n>t&&(t=n);return t}function qr(e,t,n){const r=Ur(e);for(const o of e)for(let e=0;e<r;e+=1){const r=o[e];if(!r||n&&r.disabled){const r=0===e&&n?Wr(o):o[e-1];o[e]=r&&t!==r.id&&n?r:{id:"__EMPTY_ITEM__",disabled:!0,rowId:null==r?void 0:r.rowId}}}return e}function Yr(e){const t=Gr(e),n=Ur(t),r=[];for(let e=0;e<n;e+=1)for(const n of t){const t=n[e];t&&r.push(tn(en({},t),{rowId:t.rowId?`${e}`:void 0}))}return r}var $r=kn()&&pn&&!!navigator.maxTouchPoints;function Qr(e={}){var t;e.store;const n=null==(t=e.store)?void 0:t.getState(),r=dn(e.activeId,null==n?void 0:n.activeId,e.defaultActiveId,null),o=function(e={}){var t;const n=null==(t=e.store)?void 0:t.getState(),r=Rr(e),o=dn(e.activeId,null==n?void 0:n.activeId,e.defaultActiveId),a=_r(tn(en({},r.getState()),{activeId:o,baseElement:dn(null==n?void 0:n.baseElement,null),includesBaseElement:dn(e.includesBaseElement,null==n?void 0:n.includesBaseElement,null===o),moves:dn(null==n?void 0:n.moves,0),orientation:dn(e.orientation,null==n?void 0:n.orientation,"both"),rtl:dn(e.rtl,null==n?void 0:n.rtl,!1),virtualFocus:dn(e.virtualFocus,null==n?void 0:n.virtualFocus,!1),focusLoop:dn(e.focusLoop,null==n?void 0:n.focusLoop,!1),focusWrap:dn(e.focusWrap,null==n?void 0:n.focusWrap,!1),focusShift:dn(e.focusShift,null==n?void 0:n.focusShift,!1)}),r,e.store);Sr(a,(()=>jr(a,["renderedItems","activeId"],(e=>{a.setState("activeId",(t=>{var n;return void 0!==t?t:null==(n=Wr(e.renderedItems))?void 0:n.id}))}))));const i=(e,t,n,r)=>{var o,i;const{activeId:s,rtl:l,focusLoop:c,focusWrap:u,includesBaseElement:d}=a.getState(),m=l&&"vertical"!==t?zr(e):e;if(null==s)return null==(o=Wr(m))?void 0:o.id;const p=m.find((e=>e.id===s));if(!p)return null==(i=Wr(m))?void 0:i.id;const f=!!p.rowId,h=m.indexOf(p),v=m.slice(h+1),g=Kr(v,p.rowId);if(void 0!==r){const e=function(e,t){return e.filter((e=>t?!e.disabled&&e.id!==t:!e.disabled))}(g,s),t=e.slice(r)[0]||e[e.length-1];return null==t?void 0:t.id}const w=function(e){return"vertical"===e?"horizontal":"horizontal"===e?"vertical":void 0}(f?t||"horizontal":t),b=c&&c!==w,y=f&&u&&u!==w;if(n=n||!f&&b&&d,b){const e=function(e,t,n=!1){const r=e.findIndex((e=>e.id===t));return[...e.slice(r+1),...n?[Hr]:[],...e.slice(0,r)]}(y&&!n?m:Kr(m,p.rowId),s,n),t=Wr(e,s);return null==t?void 0:t.id}if(y){const e=Wr(n?g:v,s);return n?(null==e?void 0:e.id)||null:null==e?void 0:e.id}const x=Wr(g,s);return!x&&n?null:null==x?void 0:x.id};return tn(en(en({},r),a),{setBaseElement:e=>a.setState("baseElement",e),setActiveId:e=>a.setState("activeId",e),move:e=>{void 0!==e&&(a.setState("activeId",e),a.setState("moves",(e=>e+1)))},first:()=>{var e;return null==(e=Wr(a.getState().renderedItems))?void 0:e.id},last:()=>{var e;return null==(e=Wr(zr(a.getState().renderedItems)))?void 0:e.id},next:e=>{const{renderedItems:t,orientation:n}=a.getState();return i(t,n,!1,e)},previous:e=>{var t;const{renderedItems:n,orientation:r,includesBaseElement:o}=a.getState(),s=!(null==(t=Wr(n))?void 0:t.rowId)&&o;return i(zr(n),r,s,e)},down:e=>{const{activeId:t,renderedItems:n,focusShift:r,focusLoop:o,includesBaseElement:s}=a.getState(),l=r&&!e,c=Yr(Br(qr(Gr(n),t,l)));return i(c,"vertical",o&&"horizontal"!==o&&s,e)},up:e=>{const{activeId:t,renderedItems:n,focusShift:r,includesBaseElement:o}=a.getState(),s=r&&!e,l=Yr(zr(Br(qr(Gr(n),t,s))));return i(l,"vertical",o,e)}})}(tn(en({},e),{activeId:r,includesBaseElement:dn(e.includesBaseElement,null==n?void 0:n.includesBaseElement,!0),orientation:dn(e.orientation,null==n?void 0:n.orientation,"vertical"),focusLoop:dn(e.focusLoop,null==n?void 0:n.focusLoop,!0),focusWrap:dn(e.focusWrap,null==n?void 0:n.focusWrap,!0),virtualFocus:dn(e.virtualFocus,null==n?void 0:n.virtualFocus,!$r)})),a=function(e={}){var t=e,{popover:n}=t,r=nn(t,["popover"]);const o=Ar(r.store,Tr(n,["arrowElement","anchorElement","contentElement","popoverElement","disclosureElement"])),a=null==o?void 0:o.getState(),i=function(e={}){return function(e={}){const t=Ar(e.store,Tr(e.disclosure,["contentElement","disclosureElement"])),n=null==t?void 0:t.getState(),r=dn(e.open,null==n?void 0:n.open,e.defaultOpen,!1),o=dn(e.animated,null==n?void 0:n.animated,!1),a=_r({open:r,animated:o,animating:!!o&&r,mounted:r,contentElement:dn(null==n?void 0:n.contentElement,null),disclosureElement:dn(null==n?void 0:n.disclosureElement,null)},t);return Sr(a,(()=>jr(a,["animated","animating"],(e=>{e.animated||a.setState("animating",!1)})))),Sr(a,(()=>kr(a,["open"],(()=>{a.getState().animated&&a.setState("animating",!0)})))),Sr(a,(()=>jr(a,["open","animating"],(e=>{a.setState("mounted",e.open||e.animating)})))),tn(en({},a),{setOpen:e=>a.setState("open",e),show:()=>a.setState("open",!0),hide:()=>a.setState("open",!1),toggle:()=>a.setState("open",(e=>!e)),stopAnimation:()=>a.setState("animating",!1),setContentElement:e=>a.setState("contentElement",e),setDisclosureElement:e=>a.setState("disclosureElement",e)})}(e)}(tn(en({},r),{store:o})),s=dn(r.placement,null==a?void 0:a.placement,"bottom"),l=_r(tn(en({},i.getState()),{placement:s,currentPlacement:s,anchorElement:dn(null==a?void 0:a.anchorElement,null),popoverElement:dn(null==a?void 0:a.popoverElement,null),arrowElement:dn(null==a?void 0:a.arrowElement,null),rendered:Symbol("rendered")}),i,o);return tn(en(en({},i),l),{setAnchorElement:e=>l.setState("anchorElement",e),setPopoverElement:e=>l.setState("popoverElement",e),setArrowElement:e=>l.setState("arrowElement",e),render:()=>l.setState("rendered",Symbol("rendered"))})}(tn(en({},e),{placement:dn(e.placement,null==n?void 0:n.placement,"bottom-start")})),i=dn(e.value,null==n?void 0:n.value,e.defaultValue,""),s=dn(e.selectedValue,null==n?void 0:n.selectedValue,e.defaultSelectedValue,""),l=Array.isArray(s),c=_r(tn(en(en({},o.getState()),a.getState()),{value:i,selectedValue:s,resetValueOnSelect:dn(e.resetValueOnSelect,null==n?void 0:n.resetValueOnSelect,l),resetValueOnHide:dn(e.resetValueOnHide,null==n?void 0:n.resetValueOnHide,l),activeValue:null==n?void 0:n.activeValue}),o,a,e.store);return Sr(c,(()=>jr(c,["resetValueOnHide","mounted"],(e=>{e.resetValueOnHide&&(e.mounted||c.setState("value",i))})))),Sr(c,(()=>jr(c,["resetValueOnSelect","selectedValue"],(e=>{e.resetValueOnSelect&&c.setState("value",i)})))),Sr(c,(()=>Dr(c,["mounted"],(e=>{e.mounted||(c.setState("activeId",r),c.setState("moves",0))})))),Sr(c,(()=>jr(c,["moves","activeId"],((e,t)=>{e.moves===t.moves&&c.setState("activeValue",void 0)})))),Sr(c,(()=>Dr(c,["moves","renderedItems"],((e,t)=>{if(e.moves===t.moves)return;const{activeId:n}=c.getState(),r=o.item(n);c.setState("activeValue",null==r?void 0:r.value)})))),tn(en(en(en({},a),o),c),{setValue:e=>c.setState("value",e),setSelectedValue:e=>c.setState("selectedValue",e)})}function Xr(e={}){const[t,n]=function(e,t){const[n,o]=r.useState((()=>e(t)));Ln((()=>Ir(n)),[n]);const a=r.useCallback((e=>Vr(n,e)),[n]);return[r.useMemo((()=>Gt(Kt({},n),{useState:a})),[n,a]),Rn((()=>{o((n=>e(Kt(Kt({},t),n.getState()))))}))]}(Qr,e);return function(e,t,n){return Nr(e=Fr(e=function(e,t,n){return Wn(t,[n.popover]),Nr(e=Lr(e,t,n),n,"placement"),e}(e,t,n),t,n),n,"value","setValue"),Nr(e,n,"selectedValue","setSelectedValue"),Nr(e,n,"resetValueOnHide"),Nr(e,n,"resetValueOnSelect"),e}(t,n,e)}var Jr=tr(),Zr=(Jr.useContext,Jr.useScopedContext,Jr.useProviderContext),eo=tr([Jr.ContextProvider],[Jr.ScopedContextProvider]),to=(eo.useContext,eo.useScopedContext,eo.useProviderContext,eo.ContextProvider),no=eo.ScopedContextProvider,ro=((0,r.createContext)(void 0),(0,r.createContext)(void 0),tr([to],[no])),oo=(ro.useContext,ro.useScopedContext,ro.useProviderContext),ao=ro.ContextProvider,io=ro.ScopedContextProvider,so=tr([ao,sr],[io,lr]),lo=(so.useContext,so.useScopedContext),co=so.useProviderContext,uo=so.ContextProvider,mo=so.ScopedContextProvider,po=(0,r.createContext)(void 0),fo=(0,r.createContext)(!1);function ho(e={}){const t=Xr(e);return(0,ee.jsx)(uo,{value:t,children:e.children})}var vo=er((e=>{var t=e,{store:n}=t,r=Ut(t,["store"]);const o=co();cn(n=n||o,!1);const a=n.useState((e=>{var t;return null==(t=e.baseElement)?void 0:t.id}));return Kt({htmlFor:a},r)})),go=Jn((e=>Zn("label",vo(e)))),wo=er((e=>{var t=e,{store:n}=t,r=Ut(t,["store"]);const o=oo();return n=n||o,Gt(Kt({},r),{ref:Bn(null==n?void 0:n.setAnchorElement,r.ref)})}));Xn((e=>Zn("div",wo(e))));var bo=(0,r.createContext)(!0),yo=kn(),xo=["text","search","url","tel","email","password","number","date","month","week","time","datetime","datetime-local"];function Eo(e){return!("input"!==e.tagName.toLowerCase()||!e.type||"radio"!==e.type&&"checkbox"!==e.type)}function Co(e,t,n,r,o){return e?t?n&&!r?-1:void 0:n?o:o||0:o}function _o(e,t){return Rn((n=>{null==e||e(n),n.defaultPrevented||t&&(n.stopPropagation(),n.preventDefault())}))}var So=!0;function Io(e){const t=e.target;t&&"hasAttribute"in t&&(t.hasAttribute("data-focus-visible")||(So=!1))}function ko(e){e.metaKey||e.ctrlKey||e.altKey||(So=!0)}var jo=er((e=>{var t=e,{focusable:n=!0,accessibleWhenDisabled:o,autoFocus:a,onFocusVisible:i}=t,s=Ut(t,["focusable","accessibleWhenDisabled","autoFocus","onFocusVisible"]);const l=(0,r.useRef)(null);(0,r.useEffect)((()=>{n&&(On("mousedown",Io,!0),On("keydown",ko,!0))}),[n]),yo&&(0,r.useEffect)((()=>{if(!n)return;const e=l.current;if(!e)return;if(!Eo(e))return;const t=function(e){return"labels"in e?e.labels:null}(e);if(!t)return;const r=()=>queueMicrotask((()=>e.focus()));return t.forEach((e=>e.addEventListener("mouseup",r))),()=>{t.forEach((e=>e.removeEventListener("mouseup",r)))}}),[n]);const c=n&&un(s),u=!!c&&!o,[d,m]=(0,r.useState)(!1);(0,r.useEffect)((()=>{n&&u&&d&&m(!1)}),[n,u,d]),(0,r.useEffect)((()=>{if(!n)return;if(!d)return;const e=l.current;if(!e)return;if("undefined"==typeof IntersectionObserver)return;const t=new IntersectionObserver((()=>{vr(e)||m(!1)}));return t.observe(e),()=>t.disconnect()}),[n,d]);const p=_o(s.onKeyPressCapture,c),f=_o(s.onMouseDownCapture,c),h=_o(s.onClickCapture,c),v=s.onMouseDown,g=Rn((e=>{if(null==v||v(e),e.defaultPrevented)return;if(!n)return;const t=e.currentTarget;if(!yo)return;if(jn(e))return;if(!gn(t)&&!Eo(t))return;let r=!1;const o=()=>{r=!0};t.addEventListener("focusin",o,{capture:!0,once:!0}),Pn(t,"mouseup",(()=>{t.removeEventListener("focusin",o,!0),r||function(e){!wr(e)&&vr(e)&&e.focus()}(t)}))})),w=(e,t)=>{if(t&&(e.currentTarget=t),!n)return;const r=e.currentTarget;r&&gr(r)&&(null==i||i(e),e.defaultPrevented||m(!0))},b=s.onKeyDownCapture,y=Rn((e=>{if(null==b||b(e),e.defaultPrevented)return;if(!n)return;if(d)return;if(e.metaKey)return;if(e.altKey)return;if(e.ctrlKey)return;if(!Dn(e))return;const t=e.currentTarget;queueMicrotask((()=>w(e,t)))})),x=s.onFocusCapture,E=Rn((e=>{if(null==x||x(e),e.defaultPrevented)return;if(!n)return;if(!Dn(e))return void m(!1);const t=e.currentTarget,r=()=>w(e,t);So||function(e){const{tagName:t,readOnly:n,type:r}=e;return"TEXTAREA"===t&&!n||"SELECT"===t&&!n||("INPUT"!==t||n?!!e.isContentEditable:xo.includes(r))}(e.target)?queueMicrotask(r):function(e){return"combobox"===e.getAttribute("role")&&!!e.dataset.name}(e.target)?Pn(e.target,"focusout",r):m(!1)})),C=s.onBlur,_=Rn((e=>{null==C||C(e),n&&Mn(e)&&m(!1)})),S=(0,r.useContext)(bo),I=Rn((e=>{n&&a&&e&&S&&queueMicrotask((()=>{gr(e)||vr(e)&&e.focus()}))})),k=Hn(l,s.as),j=n&&function(e){return!e||"button"===e||"input"===e||"select"===e||"textarea"===e||"a"===e}(k),D=n&&function(e){return!e||"button"===e||"input"===e||"select"===e||"textarea"===e}(k),T=u?Kt({pointerEvents:"none"},s.style):s.style;return Gt(Kt({"data-focus-visible":n&&d?"":void 0,"data-autofocus":!!a||void 0,"aria-disabled":!!c||void 0},s),{ref:Bn(l,I,s.ref),style:T,tabIndex:Co(n,u,j,D,s.tabIndex),disabled:!(!D||!u)||void 0,contentEditable:c?void 0:s.contentEditable,onKeyPressCapture:p,onClickCapture:h,onMouseDownCapture:f,onMouseDown:g,onKeyDownCapture:y,onFocusCapture:E,onBlur:_})}));function Do(e,t,n){return Rn((r=>{var o;if(null==t||t(r),r.defaultPrevented)return;if(r.isPropagationStopped())return;if(!Dn(r))return;if(function(e){return"Shift"===e.key||"Control"===e.key||"Alt"===e.key||"Meta"===e.key}(r))return;if(function(e){const t=e.target;return!(t&&!yn(t)||1!==e.key.length||e.ctrlKey||e.metaKey)}(r))return;const a=e.getState(),i=null==(o=Ot(e,a.activeId))?void 0:o.element;if(!i)return;const s=r,{view:l}=s,c=Ut(s,["view"]);i!==(null==n?void 0:n.current)&&i.focus(),function(e,t,n){const r=new KeyboardEvent(t,n);return e.dispatchEvent(r)}(i,r.type,c)||r.preventDefault(),r.currentTarget.contains(i)&&r.stopPropagation()}))}Xn((e=>Zn("div",e=jo(e))));var To=er((e=>{var t=e,{store:n,composite:o=!0,focusOnMove:a=o,moveOnKeyPress:i=!0}=t,s=Ut(t,["store","composite","focusOnMove","moveOnKeyPress"]);const l=ir();cn(n=n||l,!1);const c=(0,r.useRef)(null),u=function(e){const[t,n]=(0,r.useState)(!1),o=(0,r.useCallback)((()=>n(!0)),[]),a=e.useState((t=>Ot(e,t.activeId)));return(0,r.useEffect)((()=>{const e=null==a?void 0:a.element;t&&e&&(n(!1),e.focus({preventScroll:!0}))}),[a,t]),o}(n),d=n.useState("moves");(0,r.useEffect)((()=>{var e;if(!n)return;if(!d)return;if(!o)return;if(!a)return;const{activeId:t}=n.getState(),r=null==(e=Ot(n,t))?void 0:e.element;var i;r&&("scrollIntoView"in(i=r)?(i.focus({preventScroll:!0}),i.scrollIntoView(en({block:"nearest",inline:"nearest"},undefined))):i.focus())}),[n,d,o,a]),Ln((()=>{if(!n)return;if(!d)return;if(!o)return;const{baseElement:e,activeId:t}=n.getState();if(null!==t)return;if(!e)return;const r=c.current;c.current=null,r&&Tn(r,{relatedTarget:e}),gr(e)||e.focus()}),[n,d,o]);const m=n.useState("activeId"),p=n.useState("virtualFocus");Ln((()=>{var e;if(!n)return;if(!o)return;if(!p)return;const t=c.current;if(c.current=null,!t)return;const r=(null==(e=Ot(n,m))?void 0:e.element)||hn(t);r!==t&&Tn(t,{relatedTarget:r})}),[n,m,p,o]);const f=Do(n,s.onKeyDownCapture,c),h=Do(n,s.onKeyUpCapture,c),v=s.onFocusCapture,g=Rn((e=>{if(null==v||v(e),e.defaultPrevented)return;if(!n)return;const{virtualFocus:t}=n.getState();if(!t)return;const r=e.relatedTarget,o=function(e){const t=e[Vt];return delete e[Vt],t}(e.currentTarget);Dn(e)&&o&&(e.stopPropagation(),c.current=r)})),w=s.onFocus,b=Rn((e=>{if(null==w||w(e),e.defaultPrevented)return;if(!o)return;if(!n)return;const{relatedTarget:t}=e,{virtualFocus:r}=n.getState();r?Dn(e)&&!Nt(n,t)&&queueMicrotask(u):Dn(e)&&n.setActiveId(null)})),y=s.onBlurCapture,x=Rn((e=>{var t;if(null==y||y(e),e.defaultPrevented)return;if(!n)return;const{virtualFocus:r,activeId:o}=n.getState();if(!r)return;const a=null==(t=Ot(n,o))?void 0:t.element,i=e.relatedTarget,s=Nt(n,i),l=c.current;c.current=null,Dn(e)&&s?(i===a?l&&l!==i&&Tn(l,e):a?Tn(a,e):l&&Tn(l,e),e.stopPropagation()):!Nt(n,e.target)&&a&&Tn(a,e)})),E=s.onKeyDown,C=Kn(i),_=Rn((e=>{var t;if(null==E||E(e),e.defaultPrevented)return;if(!n)return;if(!Dn(e))return;const{orientation:r,items:o,renderedItems:a,activeId:i}=n.getState(),s=Ot(n,i);if(null==(t=null==s?void 0:s.element)?void 0:t.isConnected)return;const l="horizontal"!==r,c="vertical"!==r,u=function(e){return e.some((e=>!!e.rowId))}(a);if(("ArrowLeft"===e.key||"ArrowRight"===e.key||"Home"===e.key||"End"===e.key)&&yn(e.currentTarget))return;const d={ArrowUp:(u||l)&&(()=>{if(u){const e=o&&function(e){return function(e,t){return e.find((e=>!e.disabled))}(Br(zr(function(e){const t=[];for(const n of e){const e=t.find((e=>{var t;return(null==(t=e[0])?void 0:t.rowId)===n.rowId}));e?e.push(n):t.push([n])}return t}(e))))}(o);return null==e?void 0:e.id}return null==n?void 0:n.last()}),ArrowRight:(u||c)&&n.first,ArrowDown:(u||l)&&n.first,ArrowLeft:(u||c)&&n.last,Home:n.first,End:n.last,PageUp:n.first,PageDown:n.last},m=d[e.key];if(m){const t=m();if(void 0!==t){if(!C(e))return;e.preventDefault(),n.move(t)}}}));s=Gn(s,(e=>(0,ee.jsx)(sr,{value:n,children:e})),[n]);const S=n.useState((e=>{var t;if(n&&o&&e.virtualFocus)return null==(t=Ot(n,e.activeId))?void 0:t.id}));s=Gt(Kt({"aria-activedescendant":S},s),{ref:Bn(o?n.setBaseElement:null,s.ref),onKeyDownCapture:f,onKeyUpCapture:h,onFocusCapture:g,onFocus:b,onBlurCapture:x,onKeyDown:_});const I=n.useState((e=>o&&(e.virtualFocus||null===e.activeId)));return jo(Kt({focusable:I},s))}));Xn((e=>Zn("div",To(e))));const Ao=window.ReactDOM;function Mo(e,t,n){if(!n)return!1;const r=e.find((e=>!e.disabled&&e.value));return(null==r?void 0:r.value)===t}function Po(e,t){return!!t&&null!=e&&(e=sn(e),t.length>e.length&&0===t.toLowerCase().indexOf(e.toLowerCase()))}var Oo=er((e=>{var t=e,{store:n,focusable:o=!0,autoSelect:a=!1,getAutoSelectId:i,showOnChange:s=!0,setValueOnChange:l=!0,showOnMouseDown:c=!0,setValueOnClick:u=!0,showOnKeyDown:d=!0,moveOnKeyPress:m=!0,autoComplete:p="list"}=t,f=Ut(t,["store","focusable","autoSelect","getAutoSelectId","showOnChange","setValueOnChange","showOnMouseDown","setValueOnClick","showOnKeyDown","moveOnKeyPress","autoComplete"]);const h=co();cn(n=n||h,!1);const v=(0,r.useRef)(null),[g,w]=(0,r.useReducer)((()=>[]),[]),b=(0,r.useRef)(!1),y=(0,r.useRef)(!1),x=n.useState((e=>!!a&&e.virtualFocus)),E="inline"===p||"both"===p,[C,_]=(0,r.useState)(E);!function(e,t){const n=(0,r.useRef)(!1);Ln((()=>{n.current?E&&_(!0):n.current=!0}),t),Ln((()=>()=>{n.current=!1}),[])}(0,[E]);const S=n.useState("value"),I=n.useState((e=>E&&C?e.activeValue:void 0)),k=n.useState("renderedItems"),j=n.useState("open"),D=n.useState("contentElement"),T=(0,r.useMemo)((()=>{if(!E)return S;if(!C)return S;if(Mo(k,I,x)){if(Po(S,I)){const e=(null==I?void 0:I.slice(S.length))||"";return S+e}return S}return I||S}),[E,C,k,I,x,S]);(0,r.useEffect)((()=>{const e=v.current;if(!e)return;const t=()=>_(!0);return e.addEventListener("combobox-item-move",t),()=>{e.removeEventListener("combobox-item-move",t)}}),[]),(0,r.useEffect)((()=>{E&&C&&I&&Mo(k,I,x)&&Po(S,I)&&queueMicrotask((()=>{const e=v.current;e&&Sn(e,S.length,I.length)}))}),[g,E,C,I,k,x,S]);const A=(0,r.useRef)(null),M=Rn(i),P=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(!j)return;if(!D)return;const e=Cn(D);if(!e)return;A.current=e;const t=()=>{b.current=!1},r=()=>{if(!n)return;if(!b.current)return;const{activeId:e}=n.getState();null!==e&&e!==P.current&&(b.current=!1)},o={passive:!0,capture:!0};return e.addEventListener("wheel",t,o),e.addEventListener("scroll",r,o),()=>{e.removeEventListener("wheel",t,!0),e.removeEventListener("scroll",r,!0)}}),[j,D,n]),Ln((()=>{S&&(y.current||(b.current=!0))}),[S]),Ln((()=>{j||(b.current=!1)}),[j]);const O=n.useState("resetValueOnSelect");Wn((()=>{var e;const t=b.current;if(!n)return;if(!(x&&t||O))return;const{baseElement:r,contentElement:o,activeId:a}=n.getState();if(!r||gr(r)){if(null==o?void 0:o.hasAttribute("data-placing")){const e=new MutationObserver(w);return e.observe(o,{attributeFilter:["data-placing"]}),()=>e.disconnect()}if(x&&t){const e=M(k),t=void 0!==e?e:n.first();P.current=t,n.move(null!=t?t:null)}else{const t=null==(e=n.item(a))?void 0:e.element;t&&"scrollIntoView"in t&&t.scrollIntoView({block:"nearest",inline:"nearest"})}}}),[n,g,S,x,O,M,k]),(0,r.useEffect)((()=>{if(!E)return;const e=v.current;if(!e)return;const t=[e,D].filter((e=>!!e)),r=e=>{t.every((t=>Mn(e,t)))&&(null==n||n.setValue(T))};return t.forEach((e=>e.addEventListener("focusout",r))),()=>{t.forEach((e=>e.removeEventListener("focusout",r)))}}),[E,D,n,T]);const V=f.onChange,N=Kn(s),F=Kn(l),L=Rn((e=>{if(null==V||V(e),e.defaultPrevented)return;if(!n)return;const{value:t,selectionStart:r,selectionEnd:o}=e.target,a=e.nativeEvent;if(b.current=!0,function(e){return"input"===e.type}(a)&&(a.isComposing&&(b.current=!1,y.current=!0),E)){const e="insertText"===a.inputType||"insertCompositionText"===a.inputType,n=r===t.length;_(e&&n)}if(F(e)){const a=t===n.getState().value;(0,Ao.flushSync)((()=>null==n?void 0:n.setValue(t))),Sn(e.currentTarget,r,o),E&&x&&a&&w()}N(e)&&n.show(),x&&b.current||n.setActiveId(null)})),R=f.onCompositionEnd,B=Rn((e=>{b.current=!0,y.current=!1,null==R||R(e),e.defaultPrevented||x&&w()})),z=f.onMouseDown,H=Kn(u),W=Kn(c),K=Rn((e=>{null==z||z(e),e.defaultPrevented||e.button||e.ctrlKey||n&&(n.setActiveId(null),H(e)&&n.setValue(T),W(e)&&Pn(e.currentTarget,"mouseup",n.show))})),G=f.onKeyDown,U=Kn(d),q=Rn((e=>{if(null==G||G(e),e.repeat||(b.current=!1),e.defaultPrevented)return;if(e.ctrlKey)return;if(e.altKey)return;if(e.shiftKey)return;if(e.metaKey)return;if(!n)return;const{open:t,activeId:r}=n.getState();t||null===r&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key||U(e)&&(e.preventDefault(),n.show()))})),Y=f.onBlur,$=Rn((e=>{b.current=!1,null==Y||Y(e),e.defaultPrevented})),Q=zn(f.id),X=function(e){return"inline"===e||"list"===e||"both"===e||"none"===e}(p)?p:void 0,J=n.useState((e=>null===e.activeId));return f=Gt(Kt({id:Q,role:"combobox","aria-autocomplete":X,"aria-haspopup":xn(D,"listbox"),"aria-expanded":j,"aria-controls":null==D?void 0:D.id,"data-active-item":J||void 0,value:T},f),{ref:Bn(v,f.ref),onChange:L,onCompositionEnd:B,onMouseDown:K,onKeyDown:q,onBlur:$}),f=To(Gt(Kt({store:n,focusable:o},f),{moveOnKeyPress:e=>!function(e,...t){const n="function"==typeof e?e(...t):e;return null!=n&&!n}(m,e)&&(E&&_(!0),!0)})),f=wo(Kt({store:n},f)),Kt({autoComplete:"off"},f)})),Vo=Xn((e=>Zn("input",Oo(e))));function No(e,t){const n=setTimeout(t,e);return()=>clearTimeout(n)}function Fo(...e){return e.join(", ").split(", ").reduce(((e,t)=>{const n=1e3*parseFloat(t||"0s");return n>e?n:e}),0)}function Lo(e,t,n){return!(n||!1===t||e&&!t)}var Ro=er((e=>{var t=e,{store:n,alwaysVisible:o}=t,a=Ut(t,["store","alwaysVisible"]);const i=Zr();cn(n=n||i,!1);const s=zn(a.id),[l,c]=(0,r.useState)(null),u=n.useState("open"),d=n.useState("mounted"),m=n.useState("animated"),p=n.useState("contentElement");Ln((()=>{if(m){if(null==p?void 0:p.isConnected)return function(e){let t=requestAnimationFrame((()=>{t=requestAnimationFrame(e)}));return()=>cancelAnimationFrame(t)}((()=>{c(u?"enter":"leave")}));c(null)}}),[m,p,u]),Ln((()=>{if(!n)return;if(!m)return;if(!p)return;if(!l)return;if("enter"===l&&!u)return;if("leave"===l&&u)return;if("number"==typeof m)return No(m,n.stopAnimation);const{transitionDuration:e,animationDuration:t,transitionDelay:r,animationDelay:o}=getComputedStyle(p),a=Fo(r,o)+Fo(e,t);return a?No(a,n.stopAnimation):void 0}),[n,m,p,u,l]);const f=Lo(d,(a=Gn(a,(e=>(0,ee.jsx)(no,{value:n,children:e})),[n])).hidden,o),h=f?Gt(Kt({},a.style),{display:"none"}):a.style;return Gt(Kt({id:s,"data-enter":"enter"===l?"":void 0,"data-leave":"leave"===l?"":void 0,hidden:f},a),{ref:Bn(s?n.setContentElement:null,a.ref),style:h})})),Bo=Xn((e=>Zn("div",Ro(e))));Xn((e=>{var t=e,{unmountOnHide:n}=t,r=Ut(t,["unmountOnHide"]);const o=Zr();return!1===Vr(r.store||o,(e=>!n||(null==e?void 0:e.mounted)))?null:(0,ee.jsx)(Bo,Kt({},r))}));var zo=er((e=>{var t=e,{store:n,focusable:o=!0,alwaysVisible:a}=t,i=Ut(t,["store","focusable","alwaysVisible"]);const s=co();cn(n=n||s,!1);const l=(0,r.useRef)(null),c=zn(i.id),u=i.onKeyDown,d=Rn((e=>{null==u||u(e),e.defaultPrevented||"Escape"===e.key&&(null==n||n.move(null))})),m=(0,r.useRef)(!1),p=i.onFocusVisible,f=Rn((e=>{if(null==p||p(e),e.defaultPrevented)return;if("focus"!==e.type)return;if(!n)return;const{virtualFocus:t}=n.getState();if(!t)return;const{relatedTarget:r,currentTarget:o}=e;r&&o.contains(r)||(m.current=!0,n.setState("virtualFocus",!1))})),h=i.onBlur,v=Rn((e=>{null==h||h(e),e.defaultPrevented||m.current&&Mn(e)&&(m.current=!1,null==n||n.setState("virtualFocus",!0))}));i=Gn(i,(e=>(0,ee.jsx)(mo,{value:n,children:e})),[n]);const g=Lo(n.useState("mounted"),i.hidden,a),w=g?Gt(Kt({},i.style),{display:"none"}):i.style,b=n.useState((e=>Array.isArray(e.selectedValue))),y=function(e,t,n){const[o,a]=(0,r.useState)(n);return Ln((()=>{const n=e&&"current"in e?e.current:e,r=null==n?void 0:n.getAttribute(t);null!=r&&a(r)}),[e,t]),o}(l,"role",i.role);return i=Gt(Kt({id:c,hidden:g,role:"listbox",tabIndex:o?-1:void 0,"aria-multiselectable":("listbox"===y||"tree"===y||"grid"===y)&&b||void 0},i),{ref:Bn(c?n.setContentElement:null,l,i.ref),style:w,onKeyDown:d,onFocusVisible:f,onBlur:v}),jo(Kt({focusable:o},i))})),Ho=Xn((e=>Zn("div",zo(e))));function Wo(e){if(!e.isTrusted)return!1;const t=e.currentTarget;return"Enter"===e.key?gn(t)||"SUMMARY"===t.tagName||"A"===t.tagName:" "===e.key&&(gn(t)||"SUMMARY"===t.tagName||"INPUT"===t.tagName||"SELECT"===t.tagName)}var Ko=Symbol("command"),Go=er((e=>{var t=e,{clickOnEnter:n=!0,clickOnSpace:o=!0}=t,a=Ut(t,["clickOnEnter","clickOnSpace"]);const i=(0,r.useRef)(null),s=Hn(i,a.as),l=a.type,[c,u]=(0,r.useState)((()=>!!s&&gn({tagName:s,type:l})));(0,r.useEffect)((()=>{i.current&&u(gn(i.current))}),[]);const[d,m]=(0,r.useState)(!1),p=(0,r.useRef)(!1),f=un(a),[h,v]=function(e,t,n){const o=e.onLoadedMetadataCapture,a=(0,r.useMemo)((()=>Object.assign((()=>{}),Gt(Kt({},o),{[t]:n}))),[o,t,n]);return[null==o?void 0:o[t],{onLoadedMetadataCapture:a}]}(a,Ko,!0),g=a.onKeyDown,w=Rn((e=>{null==g||g(e);const t=e.currentTarget;if(e.defaultPrevented)return;if(h)return;if(f)return;if(!Dn(e))return;if(yn(t))return;if(t.isContentEditable)return;const r=n&&"Enter"===e.key,a=o&&" "===e.key,i="Enter"===e.key&&!n,s=" "===e.key&&!o;if(i||s)e.preventDefault();else if(r||a){const n=Wo(e);if(r){if(!n){e.preventDefault();const n=e,{view:r}=n,o=Ut(n,["view"]),a=()=>An(t,o);pn&&/firefox\//i.test(navigator.userAgent)?Pn(t,"keyup",a):queueMicrotask(a)}}else a&&(p.current=!0,n||(e.preventDefault(),m(!0)))}})),b=a.onKeyUp,y=Rn((e=>{if(null==b||b(e),e.defaultPrevented)return;if(h)return;if(f)return;if(e.metaKey)return;const t=o&&" "===e.key;if(p.current&&t&&(p.current=!1,!Wo(e))){e.preventDefault(),m(!1);const t=e.currentTarget,n=e,{view:r}=n,o=Ut(n,["view"]);queueMicrotask((()=>An(t,o)))}}));return a=Gt(Kt(Kt({"data-active":d?"":void 0,type:c?"button":void 0},v),a),{ref:Bn(i,a.ref),onKeyDown:w,onKeyUp:y}),jo(a)}));Xn((e=>Zn("button",e=Go(e))));var Uo=er((e=>{var t=e,{store:n,shouldRegisterItem:o=!0,getItem:a=ln,element:i}=t,s=Ut(t,["store","shouldRegisterItem","getItem","element"]);const l=rr();n=n||l;const c=zn(s.id),u=(0,r.useRef)(i);return(0,r.useEffect)((()=>{const e=u.current;if(!c)return;if(!e)return;if(!o)return;const t=a({id:c,element:e});return null==n?void 0:n.renderItem(t)}),[c,o,a,n]),Gt(Kt({},s),{ref:Bn(u,s.ref)})}));function qo(e,t=!1){const{top:n}=e.getBoundingClientRect();return t?n+e.clientHeight:n}function Yo(e,t,n,r=!1){var o;if(!t)return;if(!n)return;const{renderedItems:a}=t.getState(),i=Cn(e);if(!i)return;const s=function(e,t=!1){const n=e.clientHeight,{top:r}=e.getBoundingClientRect(),o=1.5*Math.max(.875*n,n-40),a=t?n-o+r:o+r;return"HTML"===e.tagName?a+e.scrollTop:a}(i,r);let l,c;for(let e=0;e<a.length;e+=1){const a=l;if(l=n(e),!l)break;if(l===a)continue;const i=null==(o=Ot(t,l))?void 0:o.element;if(!i)continue;const u=qo(i,r)-s,d=Math.abs(u);if(r&&u<=0||!r&&u>=0){void 0!==c&&c<d&&(l=a);break}c=d}return l}Xn((e=>Zn("div",Uo(e))));var $o=er((e=>{var t=e,{store:n,rowId:o,preventScrollOnKeyDown:a=!1,moveOnKeyPress:i=!0,tabbable:s=!1,getItem:l,"aria-setsize":c,"aria-posinset":u}=t,d=Ut(t,["store","rowId","preventScrollOnKeyDown","moveOnKeyPress","tabbable","getItem","aria-setsize","aria-posinset"]);const m=ar();n=n||m;const p=zn(d.id),f=(0,r.useRef)(null),h=(0,r.useContext)(ur),v=Vr(n,(e=>o||(e&&(null==h?void 0:h.baseElement)&&h.baseElement===e.baseElement?h.id:void 0))),g=un(d)&&!d.accessibleWhenDisabled,w=(0,r.useCallback)((e=>{const t=Gt(Kt({},e),{id:p||e.id,rowId:v,disabled:!!g});return l?l(t):t}),[p,v,g,l]),b=d.onFocus,y=(0,r.useRef)(!1),x=Rn((e=>{if(null==b||b(e),e.defaultPrevented)return;if(jn(e))return;if(!p)return;if(!n)return;const{activeId:t,virtualFocus:r,baseElement:o}=n.getState();var a;(function(e,t){return!Dn(e)&&Nt(t,e.target)})(e,n)||(t!==p&&n.setActiveId(p),r&&Dn(e)&&((a=e.currentTarget).isContentEditable||yn(a)||"INPUT"===a.tagName&&!gn(a)||(null==o?void 0:o.isConnected)&&(y.current=!0,e.relatedTarget===o||Nt(n,e.relatedTarget)?function(e){e[Vt]=!0,e.focus({preventScroll:!0})}(o):o.focus())))})),E=d.onBlurCapture,C=Rn((e=>{if(null==E||E(e),e.defaultPrevented)return;const t=null==n?void 0:n.getState();(null==t?void 0:t.virtualFocus)&&y.current&&(y.current=!1,e.preventDefault(),e.stopPropagation())})),_=d.onKeyDown,S=Kn(a),I=Kn(i),k=Rn((e=>{if(null==_||_(e),e.defaultPrevented)return;if(!Dn(e))return;if(!n)return;const{currentTarget:t}=e,r=n.getState(),o=n.item(p),a=!!(null==o?void 0:o.rowId),i="horizontal"!==r.orientation,s="vertical"!==r.orientation,l=()=>!(!a&&!s&&r.baseElement&&yn(r.baseElement)),c={ArrowUp:(a||i)&&n.up,ArrowRight:(a||s)&&n.next,ArrowDown:(a||i)&&n.down,ArrowLeft:(a||s)&&n.previous,Home:()=>{if(l())return!a||e.ctrlKey?null==n?void 0:n.first():null==n?void 0:n.previous(-1)},End:()=>{if(l())return!a||e.ctrlKey?null==n?void 0:n.last():null==n?void 0:n.next(-1)},PageUp:()=>Yo(t,n,null==n?void 0:n.up,!0),PageDown:()=>Yo(t,n,null==n?void 0:n.down)}[e.key];if(c){const t=c();if(S(e)||void 0!==t){if(!I(e))return;e.preventDefault(),n.move(t)}}})),j=Vr(n,(e=>(null==e?void 0:e.baseElement)||void 0)),D=(0,r.useMemo)((()=>({id:p,baseElement:j})),[p,j]);d=Gn(d,(e=>(0,ee.jsx)(cr.Provider,{value:D,children:e})),[D]);const T=Vr(n,(e=>!!e&&e.activeId===p)),A=Vr(n,"virtualFocus"),M=function(e,t){const n=t.role,[o,a]=(0,r.useState)(n);return Ln((()=>{const t=e.current;t&&a(t.getAttribute("role")||n)}),[n]),o}(f,d);let P;T&&(function(e){return"option"===e||"treeitem"===e}(M)||A&&function(e){return"option"===e||"tab"===e||"treeitem"===e||"gridcell"===e||"row"===e||"columnheader"===e||"rowheader"===e}(M))&&(P=!0);const O=Vr(n,(e=>null!=c?c:e&&(null==h?void 0:h.ariaSetSize)&&h.baseElement===e.baseElement?h.ariaSetSize:void 0)),V=Vr(n,(e=>{if(null!=u)return u;if(!e)return;if(!(null==h?void 0:h.ariaPosInSet))return;if(h.baseElement!==e.baseElement)return;const t=e.renderedItems.filter((e=>e.rowId===v));return h.ariaPosInSet+t.findIndex((e=>e.id===p))})),N=Vr(n,(e=>!(null==e?void 0:e.renderedItems.length)||!e.virtualFocus&&(!!s||e.activeId===p)));return d=Gt(Kt({id:p,"aria-selected":P,"data-active-item":T?"":void 0},d),{ref:Bn(f,d.ref),tabIndex:N?d.tabIndex:-1,onFocus:x,onBlurCapture:C,onKeyDown:k}),d=Go(d),d=Uo(Gt(Kt({store:n},d),{getItem:w,shouldRegisterItem:!!p&&d.shouldRegisterItem})),Gt(Kt({},d),{"aria-setsize":O,"aria-posinset":V})}));Jn((e=>Zn("button",$o(e))));var Qo=er((e=>{var t=e,{store:n,value:o,hideOnClick:a,selectValueOnClick:i=!0,setValueOnClick:s,focusOnHover:l=!1,moveOnKeyPress:c=!0,getItem:u}=t,d=Ut(t,["store","value","hideOnClick","selectValueOnClick","setValueOnClick","focusOnHover","moveOnKeyPress","getItem"]);const m=lo();cn(n=n||m,!1);const p=(0,r.useCallback)((e=>{const t=Gt(Kt({},e),{value:o});return u?u(t):t}),[o,u]),f=n.useState((e=>Array.isArray(e.selectedValue)));s=null!=s?s:!f,a=null!=a?a:null!=o&&!f;const h=d.onClick,v=Kn(s),g=Kn(i),w=Kn(a),b=Rn((e=>{null==h||h(e),e.defaultPrevented||function(e){const t=e.currentTarget;if(!t)return!1;const n=t.tagName.toLowerCase();return!!e.altKey&&("a"===n||"button"===n&&"submit"===t.type||"input"===n&&"submit"===t.type)}(e)||function(e){const t=e.currentTarget;if(!t)return!1;const n=In();if(n&&!e.metaKey)return!1;if(!n&&!e.ctrlKey)return!1;const r=t.tagName.toLowerCase();return"a"===r||"button"===r&&"submit"===t.type||"input"===r&&"submit"===t.type}(e)||(null!=o&&(g(e)&&(null==n||n.setSelectedValue((e=>Array.isArray(e)?e.includes(o)?e.filter((e=>e!==o)):[...e,o]:o))),v(e)&&(null==n||n.setValue(o))),w(e)&&(null==n||n.move(null),null==n||n.hide()))})),y=d.onKeyDown,x=Rn((e=>{if(null==y||y(e),e.defaultPrevented)return;const t=null==n?void 0:n.getState().baseElement;t&&(gr(t)||(1===e.key.length||"Backspace"===e.key||"Delete"===e.key)&&(queueMicrotask((()=>t.focus())),yn(t)&&(null==n||n.setValue(t.value))))})),E=n.useState((e=>function(e,t){if(null!=t)return null!=e&&(Array.isArray(e)?e.includes(t):e===t)}(e.selectedValue,o)));f&&null!=E&&(d=Kt({"aria-selected":E},d)),d=Gn(d,(e=>(0,ee.jsx)(po.Provider,{value:o,children:(0,ee.jsx)(fo.Provider,{value:null!=E&&E,children:e})})),[o,E]);const C=n.useState("contentElement");d=Gt(Kt({role:En(C),children:o},d),{onClick:b,onKeyDown:x});const _=Kn(c);return d=$o(Gt(Kt({store:n},d),{getItem:p,moveOnKeyPress:e=>{if(!_(e))return!1;const t=new Event("combobox-item-move"),r=null==n?void 0:n.getState().baseElement;return null==r||r.dispatchEvent(t),!0}})),xr(Kt({store:n,focusOnHover:l},d))})),Xo=Jn((e=>Zn("div",Qo(e))));function Jo(e){return sn(e).toLowerCase()}var Zo=er((e=>{var t=e,{store:n,value:o}=t,a=Ut(t,["store","value"]);const i=lo();n=n||i;const s=(0,r.useContext)(po),l=null!=o?o:s;cn(n,!1);const c=n.useState((e=>l&&e.value?e.value:void 0)),u=(0,r.useMemo)((()=>l&&c?function(e,t){t=Jo(t);let n=Jo(e).indexOf(t);const r=[];for(;-1!==n;)0!==n&&r.push((0,ee.jsx)("span",{"data-autocomplete-value":"",children:e.substr(0,n)},r.length)),r.push((0,ee.jsx)("span",{"data-user-value":"",children:e.substr(n,t.length)},r.length)),n=Jo(e=e.substr(n+t.length)).indexOf(t);return e&&r.push((0,ee.jsx)("span",{"data-autocomplete-value":"",children:e},r.length)),r}(l,c):l),[l,c]);return Kt({children:u},a)})),ea=Xn((e=>Zn("span",Zo(e)))),ta=n(731),na=n.n(ta);const ra=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),oa=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})}),{CompositeV2:aa,CompositeItemV2:ia,useCompositeStoreV2:sa}=se(s.privateApis),la=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Circle,{cx:12,cy:12,r:3})});function ca(e=""){return na()(e.trim().toLowerCase())}const ua=[],da=(e,t)=>e.singleSelection?t?.value:Array.isArray(t?.value)?t.value:!Array.isArray(t?.value)&&t?.value?[t.value]:ua,ma=(e,t,n)=>e.singleSelection?n:Array.isArray(t?.value)?t.value.includes(n)?t.value.filter((e=>e!==n)):[...t.value,n]:[n];function pa({view:e,filter:t,onChangeView:n}){const r=sa({virtualFocus:!0,focusLoop:!0,defaultActiveId:1===t.operators?.length?void 0:null}),o=e.filters?.find((e=>e.field===t.field)),a=da(t,o);return(0,ee.jsx)(aa,{store:r,role:"listbox",className:"dataviews-search-widget-listbox","aria-label":(0,A.sprintf)(/* translators: List of items for a filter. 1: Filter name. e.g.: "List of: Author". */ /* translators: List of items for a filter. 1: Filter name. e.g.: "List of: Author". */
(0,A.__)("List of: %1$s"),t.name),onFocusVisible:()=>{r.getState().activeId||r.move(r.first())},render:(0,ee.jsx)(hr,{store:r}),children:t.elements.map((i=>(0,ee.jsxs)(Er,{store:r,render:(0,ee.jsx)(ia,{render:(0,ee.jsx)("div",{"aria-label":i.label,role:"option",className:"dataviews-search-widget-listitem"}),onClick:()=>{var r,a;const s=o?[...(null!==(r=e.filters)&&void 0!==r?r:[]).map((e=>e.field===t.field?{...e,operator:o.operator||t.operators[0],value:ma(t,o,i.value)}:e))]:[...null!==(a=e.filters)&&void 0!==a?a:[],{field:t.field,operator:t.operators[0],value:ma(t,o,i.value)}];n({...e,page:1,filters:s})}}),children:[(0,ee.jsxs)("span",{className:"dataviews-search-widget-listitem-check",children:[t.singleSelection&&a===i.value&&(0,ee.jsx)(s.Icon,{icon:la}),!t.singleSelection&&a.includes(i.value)&&(0,ee.jsx)(s.Icon,{icon:ra})]}),(0,ee.jsxs)("span",{children:[i.label,!!i.description&&(0,ee.jsx)("span",{className:"dataviews-search-widget-listitem-description",children:i.description})]})]},i.value)))})}function fa({view:e,filter:t,onChangeView:n}){const[r,o]=(0,i.useState)(""),a=(0,i.useDeferredValue)(r),l=e.filters?.find((e=>e.field===t.field)),c=da(t,l),u=(0,i.useMemo)((()=>{const e=ca(a);return t.elements.filter((t=>ca(t.label).includes(e)))}),[t.elements,a]);return(0,ee.jsxs)(ho,{resetValueOnSelect:!1,selectedValue:c,setSelectedValue:r=>{var o,a;const i=l?[...(null!==(o=e.filters)&&void 0!==o?o:[]).map((e=>e.field===t.field?{...e,operator:l.operator||t.operators[0],value:r}:e))]:[...null!==(a=e.filters)&&void 0!==a?a:[],{field:t.field,operator:t.operators[0],value:r}];n({...e,page:1,filters:i})},setValue:o,children:[(0,ee.jsxs)("div",{className:"dataviews-search-widget-filter-combobox__wrapper",children:[(0,ee.jsx)(go,{render:(0,ee.jsx)(s.VisuallyHidden,{children:(0,A.__)("Search items")}),children:(0,A.__)("Search items")}),(0,ee.jsx)(Vo,{autoSelect:"always",placeholder:(0,A.__)("Search"),className:"dataviews-search-widget-filter-combobox__input"}),(0,ee.jsx)("div",{className:"dataviews-search-widget-filter-combobox__icon",children:(0,ee.jsx)(s.Icon,{icon:oa})})]}),(0,ee.jsxs)(Ho,{className:"dataviews-search-widget-filter-combobox-list",alwaysVisible:!0,children:[u.map((e=>(0,ee.jsxs)(Xo,{value:e.value,className:"dataviews-search-widget-listitem",hideOnClick:!1,setValueOnClick:!1,focusOnHover:!0,children:[(0,ee.jsxs)("span",{className:"dataviews-search-widget-listitem-check",children:[t.singleSelection&&c===e.value&&(0,ee.jsx)(s.Icon,{icon:la}),!t.singleSelection&&c.includes(e.value)&&(0,ee.jsx)(s.Icon,{icon:ra})]}),(0,ee.jsxs)("span",{children:[(0,ee.jsx)(ea,{className:"dataviews-search-widget-filter-combobox-item-value",value:e.label}),!!e.description&&(0,ee.jsx)("span",{className:"dataviews-search-widget-listitem-description",children:e.description})]})]},e.value))),!u.length&&(0,ee.jsx)("p",{children:(0,A.__)("No results found")})]})]})}function ha(e){const t=e.filter.elements.length>10?fa:pa;return(0,ee.jsx)(t,{...e})}const va="Enter",ga=" ",wa=({activeElements:e,filterInView:t,filter:n})=>{if(void 0===e||0===e.length)return n.name;const r={Name:(0,ee.jsx)("span",{className:"dataviews-filter-summary__filter-text-name"}),Value:(0,ee.jsx)("span",{className:"dataviews-filter-summary__filter-text-value"})};return t?.operator===ue?(0,i.createInterpolateElement)((0,A.sprintf)(/* translators: 1: Filter name. 3: Filter value. e.g.: "Author is any: Admin, Editor". */ /* translators: 1: Filter name. 3: Filter value. e.g.: "Author is any: Admin, Editor". */
(0,A.__)("<Name>%1$s is any: </Name><Value>%2$s</Value>"),n.name,e.map((e=>e.label)).join(", ")),r):t?.operator===de?(0,i.createInterpolateElement)((0,A.sprintf)(/* translators: 1: Filter name. 3: Filter value. e.g.: "Author is none: Admin, Editor". */ /* translators: 1: Filter name. 3: Filter value. e.g.: "Author is none: Admin, Editor". */
(0,A.__)("<Name>%1$s is none: </Name><Value>%2$s</Value>"),n.name,e.map((e=>e.label)).join(", ")),r):t?.operator===me?(0,i.createInterpolateElement)((0,A.sprintf)(/* translators: 1: Filter name. 3: Filter value. e.g.: "Author is all: Admin, Editor". */ /* translators: 1: Filter name. 3: Filter value. e.g.: "Author is all: Admin, Editor". */
(0,A.__)("<Name>%1$s is all: </Name><Value>%2$s</Value>"),n.name,e.map((e=>e.label)).join(", ")),r):t?.operator===pe?(0,i.createInterpolateElement)((0,A.sprintf)(/* translators: 1: Filter name. 3: Filter value. e.g.: "Author is not all: Admin, Editor". */ /* translators: 1: Filter name. 3: Filter value. e.g.: "Author is not all: Admin, Editor". */
(0,A.__)("<Name>%1$s is not all: </Name><Value>%2$s</Value>"),n.name,e.map((e=>e.label)).join(", ")),r):t?.operator===le?(0,i.createInterpolateElement)((0,A.sprintf)(/* translators: 1: Filter name. 3: Filter value. e.g.: "Author is: Admin". */ /* translators: 1: Filter name. 3: Filter value. e.g.: "Author is: Admin". */
(0,A.__)("<Name>%1$s is: </Name><Value>%2$s</Value>"),n.name,e[0].label),r):t?.operator===ce?(0,i.createInterpolateElement)((0,A.sprintf)(/* translators: 1: Filter name. 3: Filter value. e.g.: "Author is not: Admin". */ /* translators: 1: Filter name. 3: Filter value. e.g.: "Author is not: Admin". */
(0,A.__)("<Name>%1$s is not: </Name><Value>%2$s</Value>"),n.name,e[0].label),r):(0,A.sprintf)(/* translators: 1: Filter name e.g.: "Unknown status for Author". */ /* translators: 1: Filter name e.g.: "Unknown status for Author". */
(0,A.__)("Unknown status for %1$s"),n.name)};function ba({filter:e,view:t,onChangeView:n}){const r=e.operators?.map((e=>({value:e,label:he[e]?.label}))),o=t.filters?.find((t=>t.field===e.field)),a=o?.operator||e.operators[0];return r.length>1&&(0,ee.jsxs)(s.__experimentalHStack,{spacing:2,justify:"flex-start",className:"dataviews-filter-summary__operators-container",children:[(0,ee.jsx)(s.FlexItem,{className:"dataviews-filter-summary__operators-filter-name",children:e.name}),(0,ee.jsx)(s.SelectControl,{label:(0,A.__)("Conditions"),value:a,options:r,onChange:r=>{var a,i;const s=r,l=o?[...(null!==(a=t.filters)&&void 0!==a?a:[]).map((t=>t.field===e.field?{...t,operator:s}:t))]:[...null!==(i=t.filters)&&void 0!==i?i:[],{field:e.field,operator:s,value:void 0}];n({...t,page:1,filters:l})},size:"small",__nextHasNoMarginBottom:!0,hideLabelFromVision:!0})]})}function ya({addFilterRef:e,openedFilter:t,...n}){const r=(0,i.useRef)(null),{filter:o,view:a,onChangeView:l}=n,c=a.filters?.find((e=>e.field===o.field)),u=o.elements.filter((e=>o.singleSelection?e.value===c?.value:c?.value?.includes(e.value))),d=o.isPrimary,m=void 0!==c?.value,p=!d||m;return(0,ee.jsx)(s.Dropdown,{defaultOpen:t===o.field,contentClassName:"dataviews-filter-summary__popover",popoverProps:{placement:"bottom-start",role:"dialog"},onClose:()=>{r.current?.focus()},renderToggle:({isOpen:t,onToggle:n})=>(0,ee.jsxs)("div",{className:"dataviews-filter-summary__chip-container",children:[(0,ee.jsx)(s.Tooltip,{text:(0,A.sprintf)(/* translators: 1: Filter name. */ /* translators: 1: Filter name. */
(0,A.__)("Filter by: %1$s"),o.name.toLowerCase()),placement:"top",children:(0,ee.jsx)("div",{className:ke("dataviews-filter-summary__chip",{"has-reset":p,"has-values":m}),role:"button",tabIndex:0,onClick:n,onKeyDown:e=>{[va,ga].includes(e.key)&&(n(),e.preventDefault())},"aria-pressed":t,"aria-expanded":t,ref:r,children:(0,ee.jsx)(wa,{activeElements:u,filterInView:c,filter:o})})}),p&&(0,ee.jsx)(s.Tooltip,{text:d?(0,A.__)("Reset"):(0,A.__)("Remove"),placement:"top",children:(0,ee.jsx)("button",{className:ke("dataviews-filter-summary__chip-remove",{"has-values":m}),onClick:()=>{l({...a,page:1,filters:a.filters?.filter((e=>e.field!==o.field))}),d?r.current?.focus():e.current?.focus()},children:(0,ee.jsx)(s.Icon,{icon:Mt})})})]}),renderContent:()=>(0,ee.jsxs)(s.__experimentalVStack,{spacing:0,justify:"flex-start",children:[(0,ee.jsx)(ba,{...n}),(0,ee.jsx)(ha,{...n})]})})}const{DropdownMenuV2:xa,DropdownMenuItemV2:Ea,DropdownMenuItemLabelV2:Ca}=se(s.privateApis),_a=(0,i.forwardRef)((function({filters:e,view:t,onChangeView:n,setOpenedFilter:r},o){if(!e.length||e.every((({isPrimary:e})=>e)))return null;const a=e.filter((e=>!e.isVisible));return(0,ee.jsx)(xa,{trigger:(0,ee.jsx)(s.Button,{accessibleWhenDisabled:!0,size:"compact",className:"dataviews-filters-button",variant:"tertiary",disabled:!a.length,ref:o,children:(0,A.__)("Add filter")}),children:a.map((e=>(0,ee.jsx)(Ea,{onClick:()=>{r(e.field),n({...t,page:1,filters:[...t.filters||[],{field:e.field,value:void 0,operator:e.operators[0]}]})},children:(0,ee.jsx)(Ca,{children:e.name})},e.field)))})}));function Sa({filters:e,view:t,onChangeView:n}){const r=!t.search&&!t.filters?.some((t=>{return void 0!==t.value||(n=t.field,!e.some((e=>e.field===n&&e.isPrimary)));var n}));return(0,ee.jsx)(s.Button,{disabled:r,accessibleWhenDisabled:!0,size:"compact",variant:"tertiary",className:"dataviews-filters__reset-button",onClick:()=>{n({...t,page:1,search:"",filters:[]})},children:(0,A.__)("Reset")})}const Ia=(0,i.memo)((function({fields:e,view:t,onChangeView:n,openedFilter:r,setOpenedFilter:o}){const a=(0,i.useRef)(null),l=[];e.forEach((e=>{if(!e.elements?.length)return;const n=Ke(e);if(0===n.length)return;const r=!!e.filterBy?.isPrimary;l.push({field:e.id,name:e.header,elements:e.elements,singleSelection:n.some((e=>[le,ce].includes(e))),operators:n,isVisible:r||!!t.filters?.some((t=>t.field===e.id&&fe.includes(t.operator))),isPrimary:r})})),l.sort(((e,t)=>e.isPrimary&&!t.isPrimary?-1:!e.isPrimary&&t.isPrimary?1:e.name.localeCompare(t.name)));const c=(0,ee.jsx)(_a,{filters:l,view:t,onChangeView:n,ref:a,setOpenedFilter:o},"add-filter"),u=[...l.map((e=>e.isVisible?(0,ee.jsx)(ya,{filter:e,view:t,onChangeView:n,addFilterRef:a,openedFilter:r},e.field):null)),c];return u.length>1&&u.push((0,ee.jsx)(Sa,{filters:l,view:t,onChangeView:n},"reset-filters")),(0,ee.jsx)(s.__experimentalHStack,{justify:"flex-start",style:{width:"fit-content"},wrap:!0,children:u})})),ka=Ia,ja=(0,i.memo)((function({label:e,view:t,onChangeView:n}){const[r,o,a]=(0,mt.useDebouncedInput)(t.search);(0,i.useEffect)((()=>{var e;o(null!==(e=t.search)&&void 0!==e?e:"")}),[t.search,o]);const l=(0,i.useRef)(n),c=(0,i.useRef)(t);(0,i.useEffect)((()=>{l.current=n,c.current=t}),[n,t]),(0,i.useEffect)((()=>{l.current({...c.current,page:1,search:a})}),[a]);const u=e||(0,A.__)("Search");return(0,ee.jsx)(s.SearchControl,{__nextHasNoMarginBottom:!0,onChange:o,value:r,label:u,placeholder:u,size:"compact"})})),Da={init:{bottom:-48},open:{bottom:24,transition:{bottom:{type:"tween",duration:.2,ease:[0,0,.2,1]}}},exit:{opacity:0,bottom:24,transition:{opacity:{type:"tween",duration:.2,ease:[0,0,.2,1]}}}};function Ta({action:e,onClick:t,isBusy:n,items:r}){const o="string"==typeof e.label?e.label:e.label(r);return(0,ee.jsx)(s.ToolbarButton,{disabled:n,label:o,icon:e.icon,isDestructive:e.isDestructive,size:"compact",onClick:t,isBusy:n,tooltipPosition:"top"})}const Aa=[];function Ma({action:e,selectedItems:t,actionInProgress:n,setActionInProgress:r}){const o=(0,l.useRegistry)(),a=(0,i.useMemo)((()=>t.filter((t=>!e.isEligible||e.isEligible(t)))),[e,t]);return"RenderModal"in e?(0,ee.jsx)(Be,{action:e,items:a,ActionTrigger:Ta},e.id):(0,ee.jsx)(Ta,{action:e,onClick:()=>{r(e.id),e.callback(t,{registry:o})},items:a,isBusy:n===e.id},e.id)}function Pa(e,t,n,r,o,a){return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(s.ToolbarGroup,{children:(0,ee.jsx)("div",{className:"dataviews-bulk-actions__selection-count",children:1===e.length?(0,A.__)("1 item selected"):(0,A.sprintf)(
// translators: %s: Total number of selected items.
// translators: %s: Total number of selected items.
(0,A._n)("%s item selected","%s items selected",e.length),e.length)})}),(0,ee.jsx)(s.ToolbarGroup,{children:t.map((e=>(0,ee.jsx)(Ma,{action:e,selectedItems:n,actionInProgress:r,setActionInProgress:o},e.id)))}),(0,ee.jsx)(s.ToolbarGroup,{children:(0,ee.jsx)(s.ToolbarButton,{icon:Mt,showTooltip:!0,tooltipPosition:"top",label:(0,A.__)("Cancel"),disabled:!!r,onClick:()=>{a(Aa)}})})]})}function Oa({selection:e,actionsToShow:t,selectedItems:n,onSelectionChange:r}){const[o,a]=(0,i.useState)(null),s=(0,i.useRef)(null);return o?(s.current||(s.current=Pa(e,t,n,o,a,r)),s.current):(s.current&&(s.current=null),Pa(e,t,n,o,a,r))}function Va({data:e,selection:t,actions:n=Aa,onSelectionChange:r,getItemId:o}){const a=(0,mt.useReducedMotion)(),l=(0,i.useMemo)((()=>e.filter((e=>t.includes(o(e))))),[t,e,o]),c=(0,i.useMemo)((()=>n.filter((e=>e.supportsBulk&&e.icon&&l.some((t=>!e.isEligible||e.isEligible(t)))))),[n,l]);return t&&0===t.length||0===c.length?null:(0,ee.jsx)(s.__unstableAnimatePresence,{children:(0,ee.jsx)(s.__unstableMotion.div,{layout:!a,initial:"init",animate:"open",exit:"exit",variants:a?void 0:Da,className:"dataviews-bulk-actions",children:(0,ee.jsx)(s.Toolbar,{label:(0,A.__)("Bulk actions"),children:(0,ee.jsx)("div",{className:"dataviews-bulk-actions-toolbar-wrapper",children:(0,ee.jsx)(Oa,{selection:t,actionsToShow:c,selectedItems:l,onSelectionChange:r})})})})})}const Na=e=>e.id,Fa=()=>{};function La({view:e,onChangeView:t,fields:n,search:r=!0,searchLabel:o,actions:a=[],data:l,getItemId:c=Na,isLoading:u=!1,paginationInfo:d,defaultLayouts:m,selection:p,setSelection:f,onSelectionChange:h=Fa}){const[v,g]=(0,i.useState)([]),w=void 0===p||void 0===f,b=w?v:p,y=w?g:f,[x,E]=(0,i.useState)(null);function C(e){const t="function"==typeof e?e(b):e;return h(l.filter((e=>t.includes(c(e))))),y(e)}const _=bt.find((t=>t.type===e.type))?.component,S=(0,i.useMemo)((()=>function(e){return e.map((e=>{const t=e.getValue||(({item:t})=>t[e.id]);return{...e,header:e.header||e.id,getValue:t,render:e.render||t}}))}(n)),[n]),I=Qe(a,l),k=(0,i.useMemo)((()=>b.filter((e=>l.some((t=>c(t)===e))))),[b,l,c]);return(0,ee.jsxs)("div",{className:"dataviews-wrapper",children:[(0,ee.jsxs)(s.__experimentalHStack,{alignment:"top",justify:"start",className:"dataviews-filters__view-actions",children:[(0,ee.jsxs)(s.__experimentalHStack,{justify:"start",className:"dataviews-filters__container",wrap:!0,children:[r&&(0,ee.jsx)(ja,{label:o,view:e,onChangeView:t}),(0,ee.jsx)(ka,{fields:S,view:e,onChangeView:t,openedFilter:x,setOpenedFilter:E})]}),[ye,xe].includes(e.type)&&I&&(0,ee.jsx)(et,{actions:a,data:l,onSelectionChange:C,selection:k,getItemId:c}),(0,ee.jsx)(At,{fields:S,view:e,onChangeView:t,defaultLayouts:m})]}),(0,ee.jsx)(_,{actions:a,data:l,fields:S,getItemId:c,isLoading:u,onChangeView:t,onSelectionChange:C,selection:k,setOpenedFilter:E,view:e}),(0,ee.jsx)(re,{view:e,onChangeView:t,paginationInfo:d}),[ye,xe].includes(e.type)&&I&&(0,ee.jsx)(Va,{data:l,actions:a,selection:k,onSelectionChange:C,getItemId:c})]})}function Ra(){const{updateQuery:e,query:t}=(0,i.useContext)(Q),n=t=>{e("dimensions",[t])};return(0,r.createElement)("div",{className:"search-console-dimensions"},(0,r.createElement)(s.Button,{className:t.dimensions.includes("query")?"is-selected":"",onClick:()=>n("query")},(0,A.__)("Query","search-console")),(0,r.createElement)(s.Button,{className:t.dimensions.includes("page")?"is-selected":"",onClick:()=>n("page")},(0,A.__)("Pages","search-console")),(0,r.createElement)(s.Button,{className:t.dimensions.includes("country")?"is-selected":"",onClick:()=>n("country")},(0,A.__)("Countries","search-console")),(0,r.createElement)(s.Button,{className:t.dimensions.includes("device")?"is-selected":"",onClick:()=>n("device")},(0,A.__)("Devices","search-console")))}const Ba={abw:"Aruba",afg:"Afghanistan",ago:"Angola",aia:"Anguilla",ala:"Åland Islands",alb:"Albania",and:"Andorra",are:"United Arab Emirates (the)",arg:"Argentina",arm:"Armenia",asm:"American Samoa",ata:"Antarctica",atf:"French Southern Territories (the)",atg:"Antigua and Barbuda",aus:"Australia",aut:"Austria",aze:"Azerbaijan",bdi:"Burundi",bel:"Belgium",ben:"Benin",bes:"Bonaire, Sint Eustatius and Saba",bfa:"Burkina Faso",bgd:"Bangladesh",bgr:"Bulgaria",bhr:"Bahrain",bhs:"Bahamas (the)",bih:"Bosnia and Herzegovina",blm:"Saint Barthélemy",blr:"Belarus",blz:"Belize",bmu:"Bermuda",bol:"Bolivia (Plurinational State of)",bra:"Brazil",brb:"Barbados",brn:"Brunei Darussalam",btn:"Bhutan",bvt:"Bouvet Island",bwa:"Botswana",caf:"Central African Republic (the)",can:"Canada",cck:"Cocos (Keeling) Islands (the)",che:"Switzerland",chl:"Chile",chn:"China",civ:"Côte d'Ivoire",cmr:"Cameroon",cod:"Congo (the Democratic Republic of the)",cog:"Congo (the)",cok:"Cook Islands (the)",col:"Colombia",com:"Comoros (the)",cpv:"Cabo Verde",cri:"Costa Rica",cub:"Cuba",cuw:"Curaçao",cxr:"Christmas Island",cym:"Cayman Islands (the)",cyp:"Cyprus",cze:"Czechia",deu:"Germany",dji:"Djibouti",dma:"Dominica",dnk:"Denmark",dom:"Dominican Republic (the)",dza:"Algeria",ecu:"Ecuador",egy:"Egypt",eri:"Eritrea",esh:"Western Sahara*",esp:"Spain",est:"Estonia",eth:"Ethiopia",fin:"Finland",fji:"Fiji",flk:"Falkland Islands (the) [Malvinas]",fra:"France",fro:"Faroe Islands (the)",fsm:"Micronesia (Federated States of)",gab:"Gabon",gbr:"United Kingdom of Great Britain and Northern Ireland (the)",geo:"Georgia",ggy:"Guernsey",gha:"Ghana",gib:"Gibraltar",gin:"Guinea",glp:"Guadeloupe",gmb:"Gambia (the)",gnb:"Guinea-Bissau",gnq:"Equatorial Guinea",grc:"Greece",grd:"Grenada",grl:"Greenland",gtm:"Guatemala",guf:"French Guiana",gum:"Guam",guy:"Guyana",hkg:"Hong Kong",hmd:"Heard Island and McDonald Islands",hnd:"Honduras",hrv:"Croatia",hti:"Haiti",hun:"Hungary",idn:"Indonesia",imn:"Isle of Man",ind:"India",iot:"British Indian Ocean Territory (the)",irl:"Ireland",irn:"Iran (Islamic Republic of)",irq:"Iraq",isl:"Iceland",isr:"Israel",ita:"Italy",jam:"Jamaica",jey:"Jersey",jor:"Jordan",jpn:"Japan",kaz:"Kazakhstan",ken:"Kenya",kgz:"Kyrgyzstan",khm:"Cambodia",kir:"Kiribati",kna:"Saint Kitts and Nevis",kor:"Korea (the Republic of)",kwt:"Kuwait",lao:"Lao People's Democratic Republic (the)",lbn:"Lebanon",lbr:"Liberia",lby:"Libya",lca:"Saint Lucia",lie:"Liechtenstein",lka:"Sri Lanka",lso:"Lesotho",ltu:"Lithuania",lux:"Luxembourg",lva:"Latvia",mac:"Macao",maf:"Saint Martin (French part)",mar:"Morocco",mco:"Monaco",mda:"Moldova (the Republic of)",mdg:"Madagascar",mdv:"Maldives",mex:"Mexico",mhl:"Marshall Islands (the)",mkd:"Macedonia (the former Yugoslav Republic of)",mli:"Mali",mlt:"Malta",mmr:"Myanmar",mne:"Montenegro",mng:"Mongolia",mnp:"Northern Mariana Islands (the)",moz:"Mozambique",mrt:"Mauritania",msr:"Montserrat",mtq:"Martinique",mus:"Mauritius",mwi:"Malawi",mys:"Malaysia",myt:"Mayotte",nam:"Namibia",ncl:"New Caledonia",ner:"Niger (the)",nfk:"Norfolk Island",nga:"Nigeria",nic:"Nicaragua",niu:"Niue",nld:"Netherlands (the)",nor:"Norway",npl:"Nepal",nru:"Nauru",nzl:"New Zealand",omn:"Oman",pak:"Pakistan",pan:"Panama",pcn:"Pitcairn",per:"Peru",phl:"Philippines (the)",plw:"Palau",png:"Papua New Guinea",pol:"Poland",pri:"Puerto Rico",prk:"Korea (the Democratic People's Republic of)",prt:"Portugal",pry:"Paraguay",pse:"Palestine, State of",pyf:"French Polynesia",qat:"Qatar",reu:"Réunion",rou:"Romania",rus:"Russian Federation (the)",rwa:"Rwanda",sau:"Saudi Arabia",sdn:"Sudan (the)",sen:"Senegal",sgp:"Singapore",sgs:"South Georgia and the South Sandwich Islands",shn:"Saint Helena, Ascension and Tristan da Cunha",sjm:"Svalbard and Jan Mayen",slb:"Solomon Islands",sle:"Sierra Leone",slv:"El Salvador",smr:"San Marino",som:"Somalia",spm:"Saint Pierre and Miquelon",srb:"Serbia",ssd:"South Sudan",stp:"Sao Tome and Principe",sur:"Suriname",svk:"Slovakia",svn:"Slovenia",swe:"Sweden",swz:"Swaziland",sxm:"Sint Maarten (Dutch part)",syc:"Seychelles",syr:"Syrian Arab Republic",tca:"Turks and Caicos Islands (the)",tcd:"Chad",tgo:"Togo",tha:"Thailand",tjk:"Tajikistan",tkl:"Tokelau",tkm:"Turkmenistan",tls:"Timor-Leste",ton:"Tonga",tto:"Trinidad and Tobago",tun:"Tunisia",tur:"Turkey",tuv:"Tuvalu",twn:"Taiwan (Province of China)",tza:"Tanzania, United Republic of",uga:"Uganda",ukr:"Ukraine",umi:"United States Minor Outlying Islands (the)",ury:"Uruguay",usa:"United States of America (the)",uzb:"Uzbekistan",vat:"Holy See (the)",vct:"Saint Vincent and the Grenadines",ven:"Venezuela (Bolivarian Republic of)",vgb:"Virgin Islands (British)",vir:"Virgin Islands (U.S.)",vnm:"Viet Nam",vut:"Vanuatu",wlf:"Wallis and Futuna",wsm:"Samoa",yem:"Yemen",zaf:"South Africa",zmb:"Zambia",zwe:"Zimbabwe",zzz:"Others"};function za(){const{settings:e,query:t,showError:n}=(0,i.useContext)(Q),[o,a]=(0,i.useState)([]),[s,l]=(0,i.useState)({type:"table",perPage:10,page:1,sort:{},search:"",filters:[],hiddenFields:[],layout:{}});(0,i.useEffect)((()=>{c()}),[t,e.token]),(0,i.useEffect)((()=>{u()}),[s.sort]);const c=()=>{window.gapi.client.setToken(e.token),window.gapi?.client?.webmasters.searchanalytics.query({...t,siteUrl:e.site}).then((e=>{e.result.rows?a(p(e.result.rows)):a([])})).catch((e=>{n(e)}))},u=()=>{"keys"===s.sort.field?d():m()},d=()=>{"desc"===s.sort.direction?o.sort(((e,t)=>t.keys.localeCompare(e.keys))):o.sort(((e,t)=>e.keys.localeCompare(t.keys)))},m=()=>{"desc"===s.sort.direction?o.sort(((e,t)=>e[s.sort.field]-t[s.sort.field])):o.sort(((e,t)=>t[s.sort.field]-e[s.sort.field]))},p=e=>e.map((e=>({...e,keys:e.keys[0]}))),f=[{id:"keys",header:"Query",enableHiding:!1,render:({item:e})=>t.dimensions.includes("country")?Ba[e.keys]:e.keys},{id:"clicks",header:"Clicks",enableHiding:!1,render:({item:e})=>e.clicks},{id:"ctr",header:"CTR",render:({item:e})=>(100*e.ctr).toFixed(2)+"%"},{id:"impressions",header:"Impressions",render:({item:e})=>e.impressions},{id:"position",header:"Position",render:({item:e})=>Math.round(100*e.position)/100}],h=(0,i.useMemo)((()=>({totalItems:o.length,totalPages:Math.ceil(o.length/s.perPage)})),[o,s.perPage]);return(0,r.createElement)("div",{className:"search-console-table-wrapper"},(0,r.createElement)("div",{className:"search-console-table-bar"},(0,r.createElement)(Ra,null)),(0,r.createElement)(La,{paginationInfo:h,data:(v=o,v.slice((s.page-1)*s.perPage,s.page*s.perPage)),fields:f,view:s,onChangeView:l,getItemId:e=>e.keys,supportedLayouts:["table"],search:!1}));var v}const Ha=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});function Wa(e){const{filter:t,handleChange:n}=e;return(0,r.createElement)(i.Fragment,null,(0,r.createElement)(s.RadioControl,{selected:t?.expression,options:[{label:(0,A.__)("Desktop","search-console"),value:"desktop"},{label:(0,A.__)("Mobile","search-console"),value:"mobile"},{label:(0,A.__)("Tablet","search-console"),value:"tablet"}],onChange:e=>{n(e)}}))}function Ka(e){const{filter:t,handleChange:n}=e;return(0,r.createElement)(i.Fragment,null,(0,r.createElement)(s.FormTokenField,{value:t.expression?[t.expression]:[],suggestions:Object.values(Ba),onChange:e=>{return t=e[0],void n(Object.keys(Ba)[Object.values(Ba).indexOf(t)]);var t},label:(0,A.__)("Choose a country","search-console"),maxLength:"1",__experimentalShowHowTo:!1}))}function Ga(e){const{filter:t,handleChange:n}=e;return(0,r.createElement)(s.__experimentalVStack,null,(0,r.createElement)(s.SelectControl,{selected:t?.operator,options:[{value:"CONTAINS",label:(0,A.__)("Urls containing","search-console")},{value:"NOT_CONTAINS",label:(0,A.__)("Urls not containing","search-console")},{value:"EQUALS",label:(0,A.__)("Exact url","search-console")}],onChange:e=>{n(t?.expression,e)}}),(0,r.createElement)(s.TextControl,{value:t?.expression,placeholder:"https://www.example.com",onChange:e=>{n(e,t?.operator?t?.operator:"CONTAINS")}}))}function Ua(e){const{filter:t,handleChange:n}=e;return(0,r.createElement)(s.__experimentalVStack,null,(0,r.createElement)(s.SelectControl,{value:t?.operator,options:[{value:"CONTAINS",label:(0,A.__)("Queries containing","search-console")},{value:"NOT_CONTAINS",label:(0,A.__)("Queries not containing","search-console")},{value:"EQUALS",label:(0,A.__)("Exact query","search-console")}],onChange:e=>{n(t?.expression,e)}}),(0,r.createElement)(s.TextControl,{value:t?.expression||"",onChange:e=>{n(e,t?.operator?t?.operator:"CONTAINS")}}))}function qa(e){const{onRequestClose:t,modal:n,title:o}=e,{query:a,updateQuery:l}=(0,i.useContext)(Q),[c,u]=(0,i.useState)(n),[d,m]=(0,i.useState)(a.searchType),p={device:Wa,country:Ka,page:Ga,query:Ua}[n.dimension];return(0,r.createElement)(s.Modal,{title:o,onRequestClose:t},(0,r.createElement)(s.__experimentalVStack,null,(0,r.createElement)("div",{className:"search-console-modal-container"},(0,r.createElement)(p,{handleChange:(e,t)=>{"searchType"===n.dimension?m(e):u({dimension:n.dimension,expression:e,operator:t})},searchType:d,filter:c})),(0,r.createElement)(s.Flex,null,(0,r.createElement)(s.Button,{isDestructive:!0,onClick:t},(0,A.__)("Cancel","search-console")),(0,r.createElement)(s.Button,{variant:"primary",onClick:()=>{if("searchType"===n.dimension)l("searchType",d);else{let e=[...a.dimensionFilterGroups].map((e=>e.filters)).shift()||[];if(e.length){const t=e.find((e=>e.dimension===c.dimension));t||e.push(c),t&&(e=e.map((e=>e.dimension===c.dimension?c:e)))}else e.push(c);l("dimensionFilterGroups",[{filters:e}])}t()},disabled:"searchType"!==n.dimension&&!c?.expression},(0,A.__)("Save","search-console")))))}function Ya(){const{updateQuery:e,updateSetting:t,settings:n}=(0,i.useContext)(Q),[o,a]=(0,i.useState)((0,A.__)("Last 28 days","search-console")),l=(n,r)=>{const o=moment().subtract(2,"days").subtract(n,r).format("YYYY-MM-DD");a("Last "+n+" "+r),t("customDate",!1),e("startDate",o)};return(0,r.createElement)(s.Dropdown,{className:"my-container-class-name",contentClassName:"my-popover-content-classname",placement:"bottom right",renderToggle:({isOpen:e,onToggle:t})=>(0,r.createElement)(s.Button,{variant:"secondary",onClick:t,"aria-expanded":e},n.customDate?(0,A.__)("Custom date","search-console"):o),renderContent:({onToggle:e})=>(0,r.createElement)(i.Fragment,null,(0,r.createElement)(s.MenuGroup,null,(0,r.createElement)(s.MenuItem,{onClick:()=>{l(7,"days"),e()}},(0,A.__)("Last 7 days","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{l(28,"days"),e()}},(0,A.__)("Last 28 days","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{l(1,"months"),e()}},(0,A.__)("Last month","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{l(3,"months"),e()}},(0,A.__)("Last 3 months","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{l(6,"months"),e()}},(0,A.__)("Last 6 months","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{l(12,"months"),e()}},(0,A.__)("Last 12 months","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{l(16,"months"),e()}},(0,A.__)("Last 18 months","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{t("customDate",!n.customDate),e()}},(0,A.__)("Custom date","search-console"))))})}function $a(){const{query:e,updateQuery:t,settings:n}=(0,i.useContext)(Q);return(0,r.createElement)(s.Flex,null,n.customDate&&(0,r.createElement)(i.Fragment,null,(0,r.createElement)(s.FlexItem,null,(0,r.createElement)("b",null,"From:")),(0,r.createElement)(s.FlexItem,null,(0,r.createElement)(s.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:t,onToggle:n})=>(0,r.createElement)(s.Button,{variant:"secondary",onClick:n,"aria-expanded":t},e.startDate?(0,k.format)("F j, Y",e.startDate):(0,A.__)("Click here to set start date.","search-console")),renderContent:()=>(0,r.createElement)(s.DatePicker,{__nextRemoveHelpButton:!0,currentDate:e.startDate,onChange:e=>{t("startDate",(0,k.dateI18n)("Y-m-d",e))},isInvalidDate:t=>{if(e.endDate)return new Date(t)>new Date(e.endDate)}})})),(0,r.createElement)(s.FlexItem,null,(0,r.createElement)("b",null,"To:")),(0,r.createElement)(s.FlexItem,null,(0,r.createElement)(s.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:t,onToggle:n})=>(0,r.createElement)(s.Button,{variant:"secondary",onClick:n,"aria-expanded":t},e.endDate?(0,k.format)("F j, Y",e.endDate):(0,A.__)("Click here to set end date.","search-console")),renderContent:()=>(0,r.createElement)(s.DatePicker,{__nextRemoveHelpButton:!0,currentDate:e.endDate,onChange:e=>t("endDate",(0,k.dateI18n)("Y-m-d",e)),isInvalidDate:t=>new Date(t)<new Date(e.startDate)||new Date(t)>new Date})}))),(0,r.createElement)(s.FlexItem,null,(0,r.createElement)(Ya,null)))}const Qa="Enter",Xa=" ";function Ja(){const[e,t]=(0,i.useState)(!1),{query:n,updateQuery:o}=(0,i.useContext)(Q),a=e=>{o("type",e)},l=n.dimensionFilterGroups.map((e=>e.filters));return(0,r.createElement)(i.Fragment,null,(0,r.createElement)("div",{className:"search-console-filters"},(0,r.createElement)("div",{className:"search-console-filters-options"},(0,r.createElement)(s.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:e,onToggle:t})=>(0,r.createElement)(s.Button,{variant:"primary",onClick:t,"aria-expanded":e},(0,A.__)("Search type: ","search-console")+n.type),renderContent:({onToggle:e})=>(0,r.createElement)(s.MenuGroup,null,(0,r.createElement)(s.MenuItem,{onClick:()=>{a("web"),e()}},(0,A.__)("Web","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{a("image"),e()}},(0,A.__)("Image","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{a("video"),e()}},(0,A.__)("Video","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{a("news"),e()}},(0,A.__)("News","search-console")))}),(0,r.createElement)(s.Dropdown,{className:"my-container-class-name",contentClassName:"my-popover-content-classname",placement:"bottom right",renderToggle:({isOpen:e,onToggle:t})=>(0,r.createElement)(s.Button,{variant:"secondary",onClick:t,"aria-expanded":e,icon:Ha,iconPosition:"right",text:(0,A.__)("New","search-console")}),renderContent:({onToggle:e})=>(0,r.createElement)(s.MenuGroup,null,(0,r.createElement)(s.MenuItem,{onClick:()=>{t({dimension:"query",expression:"",operator:""}),e()}},(0,A.__)("Query","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{t({dimension:"page",expression:"",operator:""}),e()}},(0,A.__)("Page","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{t({dimension:"country",expression:"",operator:""}),e()}},(0,A.__)("Country","search-console")),(0,r.createElement)(s.MenuItem,{onClick:()=>{t({dimension:"device",expression:"",operator:""}),e()}},(0,A.__)("Device","search-console")))}),l.map((e=>e.map(((e,a)=>(0,r.createElement)("div",{className:"dataviews-filter-summary__chip-container",key:a},(0,r.createElement)("div",{className:"dataviews-filter-summary__chip has-reset",role:"button",tabIndex:"0","aria-pressed":"false","aria-expanded":"false",onClick:()=>t(e),onKeyDown:n=>{[Qa,Xa].includes(n.key)&&(t(e),n.preventDefault())}},e.dimension+": "+(e=>e.operator?"EQUALS"===e.operator?"":"CONTAINS"===e.operator?"+":"-":"")(e)+e.expression,(0,r.createElement)("button",{className:"dataviews-filter-summary__chip-remove has-values",onClick:t=>{t.stopPropagation(),(e=>{const t=[...n.dimensionFilterGroups.map((e=>e.filters))[0].filter((t=>t.dimension!==e.dimension))];o("dimensionFilterGroups",t.length?[{filters:t}]:[])})(e)}},(0,r.createElement)(s.Icon,{icon:Mt}))))))))),(0,r.createElement)("div",null,(0,r.createElement)($a,{query:n}))),e&&(0,r.createElement)(qa,{onRequestClose:()=>{t(!1)},modal:e,title:e.dimension}))}const Za=[{name:"Systeme.io",ad:(0,A.__)("Free online marketing platform with funnel builder. Create popup, squeeze page, funnel automations all for FREE. No credit card required","search-console"),link:"https://systeme.io/?sa=sa0181820865b77bd583c54e7e7668a6a77e78f1c7",isLink:!0},{name:"Formello",ad:(0,A.__)("Lightweight Gutenberg contact form builder, blazingly fast with no external dependencies and ReCaptcha support.","search-console"),slug:"formello"},{name:"Popper",ad:(0,A.__)("Do you need a POPUP plugin? Check Popper a Popup builder with exit-intent powered by Gutenberg.","search-console"),slug:"popper"},{name:"Pdf Embed",ad:(0,A.__)("A Gutenberg block to embed your PDF with official Adobe API.","search-console"),slug:"pdf-embed"}],ei=({plugins:e,direction:t,noSlide:n})=>{const[o,a]=(0,i.useState)(0),[c,u]=(0,i.useState)([]),{saveEntityRecord:d}=(0,l.useDispatch)($.store);(0,i.useEffect)((()=>{m()}),[]),(0,i.useEffect)((()=>{if(n)return;const e=setInterval((()=>{p()}),5e3);return()=>clearInterval(e)}));const m=()=>{const t=Za.filter((t=>!e?.find((e=>e.name===t.name))));u(t)},p=()=>{if(c.length>1){const e=(o+1)%c.length;a(e)}},f=e=>{if(0===e)return o>0?"-"+100/c.length*o+"%":0};return(0,r.createElement)("div",{className:"slideshow-container",style:{width:`calc( 100% * ${c.length})`}},c.map(((e,n)=>(0,r.createElement)("div",{key:n,className:"slide "+(n===o?"active":""),style:{width:`calc( 100% / ${c.length})`,marginLeft:f(n)}},(0,r.createElement)(s.__experimentalHStack,{justify:"flex-start",direction:t},(0,r.createElement)("span",null,e.ad),e.isLink?(0,r.createElement)(s.Button,{variant:"primary",size:"small",text:(0,A.__)("Get FREE offer!","search-console"),href:e.link,target:"_blank",icon:"megaphone"}):(0,r.createElement)(s.Button,{variant:"primary",size:"small",text:(0,A.__)("Install","search-console"),onClick:()=>{return t=e.slug,void d("root","plugin",{slug:t,status:"active"});var t}}))))))},ti=e=>{const{plugins:t}=(0,l.useSelect)((e=>{const t=e("core").getPlugins({per_page:-1});return{plugins:t?.filter((e=>["formello/formello","popper/popper","pdf-embed/pdf-embed"].includes(e.plugin)))}})),[n,o]=(0,i.useState)((()=>{const e=window.localStorage.getItem("sc-shown");return JSON.parse(e)||(new Date).getTime()}));return t?(0,r.createElement)(s.Card,null,(0,r.createElement)("div",{style:{overflowX:"hidden"}},(0,r.createElement)(ei,{plugins:t,...e}))):null},ni=()=>{const e=E(),{settings:t,ready:n}=(0,i.useContext)(Q);if(!n||!t)return(0,r.createElement)(M,{text:(0,A.__)("Fetching data…","search-console")});const o=t=>(0,i.createInterpolateElement)(t,{a:(0,r.createElement)(s.Button,{text:(0,A.__)("settings page","search-console"),onClick:()=>e.push({page:"search-console-settings"}),variant:"link"})});return t.token&&t.token.refresh_token?t.credentials.client_secret&&t.credentials.client_id?t.site?(0,r.createElement)("div",{className:"search-console-dashboard"},(0,r.createElement)(s.__experimentalVStack,null,(0,r.createElement)(s.Card,null,(0,r.createElement)(s.CardBody,null,(0,r.createElement)(J,null))),(0,r.createElement)(s.Card,null,(0,r.createElement)(s.CardBody,null,(0,r.createElement)(Ja,null))),(0,r.createElement)(ti,{noSlide:!0}),(0,r.createElement)(s.Card,null,(0,r.createElement)(s.CardBody,null,(0,r.createElement)(za,null))))):(0,r.createElement)(s.Notice,{status:"warning",isDismissible:!1},(0,r.createElement)("p",null,o((0,A.__)("Please select a site on <a />.","search-console")))):(0,r.createElement)(s.Notice,{status:"warning",isDismissible:!1},(0,r.createElement)("p",null,o((0,A.__)("Please provide a Client Secret and a Client ID on <a />.","search-console")))):(0,r.createElement)(s.Notice,{status:"warning",isDismissible:!1},(0,r.createElement)("p",null,o((0,A.__)("Please authenticate on <a />.","search-console"))))},ri=(0,r.createContext)(null);function oi({clientId:e,onScriptLoadSuccess:t,onScriptLoadError:n,children:o}){const i=function(e={}){const{onScriptLoadSuccess:t,onScriptLoadError:n}=e,[o,a]=(0,r.useState)(!1),i=(0,r.useRef)(t);i.current=t;const s=(0,r.useRef)(n);return s.current=n,(0,r.useEffect)((()=>{const e=document.createElement("script");return e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{var e;a(!0),null===(e=i.current)||void 0===e||e.call(i)},e.onerror=()=>{var e;a(!1),null===(e=s.current)||void 0===e||e.call(s)},document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]),o}({onScriptLoadSuccess:t,onScriptLoadError:n}),s=(0,r.useMemo)((()=>({clientId:e,scriptLoadedSuccessfully:i})),[e,i]);return a().createElement(ri.Provider,{value:s},o)}const ai=()=>{const{updateSetting:e,settings:t,revokeToken:n}=(0,i.useContext)(Q),[o,a]=(0,i.useState)(!1),l=function({flow:e="implicit",scope:t="",onSuccess:n,onError:o,onNonOAuthError:a,overrideScope:i,...s}){const{clientId:l,scriptLoadedSuccessfully:c}=function(){const e=(0,r.useContext)(ri);if(!e)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return e}(),u=(0,r.useRef)(),d=(0,r.useRef)(n);d.current=n;const m=(0,r.useRef)(o);m.current=o;const p=(0,r.useRef)(a);p.current=a,(0,r.useEffect)((()=>{var n;if(!c)return;const r="implicit"===e?"initTokenClient":"initCodeClient",o=null===(n=window.google)||void 0===n?void 0:n.accounts.oauth2[r]({client_id:l,scope:i?t:`openid profile email ${t}`,callback:e=>{var t,n;if(e.error)return null===(t=m.current)||void 0===t?void 0:t.call(m,e);null===(n=d.current)||void 0===n||n.call(d,e)},error_callback:e=>{var t;null===(t=p.current)||void 0===t||t.call(p,e)},...s});u.current=o}),[l,c,e,t]);const f=(0,r.useCallback)((e=>{var t;return null===(t=u.current)||void 0===t?void 0:t.requestAccessToken(e)}),[]),h=(0,r.useCallback)((()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.requestCode()}),[]);return"implicit"===e?f:h}({flow:"auth-code",onSuccess:async({code:e})=>{c(e)},scope:"https://www.googleapis.com/auth/webmasters.readonly https://www.googleapis.com/auth/siteverification email"}),c=(function(e,t,...n){window.google&&window.google.accounts.oauth2.hasGrantedAnyScope(e,t,...n)}(window.search_console.token,"https://www.googleapis.com/auth/webmasters.readonly"),t=>{I()({path:"/searchconsole/v1/credentials",method:"POST",data:{code:t}}).then((t=>{e("token",t),a({status:"success",text:(0,A.__)("You're logged in","search-console")})})).catch((e=>{a({status:"error",text:e.message})})).finally((()=>console.log("Success")))});return(0,r.createElement)(i.Fragment,null,(0,r.createElement)(s.Button,{variant:"primary",onClick:()=>l(),icon:"google"},(t.token.id_token?JSON.parse(atob(t.token.id_token.split(".")[1])).email:null)||(0,A.__)("Login with Google","search-console")),t.token.id_token&&(0,r.createElement)("p",null,(0,r.createElement)(s.Button,{text:(0,A.__)("Revoke token","search-console"),onClick:()=>n(),isDestructive:!0,isSmall:!0})),o&&(0,r.createElement)(s.Notice,{status:o.status,isDismissible:!1},o.text))},ii=e=>{const{settings:t}=(0,i.useContext)(Q);return(0,r.createElement)(s.Card,null,(0,r.createElement)(s.CardHeader,null,(0,r.createElement)("b",null,(0,A.__)("Google Oauth","search-console"))),(0,r.createElement)(s.CardBody,null,(!t?.credentials?.client_id?.length||!t?.credentials?.client_secret?.length)&&(0,r.createElement)(s.Notice,{status:"warning",isDismissible:!1},(0,A.__)("You must insert a Client Id and a Client secret to correctly request your authentication token.","search-console")),t?.credentials?.client_id&&t?.credentials?.client_secret&&(0,r.createElement)(oi,{clientId:t?.credentials?.client_id},(0,r.createElement)(ai,{...e}))))},si=()=>{var e,t;const{settings:n,updateSetting:o}=(0,i.useContext)(Q);function a(e,t){const r=Object.assign({},n.credentials);r[e]=t,o("credentials",r)}const l=(0,A.sprintf)("https://developers.google.com/web/site-kit",n.title,n.wp_url);return(0,r.createElement)(s.Card,null,(0,r.createElement)(s.CardHeader,null,(0,r.createElement)("b",null,(0,A.__)("Google Credentials","search-console"))),(0,r.createElement)(s.CardBody,null,(0,r.createElement)(i.RawHTML,null,(0,A.sprintf)(/* translators: Developer console url. */ /* translators: Developer console url. */
(0,A.__)('<p>You need to create a <a target="_blank" href="%1$s">Google Developer Console</a> account before proceeding to authorization.</p>',"search-console"),"https://console.developers.google.com/",n.wp_url)),(0,r.createElement)(i.RawHTML,null,(0,A.sprintf)(/* translators: Google Site Kit url. */ /* translators: Google Site Kit url. */
(0,A.__)('<p><b>Tip</b>: the simplest way to get your own credentials is to go to <a target="_blank" href="%s">Google Site Kit</a> site and follow step. Don\'t forget to add your site url as authorized Javascript origin.</p>',"search-console"),l)),(0,r.createElement)(s.TextControl,{placeholder:"CLIENT ID",value:null!==(e=n?.credentials?.client_id)&&void 0!==e?e:"",label:(0,A.__)("Client ID","search-console"),help:(0,A.__)("Please go to Developer Console to obtain your credentials.","search-console"),onChange:e=>{a("client_id",e)}}),(0,r.createElement)(s.TextControl,{placeholder:"CLIENT SECRET",value:null!==(t=n?.credentials?.client_secret)&&void 0!==t?t:"",label:(0,A.__)("Client secret","search-console"),help:(0,A.__)("Please go to Developer Console to obtain your credentials.","search-console"),onChange:e=>{a("client_secret",e)}})))};function li(){return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ti,{direction:"column"}),(0,r.createElement)(s.Card,null,(0,r.createElement)(s.CardHeader,null,(0,r.createElement)("b",null,(0,A.__)("Need help?","search-console"))),(0,r.createElement)(s.CardBody,null,(0,r.createElement)("p",null,(0,A.__)("Detailed documentation is available on the plugin website.","search-console")),(0,r.createElement)(s.ExternalLink,{href:"https://www.francescopepe.com/docs/search-console"},(0,A.__)("Documentation","search-console")),(0,r.createElement)("p",null,(0,A.__)("We would love to help you out if you need any help.","search-console")),(0,r.createElement)(s.ExternalLink,{href:"https://wordpress.org/support/plugin/search-console/"},(0,A.__)("Ask a question","search-console")))),(0,r.createElement)(s.Card,{className:"ads-container__reviews"},(0,r.createElement)(s.CardHeader,null,(0,r.createElement)("b",null,(0,A.__)("Do you like the plugin?","search-console"))),(0,r.createElement)(s.CardBody,null,(0,r.createElement)("p",null,(0,A.__)("If you like search-console plugin you can share a review to help us and spread some love!","search-console")),(0,r.createElement)(s.ExternalLink,{href:"https://wordpress.org/support/plugin/search-console/reviews/#new-post"},(0,A.__)("Rate 5 stars!","search-console")))))}const ci=()=>{const{settings:e,updateSetting:t,refreshToken:n,saveSettings:o}=(0,i.useContext)(Q);return(0,r.createElement)("div",{className:"search-console-Advanced"},e.site&&(0,r.createElement)(i.Fragment,null,(0,r.createElement)("p",null,(0,A.__)("Do you want to add meta tag verification on your site?","search-console")),(0,r.createElement)(s.ToggleControl,{label:(0,A.__)("Add verification to site?","search-console"),help:(0,A.__)("Check this if you want output meta verification on frontend.","search-console"),checked:e.siteVerification,onChange:e=>{t("siteVerification",e),o()}})),e.siteVerification&&(0,r.createElement)(s.__experimentalInputControl,{help:(0,A.__)("Please click on icon to generate your meta verification tag.","search-console"),label:(0,A.__)("Your meta verification tag","search-console"),value:e.meta,onChange:e=>{t("meta",e)},suffix:(0,r.createElement)(s.Button,{onClick:()=>{e.siteVerification&&e.site&&window.gapi.client.load("siteVerification","v1").then((()=>{window.gapi.client.siteVerification.webResource.getToken({verificationMethod:"META",site:{identifier:e.site.replace("sc-domain:",""),type:"SITE"}}).then((e=>{t("meta",e.result.token),o()})).catch((e=>{401===e.status&&n()}))}))},icon:"update"})}))};function ui(){const{settings:e,updateSetting:t,saveSettings:n}=(0,i.useContext)(Q),o=(0,l.useSelect)((e=>e($.store).getPostTypes({per_page:-1})),[]),a=Array.isArray(o)?o.filter((e=>e.viewable)).map((e=>({label:e.labels.singular_name,value:e.slug}))):o;return(0,r.createElement)(i.Fragment,null,(0,r.createElement)("p",null,(0,A.__)("Choose on which post type you want see Search Console data.","search-console")),a&&a.map(((o,a)=>(0,r.createElement)(s.ToggleControl,{key:a,label:o.label,checked:e.postTypes.includes(o.value),onChange:r=>{r?(r=>{t("postTypes",[...e.postTypes,r]),n()})(o.value):(r=>{const o=e.postTypes.filter((e=>e!==r));t("postTypes",o),n()})(o.value)}}))))}const di=e=>{const{settings:t,updateSetting:n,refreshToken:o,saveSettings:a}=(0,i.useContext)(Q),[l,c]=(0,i.useState)(null);(0,i.useEffect)((()=>{t.token.access_token&&u()}),[t.token]);const u=()=>{const e=[{value:"",label:(0,A.__)("Select a site","search-console")}];window.gapi?.client?.setToken(t.token),window.gapi?.client?.webmasters?.sites.list().then((t=>{t.result.siteEntry.forEach((t=>{e.push({value:t.siteUrl,label:t.siteUrl})})),e.sort((function(e,t){return e.value<t.value?-1:0})),c(e.sort())})).catch((e=>{401===e.status&&o()}))};return(0,r.createElement)(s.Card,null,(0,r.createElement)(s.CardHeader,null,(0,r.createElement)("b",null,(0,A.__)("Options","search-console"))),(0,r.createElement)(s.CardBody,null,(0,r.createElement)(s.SelectControl,{options:l,label:(0,A.__)("Choose site","search-console"),help:(0,A.__)("Choose one of your sites.","search-console"),value:t.site,onChange:e=>{n("site",e),a()}}),(0,r.createElement)(ui,{...e}),(0,r.createElement)(ci,{...e})))};var mi=n(485),pi=n.n(mi);const fi=(0,i.forwardRef)((function({icon:e,size:t=24,...n},r){return(0,i.cloneElement)(e,{width:t,height:t,...n,ref:r})})),hi=(0,ee.jsx)(Z.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ee.jsx)(Z.Path,{d:"M17.3 10.1c0-2.5-2.1-4.4-4.8-4.4-2.2 0-4.1 1.4-4.6 3.3h-.2C5.7 9 4 10.7 4 12.8c0 2.1 1.7 3.8 3.7 3.8h9c1.8 0 3.2-1.5 3.2-3.3.1-1.6-1.1-2.9-2.6-3.2zm-.5 5.1h-9c-1.2 0-2.2-1.1-2.2-2.3s1-2.4 2.2-2.4h1.3l.3-1.1c.4-1.3 1.7-2.2 3.2-2.2 1.8 0 3.3 1.3 3.3 2.9v1.3l1.3.2c.8.1 1.4.9 1.4 1.8-.1 1-.9 1.8-1.8 1.8z"})});function vi(){const[e]=(0,i.useState)("saved"),{isSaving:t,saveSettings:n,hasEdits:o}=(0,i.useContext)(Q);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.Flex,{justify:"flex-start"},(0,r.createElement)(s.Button,{className:"save-settings__save-button",onClick:()=>n(),disabled:t||!o,isBusy:t,variant:"primary"},(0,A.__)("Save","search-console")),[t&&(0,r.createElement)(s.Animate,{type:"loading",key:"saving"},(({className:e})=>(0,r.createElement)(s.Flex,{justify:"flex-start",className:pi()("message",e),gap:1},(0,r.createElement)(fi,{icon:hi}),(0,A.__)("Saving","block-visibility")))),"error"===e&&(0,r.createElement)("span",{className:"message update-failed",key:"error"},(0,A.__)("Update failed. Try again or get in touch with support.","search-console"))]))}const gi=()=>{const{ready:e,settings:t}=(0,i.useContext)(Q);return e&&t?(0,r.createElement)("div",{className:"search-console-settings"},(0,r.createElement)(s.__experimentalGrid,{columns:4,templateColumns:"3fr 1fr",gap:"4",align:"flex-start",className:"popper-settings"},(0,r.createElement)(s.__experimentalVStack,null,(0,r.createElement)(ii,null),(0,r.createElement)(di,null),(0,r.createElement)(si,null),(0,r.createElement)(vi,null)),(0,r.createElement)(s.__experimentalVStack,null,(0,r.createElement)(li,null)))):(0,r.createElement)(M,{text:(0,A.__)("Fetching data…","search-console")})};var wi,bi,yi,xi,Ei,Ci,_i,Si,Ii,ki,ji,Di;function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ti.apply(this,arguments)}var Ai=function(e){return r.createElement("svg",Ti({xmlns:"http://www.w3.org/2000/svg",width:32,height:28,preserveAspectRatio:"xMidYMid",viewBox:"0 0 256 228"},e),wi||(wi=r.createElement("defs",null,r.createElement("radialGradient",{id:"logo_svg__a",cx:"21.66%",cy:"28.708%",r:"82.87%",fx:"21.66%",fy:"28.708%",gradientTransform:"matrix(.59503 .59486 -.44034 .80383 .214 -.073)"},r.createElement("stop",{offset:"0%",stopColor:"#F1F2F2"}),r.createElement("stop",{offset:"100%",stopColor:"#E6E7E8"})))),bi||(bi=r.createElement("path",{fill:"#737373",d:"M165.98 0H90.02L71.098 19.055V37.98H90.02V19.055h75.958V37.98h18.924V19.055z"})),yi||(yi=r.createElement("path",{fill:"#BFBFBF",d:"M90.02 0v19.055h75.96V0z"})),xi||(xi=r.createElement("path",{fill:"url(#logo_svg__a)",d:"M36.402 37.98 0 74.381v134.177c0 10.513 8.542 18.924 18.924 18.924h218.152c10.513 0 18.924-8.543 18.924-18.924V74.513L219.466 37.98z"})),Ei||(Ei=r.createElement("path",{fill:"#FFF",d:"M28.517 109.076h199.097v118.538H28.517z"})),Ci||(Ci=r.createElement("path",{fill:"#E0E0E0",d:"M36.402 37.98 0 74.381v34.694h256V74.513L219.466 37.98z"})),_i||(_i=r.createElement("path",{fill:"#D1D1D1",d:"M42.71 213.29H128v14.193H42.71z"})),Si||(Si=r.createElement("path",{fill:"#4285F4",d:"M28.517 86.998c0-8.148 6.571-14.719 14.72-14.719h169.527c8.148 0 14.719 6.571 14.719 14.719v22.078H28.517z"})),Ii||(Ii=r.createElement("path",{fill:"#E6E6E6",d:"M56.903 90.152a7.067 7.067 0 0 1-7.096 7.096 7.067 7.067 0 0 1-7.097-7.096 7.067 7.067 0 0 1 7.097-7.097 7.067 7.067 0 0 1 7.096 7.097m23.656 0a7.067 7.067 0 0 1-7.097 7.096 7.067 7.067 0 0 1-7.096-7.096 7.067 7.067 0 0 1 7.096-7.097 7.067 7.067 0 0 1 7.097 7.097"})),ki||(ki=r.createElement("path",{fill:"#BABABA",d:"m227.483 165.191-29.832-29.832-9.988 30.883-40.739-40.608-1.183 62.686 15.113 23.655c2.234-.394-11.302 15.508-11.302 15.508h77.93z"})),ji||(ji=r.createElement("path",{fill:"#4D4D4D",d:"M208.821 164.008c0-16.821-9.856-31.277-23.918-38.242v39.95l-18.792 10.12-19.056-10.12v-40.082c-14.061 6.966-23.655 21.553-23.655 38.243 0 16.821 9.725 31.277 23.787 38.242v25.364h37.848v-25.364c13.93-6.834 23.786-21.42 23.786-38.11"})),Di||(Di=r.createElement("path",{fill:"#D1D1D1",d:"M42.71 123.269h66.366v75.828H42.71z"})))};function Mi({title:e}){return(0,r.createElement)("div",{className:"masthead"},(0,r.createElement)(Ai,null),(0,r.createElement)("div",{className:"masthead__branding"},(0,r.createElement)("h1",null,e)))}function Pi({title:e}){return(0,r.createElement)("div",{className:"footer"},(0,r.createElement)("div",{className:"inner-container"},(0,r.createElement)("a",{href:"https://github.com/Tropicalista/search-console",target:"_blank"},"Github"),(0,r.createElement)("a",{href:"https://wordpress.org/support/plugin/search-console/",target:"_blank"},(0,A.__)("Support","search-console")),(0,r.createElement)("a",{href:"https://wordpress.org/support/plugin/formello/reviews/#new-post",target:"_blank"},(0,A.__)("Rate ","formello"),(0,r.createElement)(s.Icon,{icon:"star-filled"}),(0,r.createElement)(s.Icon,{icon:"star-filled"}),(0,r.createElement)(s.Icon,{icon:"star-filled"}),(0,r.createElement)(s.Icon,{icon:"star-filled"}),(0,r.createElement)(s.Icon,{icon:"star-filled"}))))}const Oi=()=>{const e=E(),{params:t}=(0,i.useContext)(y),n=document.querySelector("#toplevel_page_search-console"),o=()=>{const e=(0,h.getQueryArg)(window.location.href,"page");if(e)for(const t of n.querySelectorAll("a"))e===(0,h.getQueryArg)(t.href,"page")?(t.classList.add("current"),t.parentElement.classList.add("current")):(t.classList.remove("current"),t.parentElement.classList.remove("current"))},a=t=>{t.preventDefault(),e.push({page:(0,h.getQueryArg)(t.target.href,"page")}),o()};return(0,i.useEffect)((()=>(o(),n.addEventListener("click",a,!1),()=>{n.removeEventListener("click",a)})),[]),e.listen((()=>{o()})),"search-console-settings"===t.page?(0,r.createElement)(gi,null):(0,r.createElement)(ni,null)},Vi=()=>(0,r.createElement)(oi,null,(0,r.createElement)(_,null,(0,r.createElement)(Mi,{title:"Search Console"}),(0,r.createElement)(X,null,(0,r.createElement)(Oi,null),(0,r.createElement)(Ni,null)),(0,r.createElement)(Pi,null)));function Ni(){const e=(0,l.useSelect)((e=>e(c.store).getNotices()),[]),{removeNotice:t}=(0,l.useDispatch)(c.store),n=e.filter((({type:e})=>"snackbar"===e));return(0,r.createElement)(s.SnackbarList,{notices:n,onRemove:t})}window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("search-console-wrapper");(0,i.createRoot)(e).render((0,r.createElement)(Vi,null))}))},485:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},731:e=>{var t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},n=Object.keys(t).join("|"),r=new RegExp(n,"g"),o=new RegExp(n,"");function a(e){return t[e]}var i=function(e){return e.replace(r,a)};e.exports=i,e.exports.has=function(e){return!!e.match(o)},e.exports.remove=i},63:(e,t,n)=>{"use strict";var r=n(609),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return s((function(){o.value=n,o.getSnapshot=t,c(o)&&u({inst:o})}),[e,n,t]),i((function(){return c(o)&&u({inst:o}),e((function(){c(o)&&u({inst:o})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},888:(e,t,n)=>{"use strict";e.exports=n(63)},609:e=>{"use strict";e.exports=window.React}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],s=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={57:0,350:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var u=l(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=globalThis.webpackChunksearch_console=globalThis.webpackChunksearch_console||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[350],(()=>a(315)));i=a.O(i)})();