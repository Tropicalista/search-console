!function(){"use strict";const e={width:"100%",height:"400",colors:["#4285f4","#5e35b1","#00897b","#E8710A"],smoothline:"true",focusTarget:"category",chartArea:{width:"100%",height:"80%"},hAxis:{showTextEvery:1,format:"MMM dd"},vAxis:{gridlines:{count:0,minSpacing:100},minorGridlines:{count:2},showTextEvery:2},vAxes:{0:{direction:-1,textPosition:"none"},1:{textPosition:"none"},2:{textPosition:"none"},3:{textPosition:"none"}},series:{0:{type:"line",targetAxisIndex:1,tooltip:!0},1:{type:"line",targetAxisIndex:2,tooltip:!0},2:{type:"line",targetAxisIndex:3,tooltip:!0},3:{type:"line",targetAxisIndex:0,tooltip:!0},4:{type:"line",targetAxisIndex:0,tooltip:!0}}};let t="",o="",n={siteUrl:"",rowLimit:null,searchType:"web",startDate:moment().subtract(14,"days").format("YYYY-MM-DD"),endDate:moment().format("YYYY-MM-DD"),dimensions:["date"]};function i(){gapi.client.load("webmasters","v3").then((()=>{gapi.auth.setToken({access_token:o}),gapi.client.webmasters.searchanalytics.query(n).then((function(o){let n=(i=o.result.rows,(a=new google.visualization.DataTable).addColumn("date","Keys"),a.addColumn("number","Clicks"),a.addColumn("number","Impressions"),a.addColumn("number","CTR"),a.addColumn("number","Position"),e.hAxis.format,_.forEach(i,(function(e){a.addRow([moment(e.keys[0]).toDate(),e.clicks,e.impressions,100*e.ctr,parseFloat(e.position)])})),a);var i,a;t=new google.visualization.LineChart(document.getElementById("search-console-chart")),t.draw(n,e),google.visualization.events.addListener(t,"select",s)})).then(null,(function(e){console.log(e)}))}))}function s(){if(t.getSelection()[0].column){var o=t.getSelection()[0].column-1;e.series[o].tooltip=!e.series[o].tooltip,0==e.series[o].lineWidth?(e.series[o].lineWidth=2,e.series[o].areaOpacity=.3):(e.series[o].lineWidth=0,e.series[o].areaOpacity=0),t.draw(dataChart,e)}}window.onGoogleScriptLoad=()=>{window.gapi,google.charts.load("current",{packages:["corechart"]}),wp.apiRequest({path:"/searchconsole/settings/"}).then((e=>{o=e.token,n.siteUrl=e.site,gapi.load("client",i)})).catch((e=>console.log(e.responseText)))},function(){const e="google-js",t=document.getElementsByTagName("script")[0];if(document.getElementById(e))return;const o=document.createElement("script");o.id=e,o.src="https://apis.google.com/js/platform.js",o.onload=window.onGoogleScriptLoad,t.parentNode.insertBefore(o,t)}()}();