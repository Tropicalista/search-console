(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,,,,,,function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},,,,,,,,,,,,,,,,,,,,,function(t,e,s){"use strict";var a=s(7);s.n(a).a},,function(t,e,s){"use strict";var a=s(8);s.n(a).a},function(t,e,s){"use strict";var a=s(9);s.n(a).a},function(t,e,s){"use strict";var a=s(10);s.n(a).a},function(t,e,s){"use strict";var a=s(11);s.n(a).a},function(t,e,s){"use strict";var a=s(12);s.n(a).a},,function(t,e,s){"use strict";var a=s(13);s.n(a).a},function(t,e,s){"use strict";var a=s(14);s.n(a).a},,,,,,,,,,,,,,,,,,,function(t,e,s){"use strict";s.r(e);var a=s(1),i={name:"App",created(){gapi.auth.setToken({access_token:this.$store.getters.config.token})}},n=(s(35),s(0)),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashy-dashboard"},[s("notifications",{attrs:{group:"errors",position:"center"}}),t._v(" "),s("notifications",{attrs:{group:"settings",position:"center"}}),t._v(" "),s("router-view")],1)}),[],!1,null,null,null).exports,o=s(17),l=s(29),c=s.n(l),d=s(33),u={abw:"Aruba",afg:"Afghanistan",ago:"Angola",aia:"Anguilla",ala:"Åland Islands",alb:"Albania",and:"Andorra",are:"United Arab Emirates (the)",arg:"Argentina",arm:"Armenia",asm:"American Samoa",ata:"Antarctica",atf:"French Southern Territories (the)",atg:"Antigua and Barbuda",aus:"Australia",aut:"Austria",aze:"Azerbaijan",bdi:"Burundi",bel:"Belgium",ben:"Benin",bes:"Bonaire, Sint Eustatius and Saba",bfa:"Burkina Faso",bgd:"Bangladesh",bgr:"Bulgaria",bhr:"Bahrain",bhs:"Bahamas (the)",bih:"Bosnia and Herzegovina",blm:"Saint Barthélemy",blr:"Belarus",blz:"Belize",bmu:"Bermuda",bol:"Bolivia (Plurinational State of)",bra:"Brazil",brb:"Barbados",brn:"Brunei Darussalam",btn:"Bhutan",bvt:"Bouvet Island",bwa:"Botswana",caf:"Central African Republic (the)",can:"Canada",cck:"Cocos (Keeling) Islands (the)",che:"Switzerland",chl:"Chile",chn:"China",civ:"Côte d'Ivoire",cmr:"Cameroon",cod:"Congo (the Democratic Republic of the)",cog:"Congo (the)",cok:"Cook Islands (the)",col:"Colombia",com:"Comoros (the)",cpv:"Cabo Verde",cri:"Costa Rica",cub:"Cuba",cuw:"Curaçao",cxr:"Christmas Island",cym:"Cayman Islands (the)",cyp:"Cyprus",cze:"Czechia",deu:"Germany",dji:"Djibouti",dma:"Dominica",dnk:"Denmark",dom:"Dominican Republic (the)",dza:"Algeria",ecu:"Ecuador",egy:"Egypt",eri:"Eritrea",esh:"Western Sahara*",esp:"Spain",est:"Estonia",eth:"Ethiopia",fin:"Finland",fji:"Fiji",flk:"Falkland Islands (the) [Malvinas]",fra:"France",fro:"Faroe Islands (the)",fsm:"Micronesia (Federated States of)",gab:"Gabon",gbr:"United Kingdom of Great Britain and Northern Ireland (the)",geo:"Georgia",ggy:"Guernsey",gha:"Ghana",gib:"Gibraltar",gin:"Guinea",glp:"Guadeloupe",gmb:"Gambia (the)",gnb:"Guinea-Bissau",gnq:"Equatorial Guinea",grc:"Greece",grd:"Grenada",grl:"Greenland",gtm:"Guatemala",guf:"French Guiana",gum:"Guam",guy:"Guyana",hkg:"Hong Kong",hmd:"Heard Island and McDonald Islands",hnd:"Honduras",hrv:"Croatia",hti:"Haiti",hun:"Hungary",idn:"Indonesia",imn:"Isle of Man",ind:"India",iot:"British Indian Ocean Territory (the)",irl:"Ireland",irn:"Iran (Islamic Republic of)",irq:"Iraq",isl:"Iceland",isr:"Israel",ita:"Italy",jam:"Jamaica",jey:"Jersey",jor:"Jordan",jpn:"Japan",kaz:"Kazakhstan",ken:"Kenya",kgz:"Kyrgyzstan",khm:"Cambodia",kir:"Kiribati",kna:"Saint Kitts and Nevis",kor:"Korea (the Republic of)",kwt:"Kuwait",lao:"Lao People's Democratic Republic (the)",lbn:"Lebanon",lbr:"Liberia",lby:"Libya",lca:"Saint Lucia",lie:"Liechtenstein",lka:"Sri Lanka",lso:"Lesotho",ltu:"Lithuania",lux:"Luxembourg",lva:"Latvia",mac:"Macao",maf:"Saint Martin (French part)",mar:"Morocco",mco:"Monaco",mda:"Moldova (the Republic of)",mdg:"Madagascar",mdv:"Maldives",mex:"Mexico",mhl:"Marshall Islands (the)",mkd:"Macedonia (the former Yugoslav Republic of)",mli:"Mali",mlt:"Malta",mmr:"Myanmar",mne:"Montenegro",mng:"Mongolia",mnp:"Northern Mariana Islands (the)",moz:"Mozambique",mrt:"Mauritania",msr:"Montserrat",mtq:"Martinique",mus:"Mauritius",mwi:"Malawi",mys:"Malaysia",myt:"Mayotte",nam:"Namibia",ncl:"New Caledonia",ner:"Niger (the)",nfk:"Norfolk Island",nga:"Nigeria",nic:"Nicaragua",niu:"Niue",nld:"Netherlands (the)",nor:"Norway",npl:"Nepal",nru:"Nauru",nzl:"New Zealand",omn:"Oman",pak:"Pakistan",pan:"Panama",pcn:"Pitcairn",per:"Peru",phl:"Philippines (the)",plw:"Palau",png:"Papua New Guinea",pol:"Poland",pri:"Puerto Rico",prk:"Korea (the Democratic People's Republic of)",prt:"Portugal",pry:"Paraguay",pse:"Palestine, State of",pyf:"French Polynesia",qat:"Qatar",reu:"Réunion",rou:"Romania",rus:"Russian Federation (the)",rwa:"Rwanda",sau:"Saudi Arabia",sdn:"Sudan (the)",sen:"Senegal",sgp:"Singapore",sgs:"South Georgia and the South Sandwich Islands",shn:"Saint Helena, Ascension and Tristan da Cunha",sjm:"Svalbard and Jan Mayen",slb:"Solomon Islands",sle:"Sierra Leone",slv:"El Salvador",smr:"San Marino",som:"Somalia",spm:"Saint Pierre and Miquelon",srb:"Serbia",ssd:"South Sudan",stp:"Sao Tome and Principe",sur:"Suriname",svk:"Slovakia",svn:"Slovenia",swe:"Sweden",swz:"Swaziland",sxm:"Sint Maarten (Dutch part)",syc:"Seychelles",syr:"Syrian Arab Republic",tca:"Turks and Caicos Islands (the)",tcd:"Chad",tgo:"Togo",tha:"Thailand",tjk:"Tajikistan",tkl:"Tokelau",tkm:"Turkmenistan",tls:"Timor-Leste",ton:"Tonga",tto:"Trinidad and Tobago",tun:"Tunisia",tur:"Turkey",tuv:"Tuvalu",twn:"Taiwan (Province of China)",tza:"Tanzania, United Republic of",uga:"Uganda",ukr:"Ukraine",umi:"United States Minor Outlying Islands (the)",ury:"Uruguay",usa:"United States of America (the)",uzb:"Uzbekistan",vat:"Holy See (the)",vct:"Saint Vincent and the Grenadines",ven:"Venezuela (Bolivarian Republic of)",vgb:"Virgin Islands (British)",vir:"Virgin Islands (U.S.)",vnm:"Viet Nam",vut:"Vanuatu",wlf:"Wallis and Futuna",wsm:"Samoa",yem:"Yemen",zaf:"South Africa",zmb:"Zambia",zwe:"Zimbabwe",zzz:"Others"},h=[{name:"keys",title:"",sortField:"keys",titleClass:"eight wide",callback:"keyFormat",width:"50%"},{name:"clicks",titleClass:"two wide",sortField:"clicks",width:"12.5%"},{name:"impressions",titleClass:"two wide",sortField:"impressions",width:"12.5%"},{name:"ctr",titleClass:"two wide",sortField:"ctr",callback:"ctrFormat",width:"12.5%"},{name:"position",titleClass:"two wide",sortField:"position",width:"12.5%"}],m={table:{tableWrapper:"table-responsive",tableHeaderClass:"fixed",tableBodyClass:"fixed",tableClass:"table-responsive",loadingClass:"loading",ascendingIcon:"dashicons dashicons-arrow-up",descendingIcon:"dashicons dashicons-arrow-down",ascendingClass:"sorted-asc",descendingClass:"sorted-desc",sortableIcon:"grey sort icon",handleIcon:"grey sidebar icon"},pagination:{wrapperClass:"pagination",activeClass:"active large",disabledClass:"disabled",pageClass:"item",linkClass:"icon item",paginationClass:"ui bottom attached segment grid",paginationInfoClass:"left floated left aligned six wide column",dropdownClass:"ui search dropdown",icons:{first:"dashicons dashicons-controls-back",prev:"dashicons dashicons-arrow-left-alt2",next:"dashicons dashicons-arrow-right-alt2",last:"dashicons dashicons-controls-forward"}},paginationInfo:{infoClass:"left floated left aligned six wide column"}},v=s(16),p=s.n(v),f={name:"Home",props:["dimension","filters","searchType","searchFor","dates"],data(){return{mycss:m,localData:[],perPage:10,dataCount:0,ranges:{"Last Week":[this.dayjs().startOf("week").subtract(6,"days"),this.dayjs().startOf("week")],"Last 28 Days":[this.dayjs().subtract(27,"days"),this.dayjs()],"Last Month":[this.dayjs().subtract(1,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 3 Months":[this.dayjs().subtract(3,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 6 Months":[this.dayjs().subtract(6,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 12 Months":[this.dayjs().subtract(12,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 16 Months":[this.dayjs().subtract(16,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")]},fields:h,columns:["clicks","ctr","impressions","keys","position"]}},mounted(){gapi.client.load("webmasters","v3").then((()=>{gapi.auth.setToken({access_token:this.$store.getters.config.token}),this.getData()})),this.$events.$on("refresh-table",(t=>this.getData())),this.$refs.vuetable.setData(this.localData)},watch:{localData(t,e){this.$refs.vuetable.refresh()}},methods:{keyFormat:t=>t[0],ctrFormat:t=>(100*t).toFixed(2)+"%",onPaginationData(t){this.$refs.pagination.setPaginationData(t)},onChangePage(t){this.$refs.vuetable.changePage(t)},dataManager(t,e){let s=this.localData;if(this.searchFor){let t=new RegExp(this.searchFor,"i");s=_.filter(s,(function(e){return e.keys[0].search(t)>=0}))}return t.length>0&&(s=_.orderBy(s,t[0].sortField,t[0].direction)),{pagination:e=s?this.$refs.vuetable.makePagination(s.length):"",data:_.slice(s,e.from-1,e.to)}},doFilter(){a.default.nextTick((()=>this.$refs.vuetable.refresh()))},onCellClicked(t,e,s){"country"==this.dimension&&(t.keys[0]=_.findKey(u,(function(e){return-1!==e.indexOf(t.keys[0])}))),this.localData=this.formatData([t]),this.$events.fire("add-filter",{dimension:this.dimension,operator:"equals",expression:t.keys[0]}),this.doFilter()},resetFilter(){this.searchFor="",this.$refs.vuetable.refresh()},setDate(t){this.startDate=this.dayjs(t.startDate).format("YYYY-MM-DD"),this.endDate=this.dayjs(t.endDate).format("YYYY-MM-DD"),this.getData()},formatData:t=>(_.forEach(t,(function(t){t.position=parseFloat(t.position).toFixed(2),null==t.keys[0]&&(t.keys[0]="")})),t),getData(){gapi.client.webmasters.searchanalytics.query({siteUrl:this.$store.getters.site,fields:"rows",rowLimit:null,searchType:this.searchType,startDate:this.dates.startDate,endDate:this.dates.endDate,dimensions:[this.dimension],dimensionFilterGroups:[{filters:this.filters}]}).then((t=>{"country"==this.dimension&&_.forEach(t.result.rows,(t=>{t.keys[0]=u[t.keys[0]]})),this.localData=this.formatData(t.result.rows)})).then(null,(function(t){console.log(t)}))}},components:{Vuetable:c.a,VuetablePagination:d.a}},g=(s(37),Object(n.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dashy-gsc-container"},[s("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,fields:t.fields,"data-total":t.dataCount,"data-manager":t.dataManager,"pagination-path":"pagination","per-page":t.perPage,css:t.mycss.table},on:{"vuetable:cell-clicked":t.onCellClicked,"vuetable:pagination-data":t.onPaginationData}}),t._v(" "),s("vuetable-pagination",{ref:"pagination",staticClass:"pull-right",attrs:{css:t.mycss.pagination},on:{"vuetable-pagination:change-page":t.onChangePage}}),t._v(" "),s("div",{staticClass:"paging pull-right"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.perPage,expression:"perPage"}],on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.perPage=e.target.multiple?s:s[0]},t.doFilter]}},[s("option",{domProps:{value:10}},[t._v("10")]),t._v(" "),s("option",{domProps:{value:25}},[t._v("25")]),t._v(" "),s("option",{domProps:{value:50}},[t._v("50")]),t._v(" "),s("option",{domProps:{value:100}},[t._v("100")])])])],1)}),[],!1,null,null,null).exports),b={props:["dates"],data(){return{selected:this.dates,selectedVcalendar:{start:this.dates.startDate,end:this.dates.endDate},ranges:[{label:"Last 28 Days",value:{startDate:this.dayjs().subtract(27,"days").format("YYYY-MM-DD"),endDate:this.dayjs(new Date).format("YYYY-MM-DD")}},{label:"Last Month",value:{startDate:this.dayjs().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 3 Months",value:{startDate:this.dayjs().subtract(3,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 6 Months",value:{startDate:this.dayjs().subtract(6,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 12 Months",value:{startDate:this.dayjs().subtract(12,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 16 Months",value:{startDate:this.dayjs().subtract(16,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}}]}},methods:{setDate(){this.$events.fire("set-date",this.selected)},setDateVcalendar(t){this.selected={startDate:this.dayjs(t.start).format("YYYY-MM-DD"),endDate:this.dayjs(t.end).format("YYYY-MM-DD")},this.setDate()}}},y=(Object(n.a)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("div",{staticClass:"input-container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"input-field",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selected=e.target.multiple?s:s[0]},t.setDate]}},[s("option",[t._v("Choose a daterange")]),t._v(" "),t._l(t.ranges,(function(e){return s("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])}))],2),t._v(" "),s("v-date-picker",{attrs:{columns:2,"max-date":new Date,mode:"range","show-caps":"",popover:{placement:"bottom-end",visibility:"click"}},on:{input:t.setDateVcalendar},model:{value:t.selectedVcalendar,callback:function(e){t.selectedVcalendar=e},expression:"selectedVcalendar"}},[s("button",{staticClass:"inputaddon-item pure-button pure-button-primary"},[s("i",{staticClass:"icon-calendar"})])])],1)])}),[],!1,null,null,null).exports,{data:()=>({isActive:!1,searchFor:""}),methods:{doFilter(){this.searchFor.length&&(this.isActive=!this.isActive),this.isActive||(this.searchFor=""),this.$events.fire("filter-setSearch",this.searchFor)},resetFilter(){this.$events.fire("filter-resetSearch")}}}),w=(s(38),Object(n.a)(y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"input-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchFor,expression:"searchFor"}],staticClass:"input-field",attrs:{type:"text",placeholder:"keyword"},domProps:{value:t.searchFor},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.doFilter(e))},input:function(e){e.target.composing||(t.searchFor=e.target.value)}}}),t._v(" "),s("span",{staticClass:"icon-field",on:{click:function(e){return e.preventDefault(),t.doFilter(e)}}},[s("i",{staticClass:"dashicons",class:{"dashicons-no":t.isActive,"dashicons-search":!t.isActive}})])])}),[],!1,null,null,null).exports),k={props:["dimension"],methods:{doFilter(t){this.$events.fire("set-dimension",t)}},components:{SearchBar:w}},C=(s(39),Object(n.a)(k,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"filter-bar"},[s("ul",[s("li",[s("a",{staticClass:"tabs",class:{active:"query"==t.dimension},on:{click:function(e){return t.doFilter("query")}}},[t._v("Query\n    ")])]),t._v(" "),s("li",[s("a",{staticClass:"tabs",class:{active:"page"==t.dimension},on:{click:function(e){return t.doFilter("page")}}},[t._v("Pages\n    ")])]),t._v(" "),s("li",[s("a",{staticClass:"tabs",class:{active:"country"==t.dimension},on:{click:function(e){return t.doFilter("country")}}},[t._v("Countries\n    ")])]),t._v(" "),s("li",[s("a",{staticClass:"tabs",class:{active:"device"==t.dimension},on:{click:function(e){return t.doFilter("device")}}},[t._v("Devices\n    ")])])]),t._v(" "),s("div",{staticClass:"bar-field"},[s("search-bar")],1)])}),[],!1,null,null,null).exports),D=s(5),x={directives:{onClickaway:D.directive},methods:{clickAway(){this.$emit("close")}}},M=(s(40),Object(n.a)(x,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.clickAway,expression:"clickAway"}],staticClass:"modal-container"},[t._t("header",[t._v("Header")]),t._v(" "),s("div",{staticClass:"modal-content"},[t._t("body",[t._v("Header")])],2),t._v(" "),s("div",{staticClass:"modal-footer"},[t._t("footer",[t._v("Header")])],2)],2)])])}),[],!1,null,null,null).exports),$={props:["searchType"],data(){return{search:this.searchType}}},S=Object(n.a)($,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"pure-form pure-form-stacked"},[s("fieldset",[s("div",{staticClass:"row"},[s("label",{attrs:{for:"web"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"radio",value:"web"},domProps:{checked:t._q(t.search,"web")},on:{change:function(e){t.search="web"}}}),t._v("\n          Web\n        ")])]),t._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"image"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"radio",value:"image"},domProps:{checked:t._q(t.search,"image")},on:{change:function(e){t.search="image"}}}),t._v("\n          Image\n        ")])]),t._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"video"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"radio",value:"video"},domProps:{checked:t._q(t.search,"video")},on:{change:function(e){t.search="video"}}}),t._v("\n          Video\n        ")])])])])}),[],!1,null,null,null).exports,A={data:()=>({device:null,filter:null}),methods:{setFilter(t){this.filter={dimension:"device",operator:"equals",expression:t}}}},F=Object(n.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",[s("fieldset",[s("div",{staticClass:"row"},[s("label",{attrs:{for:"desktop"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.device,expression:"device"}],attrs:{type:"radio",value:"desktop"},domProps:{checked:t._q(t.device,"desktop")},on:{change:[function(e){t.device="desktop"},function(e){return t.setFilter(t.device)}]}}),t._v("\n          Desktop\n        ")])]),t._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"mobile"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.device,expression:"device"}],attrs:{type:"radio",value:"mobile"},domProps:{checked:t._q(t.device,"mobile")},on:{change:[function(e){t.device="mobile"},function(e){return t.setFilter(t.device)}]}}),t._v("\n          Mobile\n        ")])]),t._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"tablet"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.device,expression:"device"}],attrs:{type:"radio",value:"tablet"},domProps:{checked:t._q(t.device,"tablet")},on:{change:[function(e){t.device="tablet"},function(e){return t.setFilter(t.device)}]}}),t._v("\n          Tablet\n        ")])])])])}),[],!1,null,null,null).exports,Y={data:()=>({isActive:!1,filter:{operator:"contains",dimension:"query"}})},j=Object(n.a)(Y,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"pure-form pure-form-stacked"},[s("fieldset",[s("div",{staticClass:"row"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.operator,expression:"filter.operator"}],staticClass:"regular-text",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filter,"operator",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"contains"}},[t._v("Queries containing")]),t._v(" "),s("option",{attrs:{value:"notContains"}},[t._v("Queries not containing")]),t._v(" "),s("option",{attrs:{value:"equals"}},[t._v("Query is exactly")])])]),t._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.expression,expression:"filter.expression"}],staticClass:"regular-text",attrs:{type:"text",required:"",placeholder:"keyword"},domProps:{value:t.filter.expression},on:{input:function(e){e.target.composing||t.$set(t.filter,"expression",e.target.value)}}}),t._v(" "),s("span",{staticClass:"pure-form-message"},[t._v("This is a required field.")])])])])}),[],!1,null,null,null).exports,T={data:()=>({isActive:!1,filter:{operator:"contains",dimension:"page"}})},P=Object(n.a)(T,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"pure-form pure-form-stacked"},[s("fieldset",[s("div",{staticClass:"row"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter.operator,expression:"filter.operator"}],staticClass:"regular-text",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.filter,"operator",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"contains"}},[t._v("URLs containing")]),t._v(" "),s("option",{attrs:{value:"notContains"}},[t._v("URLs not containing")]),t._v(" "),s("option",{attrs:{value:"equals"}},[t._v("URL is exactly")])])]),t._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.expression,expression:"filter.expression"}],staticClass:"regular-text",attrs:{type:"text",required:"",placeholder:"http://www.example.com/foo"},domProps:{value:t.filter.expression},on:{input:function(e){e.target.composing||t.$set(t.filter,"expression",e.target.value)}}}),t._v(" "),s("span",{staticClass:"pure-form-message"},[t._v("This is a required field.")])])])])}),[],!1,null,null,null).exports,O={mixins:[D.mixin],props:["dates","searchType","filters"],data:()=>({isActive:!1,drop:"",showModal:!1,showCloseIcon:!1,closeOnClickAway:!0,modalType:"",options:[{value:"queryForm",text:"Query"},{value:"pageForm",text:"Page"},{value:"deviceForm",text:"Device"}]}),mounted(){},methods:{showModalForm(t,e){e&&(t=t.dimension+"Form"),this.modalType=t,this.showModal=!0},sendValue(){"searchTypeModal"==this.$refs.myform.$options._componentTag?this.$events.fire("change-searchType",this.$refs.myform.search):this.$refs.myform.filter.expression&&this.$events.fire("add-filter",this.$refs.myform.filter),this.showModal=!1},resetFilter(t){let e=this.filters.indexOf(t);this.filters.splice(e,1),this.$events.fire("remove-filter",t)},openDropDown(){this.isActive=!this.isActive},onDateSelected(t){},away(){this.isActive=!1}},components:{mymodal:M,deviceForm:F,pageForm:P,queryForm:j,searchTypeModal:S}},R=(s(41),Object(n.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"custom-filters"},[s("li",[s("a",{staticClass:"filter-button",on:{click:function(e){return t.showModalForm("searchTypeModal")}}},[t._v("Search type:"+t._s(t.searchType)),s("i",{staticClass:"search icon"})])]),t._v(" "),t._l(t.filters,(function(e){return s("li",[s("a",{staticClass:"filter-button"},[s("span",{on:{click:function(s){return t.showModalForm(e,!0)}}},[t._v(t._s(e.dimension)+":"+t._s(e.expression))]),s("i",{staticClass:"dashicons dashicons-no",on:{click:function(s){return t.resetFilter(e)}}})])])})),t._v(" "),s("li",{staticClass:"dropdown",class:{active:t.isActive}},[s("a",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.away,expression:"away"}],staticClass:"pure-button pure-button-primary",on:{click:t.openDropDown}},[t._v("New "),s("i",{staticClass:"dashicons dashicons-plus"})]),t._v(" "),s("ul",{staticClass:"dropdown-content"},t._l(t.options,(function(e){return s("li",{staticClass:"item",on:{click:function(s){return t.showModalForm(e.value)}}},[s("a",[t._v(t._s(e.text))])])})),0)]),t._v(" "),s("transition",{attrs:{name:"modal"}},[t.showModal?s("mymodal",{on:{close:function(e){t.showModal=!1},clickAwayModal:function(e){t.showModal=!1}}},[s("h3",{attrs:{slot:"header"},slot:"header"},[t._v("Select a filter")]),t._v(" "),s("template",{slot:"body"},[s(t.modalType,{ref:"myform",tag:"component",attrs:{dates:t.dates,searchType:t.searchType}})],1),t._v(" "),s("template",{slot:"footer"},[s("a",{staticClass:"btn btn-danger",on:{click:function(e){t.showModal=!1}}},[t._v("\n          Cancel\n        ")]),t._v(" "),s("a",{staticClass:"btn btn-primary",on:{click:function(e){return t.sendValue()}}},[t._v("\n          Ok\n        ")])])],2):t._e()],1)],2)}),[],!1,null,null,null).exports),I={width:"100%",height:"400",colors:["#4285f4","#00bcd4","#009688","#673ab7"],smoothline:"true",focusTarget:"category",chartArea:{width:"100%",height:"80%"},hAxis:{gridlines:{count:0,minSpacing:150},minorGridlines:{count:0},showTextEvery:1,format:"MMM dd"},vAxis:{gridlines:{count:0,minSpacing:100},minorGridlines:{count:2},showTextEvery:2},vAxes:{0:{direction:-1,textPosition:"none"},1:{textPosition:"none"},2:{textPosition:"none"},3:{textPosition:"none"}},series:{0:{type:"line",targetAxisIndex:1,tooltip:!0},1:{type:"line",targetAxisIndex:2,tooltip:!0},2:{type:"line",targetAxisIndex:3,tooltip:!0},3:{type:"line",targetAxisIndex:0,tooltip:!0},4:{type:"line",targetAxisIndex:0,tooltip:!0}}},E={props:["dimension","filters","searchType","searchFor","dates"],data(){return{chartData:[],chartOptions:I,chartEvents:{select:t=>{const e=this.$refs.chart.chartObject;if(e.getSelection()[0].column){var s=e.getSelection()[0].column-1;I.series[s].tooltip=!I.series[s].tooltip,0==I.series[s].lineWidth?(I.series[s].lineWidth=2,I.series[s].areaOpacity=.3):(I.series[s].lineWidth=0,I.series[s].areaOpacity=0),e.draw(this.chartData,I)}}}}},mounted(){gapi.client.load("webmasters","v3").then((()=>{gapi.auth.setToken({access_token:this.$store.getters.config.token}),this.getData()}))},methods:{getData(){gapi.client.webmasters.searchanalytics.query({siteUrl:this.$store.getters.site,rowLimit:null,searchType:this.searchType,startDate:this.dates.startDate,endDate:this.dates.endDate,dimensions:["date"],dimensionFilterGroups:[{filters:this.filters}]}).then((t=>{this.chartData=this.formatData(t.result.rows)})).then(null,(function(t){console.log(t)}))},formatData(t){let e=this;var s=new google.visualization.DataTable;return s.addColumn("date","Keys"),s.addColumn("number","Clicks"),s.addColumn("number","Impressions"),s.addColumn("number","CTR"),s.addColumn("number","Position"),_.forEach(t,(function(t){s.addRow([e.dayjs(t.keys[0]).toDate(),t.clicks,t.impressions,100*t.ctr,parseFloat(t.position)])})),s}}},N=Object(n.a)(E,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"v-select"},[s("GChart",{ref:"chart",attrs:{type:"LineChart",data:t.chartData,options:t.chartOptions,events:t.chartEvents}})],1)}),[],!1,null,null,null).exports,B=s(30),L=s.n(B),z=(s(42),{mixins:[D.mixin],props:["presets"],computed:{outputRange(){if(this.selectedRange.length>1)return this.selectedRange?this.start.format("MMM D YYYY")+" - "+this.end.format("MMM D YYYY"):""}},data:()=>({currentMonthDate:dayjs(),month:[],prevMonth:[],monthNames:[],start:dayjs().add(-28,"days"),end:dayjs(),selectedRange:[],maxDate:dayjs(),minDate:dayjs().add(-60,"days"),isActive:!1}),mounted(){dayjs.extend(L.a),dayjs.locale("en"),this.monthNames=dayjs().localeData().weekdaysMin(),this.getMonths(dayjs().startOf("month")),this.selectedRange=[this.start,this.end]},methods:{openDropDown(){this.isActive=!this.isActive},send(){this.$events.fire("update-range",{start:this.start.format("YYYY-MM-DD"),end:this.end.format("YYYY-MM-DD")}),this.openDropDown()},isSelected(t){return!(!t.isBefore(this.end,"day")||!t.isAfter(this.start,"day"))||!(!t.isSame(this.start,"day")&&!t.isSame(this.end,"day"))},isAfter(t){return!t.isAfter(this.maxDate,"day")},isBefore(t){return!t.isBefore(this.minDate,"day")},isSelectedRange(t){return!(!t.isSame(this.start,"day")&&!t.isSame(this.end,"day"))},column(t){if(0==t)return this.month[0].day()+1},column2(t){if(0==t)return this.prevMonth[0].day()+1},next(){let t=dayjs(this.month[1]).add(1,"months").startOf("month");this.getMonths(t)},prev(){let t=dayjs(this.month[1]).add(-1,"months").startOf("month");this.getMonths(t)},getMonths(t){this.currentMonthDate=t,this.month=[...Array(t.daysInMonth())].map(((e,s)=>t.clone().add(s,"day"))),this.prevMonth=[...Array(t.subtract(1,"months").daysInMonth())].map(((e,s)=>t.subtract(1,"months").clone().add(s,"day")))},setRange(t){this.selectedRange.length>1&&this.clean(),this.selectedRange.length>0?this.end=t:this.start=t,this.$set(t,"selected",!t.selected),this.selectedRange.push(t),this.selectedRange.length>1&&(this.checkRange(),this.start=this.selectedRange[0],this.end=this.selectedRange[1])},selectDay(t){t.isBefore(this.start)&&this.$set(t,"selected",!value.selected)},checkDate(t){return!t.isAfter(this.maxDate,"day")&&(!t.isBefore(this.minDate,"day")&&void this.setRange(t))},checkRange(){this.selectedRange[1].isBefore(this.selectedRange[0])&&this.selectedRange.reverse()},setPresets(t){this.start=t.value.start,this.end=t.value.end},clean(){this.selectedRange=[],this.start="",this.end=""},away(){this.isActive=!1}}}),V=(s(43),{name:"SearchConsole",data(){return{dates:{startDate:this.dayjs().subtract(27,"days").format("YYYY-MM-DD"),endDate:this.dayjs(new Date).format("YYYY-MM-DD")},dimension:"query",searchFor:"",searchType:"web",filters:[],ranges:[{label:"Last Week",value:{start:dayjs().startOf("week").subtract(6,"days"),end:dayjs().startOf("week")}},{label:"Last 28 Days",value:{start:dayjs().subtract(27,"days"),end:dayjs()}},{label:"Last Month",value:{start:dayjs().subtract(1,"month").startOf("month"),end:dayjs().subtract(1,"month").endOf("month")}},{label:"Last 3 Months",value:{start:dayjs().subtract(3,"month").startOf("month"),end:dayjs().subtract(1,"month").endOf("month")}}]}},mounted(){this.$events.$on("update-range",(t=>this.setDate(t))),this.$events.$on("set-dimension",(t=>this.setDimension(t))),this.$events.$on("remove-filter",(t=>this.removeFilter(t))),this.$events.$on("add-filter",(t=>this.setFilter(t))),this.$events.$on("change-searchType",(t=>this.setSearchType(t))),this.$events.$on("filter-setSearch",(t=>this.onFilterSetSearch(t))),this.$events.$on("filter-resetSearch",(t=>this.onFilterResetSearch()))},methods:{getData(){a.default.nextTick((()=>{this.$refs.table.getData(),this.$refs.chart.getData()}))},doFilter(){a.default.nextTick((()=>this.$refs.table.$refs.vuetable.refresh()))},setSearchType(t){this.searchType=t,this.getData()},onFilterSetSearch(t){this.searchFor=t,this.doFilter()},onFilterResetSearch(){this.searchFor="",this.doFilter()},setFilter(t){var e=_.findIndex(this.filters,{dimension:t.dimension});e?this.filters.push(t):this.filters.splice(e,1,t),this.getData()},removeFilter(t){_.remove(this.filters,t),this.getData()},setDimension(t){this.dimension=t,this.getData()},setDate(t){this.dates={startDate:t.start,endDate:t.end},this.getData()}},components:{Chart:N,FilterTabs:C,SearchBar:w,CustomFilters:R,Table:g,DateRange:Object(n.a)(z,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.away,expression:"away"}],staticClass:"bar-field datedropdown",class:{active:t.isActive}},[s("div",{staticClass:"input-container",on:{click:function(e){return t.openDropDown()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.outputRange,expression:"outputRange"}],staticClass:"input-field",attrs:{type:"text",disabled:""},domProps:{value:t.outputRange},on:{input:function(e){e.target.composing||(t.outputRange=e.target.value)}}}),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"datedropdown-content"},[s("div",{staticClass:"dropdown-panel"},[s("div",{staticClass:"presets-container"},[s("ul",t._l(t.presets,(function(e){return s("li",[s("a",{on:{click:function(s){return t.setPresets(e)}}},[t._v(t._s(e.label))])])})),0),t._v(" "),s("div",{staticClass:"calendar-buttons"},[s("a",{staticClass:"btn btn-danger",on:{click:t.away}},[t._v("Cancel")]),t._v(" "),s("a",{staticClass:"btn btn-primary",on:{click:function(e){return t.send()}}},[t._v("Apply")])])]),t._v(" "),s("div",{staticClass:"calendar-container"},[s("div",{staticClass:"calendar"},[s("div",{staticClass:"toolbar"},[s("div",[s("a",{on:{click:t.prev}},[s("i",{staticClass:"dashicons dashicons-arrow-left-alt2"})])]),t._v(" "),s("div",[t._v(t._s(t.currentMonthDate.subtract(1,"months").format("MMM")))]),t._v(" "),s("div",[s("a",{on:{click:t.next}},[s("i",{staticClass:"dashicons dashicons-arrow-right-alt2"})])])]),t._v(" "),s("div",{staticClass:"calendar-grids"},[t._l(t.monthNames,(function(e){return s("div",[s("b",[t._v(t._s(e))])])})),t._v(" "),t._l(t.prevMonth,(function(e,a){return s("div",{class:[t.isSelected(e)?"highlight":"",t.isSelectedRange(e)?"range":"",t.isAfter(e)?"":"disabled",t.isBefore(e)?"":"disabled"],style:{gridColumn:t.column2(a)}},[s("a",{on:{click:function(s){return t.checkDate(e)}}},[t._v(t._s(e.format("D")))])])}))],2)]),t._v(" "),s("div",{staticClass:"calendar"},[s("div",{staticClass:"toolbar"},[s("div",[s("a",{on:{click:t.prev}},[s("i",{staticClass:"dashicons dashicons-arrow-left-alt2"})])]),t._v(" "),s("div",[t._v(t._s(t.currentMonthDate.format("MMM")))]),t._v(" "),s("div",[s("a",{on:{click:t.next}},[s("i",{staticClass:"dashicons dashicons-arrow-right-alt2"})])])]),t._v(" "),s("div",{staticClass:"calendar-grids"},[t._l(t.monthNames,(function(e){return s("div",[s("b",[t._v(t._s(e))])])})),t._v(" "),t._l(t.month,(function(e,a){return s("div",{class:[t.isSelected(e)?"highlight":"",t.isSelectedRange(e)?"range":"",t.isAfter(e)?"":"disabled",t.isBefore(e)?"":"disabled"],style:{gridColumn:t.column(a)}},[s("a",{on:{click:function(s){return t.checkDate(e)}}},[t._v(t._s(e.format("D")))])])}))],2)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon-field"},[e("i",{staticClass:"dashicons dashicons-calendar-alt"})])}],!1,null,null,null).exports}}),q={beforeRouteEnter:(t,e,s)=>{s((t=>{t.$store.getters.config.token&&t.$store.getters.config.site||s("/settings")}))},data:()=>({loaded:!1}),mounted(){this.loaded=!0},components:{SearchConsole:Object(n.a)(V,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pure-g"},[s("div",[s("Chart",{ref:"chart",attrs:{dates:t.dates,filters:t.filters}})],1),t._v(" "),s("div",{staticClass:"filter-bar"},[s("custom-filters",{attrs:{searchType:t.searchType,dates:t.dates,filters:t.filters}}),t._v(" "),s("date-range",{attrs:{presets:t.ranges}})],1),t._v(" "),s("filter-tabs",{attrs:{dimension:t.dimension}}),t._v(" "),s("Table",{ref:"table",attrs:{dimension:t.dimension,filters:t.filters,searchFor:t.searchFor,searchType:t.searchType,dates:t.dates}})],1)}),[],!1,null,null,null).exports}},G=Object(n.a)(q,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-console"},[t.loaded?s("search-console"):t._e()],1)}),[],!1,null,null,null).exports,U={name:"Advanced",data(){return{show:this.$store.getters.settings.custom_credentials,settings:this.$store.getters.settings,showSpinner:!1,webmasters:this.$store.getters.webmasters}},computed:{token(){return this.$store.getters.token}},methods:{validate(){this.show=!this.show,this.settings.reset_token=!this.settings.reset_token},getToken(){this.axios.post("/token",{code:this.code}).then((t=>{this.$store.commit("setToken",t.data.access_token),this.getSites()}))},setSelected(t){console.log(event.target.value),event.target.value?(this.$store.commit("setSite",event.target.value),this.getVerification()):this.site=""},getVerification(){if(this.webmasters.siteVerification&&this.webmasters.site.length){this.showSpinner=!0;let t=this;gapi.client.load("siteVerification","v1").then((function(e){gapi.auth.setToken({access_token:t.token}),gapi.client.siteVerification.webResource.getToken({verificationMethod:"META",site:{identifier:t.$store.getters.site.replace("sc-domain:",""),type:"SITE"}}).then((function(e){t.webmasters.meta=e.result.token,t.showSpinner=!1}))}))}},revoke(){this.axios.delete("/token").then((t=>{this.$store.dispatch("initialize")}))}}},H=Object(n.a)(U,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.webmasters.siteVerification,expression:"webmasters.siteVerification"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.webmasters.siteVerification)?t._i(t.webmasters.siteVerification,null)>-1:t.webmasters.siteVerification},on:{change:[function(e){var s=t.webmasters.siteVerification,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&t.$set(t.webmasters,"siteVerification",s.concat([null])):n>-1&&t.$set(t.webmasters,"siteVerification",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.webmasters,"siteVerification",i)},t.getVerification]}}),t._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:t.showSpinner,expression:"showSpinner"}],staticClass:"dashicons dashicons-update spin"})])]),t._v(" "),s("div",{staticClass:"row"},[t._m(1),t._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.webmasters.meta,expression:"webmasters.meta"}],staticClass:"regular-text",attrs:{type:"text"},domProps:{value:t.webmasters.meta},on:{input:function(e){e.target.composing||t.$set(t.webmasters,"meta",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"row"},[t._m(2),t._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.custom_credentials,expression:"settings.custom_credentials"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.settings.custom_credentials)?t._i(t.settings.custom_credentials,null)>-1:t.settings.custom_credentials},on:{change:[function(e){var s=t.settings.custom_credentials,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&t.$set(t.settings,"custom_credentials",s.concat([null])):n>-1&&t.$set(t.settings,"custom_credentials",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.settings,"custom_credentials",i)},function(e){return t.validate()}]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.reset_token,expression:"settings.reset_token"}],staticClass:"hidden",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.settings.reset_token)?t._i(t.settings.reset_token,null)>-1:t.settings.reset_token},on:{change:function(e){var s=t.settings.reset_token,a=e.target,i=!!a.checked;if(Array.isArray(s)){var n=t._i(s,null);a.checked?n<0&&t.$set(t.settings,"reset_token",s.concat([null])):n>-1&&t.$set(t.settings,"reset_token",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.settings,"reset_token",i)}}})])]),t._v(" "),t.show?s("div",[s("div",{staticClass:"row"},[t._m(3),t._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.credentials.clientId,expression:"settings.credentials.clientId"}],staticClass:"pure-input-1-4",attrs:{type:"text"},domProps:{value:t.settings.credentials.clientId},on:{input:function(e){e.target.composing||t.$set(t.settings.credentials,"clientId",e.target.value)}}}),t._v(" "),s("span",[t._v("Please go to Analytics settings to set up your view")])])]),t._v(" "),s("div",{staticClass:"row"},[t._m(4),t._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.credentials.clientSecret,expression:"settings.credentials.clientSecret"}],staticClass:"pure-input-1-4",attrs:{type:"text"},domProps:{value:t.settings.credentials.clientSecret},on:{input:function(e){e.target.composing||t.$set(t.settings.credentials,"clientSecret",e.target.value)}}}),t._v(" "),s("span",[t._v("Please go to Search Console settings to set up your site")])])]),t._v(" "),s("div",{staticClass:"row"},[t._m(5),t._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.credentials.redirectUri,expression:"settings.credentials.redirectUri"}],staticClass:"pure-input-1-4",attrs:{type:"text"},domProps:{value:t.settings.credentials.redirectUri},on:{input:function(e){e.target.composing||t.$set(t.settings.credentials,"redirectUri",e.target.value)}}}),t._v(" "),s("span",[t._v("Please go to Search Console settings to set up your site")])])])]):t._e()])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Add verification to site?")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Verification meta")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Custom credentials")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Client ID")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Client secret")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Redirect url")])])}],!1,null,null,null).exports,K={name:"Basic",data(){return{selected:"",sites:[],code:"",config:this.$store.getters.config,settings:this.$store.getters.settings,webmasters:this.$store.getters.webmasters,showWebmasters:!1}},mounted(){gapi.client.load("webmasters","v3").then((()=>{gapi.auth.setToken({access_token:this.token}),this.token&&this.getSites()}))},computed:{token(){return this.$store.getters.token}},methods:{authenticate(){this.settings.custom_credentials?window.open(this.settings.credentials.redirectUri,"_blank"):window.open(this.$store.getters.config.authUrl,"","width=400,height=600")},getToken(){this.axios.post("/token",{code:this.code}).then((t=>{this.$store.commit("setToken",t.data.access_token)}))},setSelected(t){event.target.value?this.$store.commit("setSite",event.target.value):this.site=""},getSites(){let t=this;this.token&&(gapi.auth.setToken({access_token:this.token}),gapi.client.webmasters.sites.list().then((e=>{_.forEach(e.result.siteEntry,(function(e){t.sites.push(e.siteUrl)})),t.site||(t.site=e.result.siteEntry[0])})))},revoke(){this.axios.delete("/token").then((t=>{this.$store.commit("setToken",""),this.code=""}))}}},W={computed:{settings(){return this.$store.getters.settings}},data:()=>({tabs:["Basic","Advanced"],selected:"Basic",spin:!1,loaded:!1}),mounted(){this.axios.get("/settings").then((t=>t.data)).then((t=>{this.$store.commit("setSettings",t),this.loaded=!0}))},methods:{storeSettings(){let t=this,e=this.$store.getters.settings;t.spinner(),this.axios.post("/settings",{settings:e}).then((()=>{t.spinner(),t.showMessage()}))},spinner(){this.spin=!this.spin},showMessage(){this.$notify({group:"settings",title:"Settings saved"})}},components:{Basic:Object(n.a)(K,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.token?t._e():s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"fields"},[s("button",{staticClass:"button button-primary",on:{click:function(e){return t.authenticate()}}},[t._v("Get Google Authorization Code")])])]),t._v(" "),t.token?t._e():s("div",{staticClass:"row"},[t._m(1),t._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"regular-text",attrs:{type:"text"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),s("button",{staticClass:"button button-primary",attrs:{disabled:!t.code},on:{click:function(e){return e.preventDefault(),t.getToken(e)}}},[t._v("Authenticate")]),t._v(" "),s("br"),t._v(" "),s("span",{staticClass:"descriptionss"},[t._v("Paste here the response code and then click Authenticate button to receive your token.")])])]),t._v(" "),t.token?s("div",[s("div",{staticClass:"row"},[t._m(2),t._v(" "),s("div",{staticClass:"fields"},[s("button",{staticClass:"pure-button button-secondary",on:{click:function(e){return t.revoke()}}},[t._v("Revoke access")])])]),t._v(" "),s("div",{staticClass:"row"},[t._m(3),t._v(" "),s("div",{staticClass:"fields"},[s("div",{staticClass:"select-site"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.webmasters.site,expression:"webmasters.site"}],attrs:{label:"siteUrl"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.webmasters,"site",e.target.multiple?s:s[0])},t.setSelected]}},[s("option",[t._v("Select here")]),t._v(" "),t._l(t.sites,(function(e){return s("option",[t._v(t._s(e))])}))],2)]),t._v(" "),t.showWebmasters?s("span",[t._v(t._s(t.config.site))]):t._e()])])]):t._e()])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Authorize")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Request access token")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Revoke token")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"description"},[s("b",[t._v("Choose site")])])}],!1,null,null,null).exports,Advanced:H}},J=(s(44),Object(n.a)(W,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"settings"},[s("h1",[t._v("Settings")]),t._v(" "),s("h1",{staticClass:"nav-tab-wrapper"},t._l(t.tabs,(function(e){return s("a",{key:e,staticClass:"nav-tab",class:{"nav-tab-active":t.selected==e},on:{click:function(s){t.selected=e}}},[t._v("\n\t\t\t\t"+t._s(e)+"\n\t\t\t")])})),0),t._v(" "),s("br"),t._v(" "),t.loaded?s(t.selected,{tag:"component"}):t._e(),t._v(" "),s("div",{staticClass:"pure-g form-div"},[s("div",{staticClass:"pure-u-1-5 row"}),t._v(" "),s("div",{staticClass:"pure-u-4-5 row"},[s("button",{staticClass:"button button-primary",on:{click:function(e){return t.storeSettings()}}},[t._v("\n\t\t\t\t\tSave settings "),t.spin?s("i",{staticClass:"dashicons dashicons-update spin"}):t._e()])])])],1)}),[],!1,null,null,null).exports);a.default.use(o.a);var Q=new o.a({routes:[{path:"/",name:"SearchConsole",component:G},{path:"/settings",name:"Settings",component:J}]});var Z=function(t){var e=jQuery;let s=e("#toplevel_page_"+t),a=window.location.href,i=a.substr(a.indexOf("admin.php"));s.on("click","a",(function(){var t=e(this);e("ul.wp-submenu li",s).removeClass("current"),t.hasClass("wp-has-submenu")?e("li.wp-first-item",s).addClass("current"):t.parents("li").addClass("current")})),e("ul.wp-submenu a",s).each((function(t,s){e(s).attr("href")!==i||e(s).parent().addClass("current")}))},X=s(3),tt=s.n(X),et=(s(61),s(18)),st=s.n(et),at=s(19);var it={state:{config:{},loading:!1},mutations:{setConfig(t,e){t.config=e},setProfile(t,e){t.config.profile=e},setSite(t,e){t.config.site=e},setToken(t,e){t.config.token=e}},getters:{config:t=>t.config,authUrl:t=>t.config.authUrl,site:t=>t.config.site,token:t=>t.config.token,profile:t=>t.config.profile},actions:{}};var nt={state:{settings:{analytics:{account:"",webprop:"",profile:"",settings:{}},webmasters:{site:"",siteVerification:"",meta:""},credentials:{}},loading:!1},mutations:{setSettings(t,e){t.settings=_.merge(t.settings,e)},setAnalytics(t,e){t.settings.analytics=e},setWebmasters(t,e){t.settings.webmasters=e}},getters:{settings:t=>t.settings,analytics:t=>t.settings.analytics,webmasters:t=>t.settings.webmasters},actions:{initialize(){tt.a.get("/settings").then((t=>t.data)).then((t=>{this.commit("setSettings",t)}))},storeSettings(){tt.a.post("/settings",{settings:state.settings})}}};a.default.use(at.a);var rt=new at.a.Store({modules:{config:it,settings:nt}}),ot=s(31),lt=s(32),ct=s.n(lt);window.dayjs=st.a,window.axios=tt.a,tt.a.defaults.headers.common={"X-WP-Nonce":_nonce},tt.a.interceptors.response.use((t=>t),(function(t){if(t.config.hasOwnProperty("errorHandle")&&!1===t.config.errorHandle)return Promise.reject(t);t.response&&a.default.notify({group:"errors",title:"Error message",type:"error",text:t.response.data.message})})),tt.a.defaults.baseURL=sc_baseurl.siteurl+"/wp-json/searchconsole/api",a.default.config.productionTip=!1,a.default.prototype.$http=tt.a,a.default.prototype.axios=tt.a,a.default.prototype.dayjs=st.a,a.default.use(p.a),a.default.use(ot.default),a.default.use(ct.a),gapi.load("client",(()=>{tt.a.get("/config").then((t=>t.data)).then((t=>{rt.commit("setConfig",t),new a.default({el:"#vue-admin-app",router:Q,store:rt,render:t=>t(r)})}))})),Z("search-console")}],[[63,0,3]]]);