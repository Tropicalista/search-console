(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,,,,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";var a=s(7);s.n(a).a},,function(e,t,s){"use strict";var a=s(8);s.n(a).a},function(e,t,s){"use strict";var a=s(9);s.n(a).a},function(e,t,s){"use strict";var a=s(10);s.n(a).a},function(e,t,s){"use strict";var a=s(11);s.n(a).a},function(e,t,s){"use strict";var a=s(12);s.n(a).a},,function(e,t,s){"use strict";var a=s(13);s.n(a).a},function(e,t,s){"use strict";var a=s(14);s.n(a).a},,,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";s.r(t);var a=s(1),i={name:"App",created(){gapi.auth.setToken({access_token:this.$store.getters.config.token})}},n=(s(35),s(0)),r=Object(n.a)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dashy-dashboard"},[s("notifications",{attrs:{group:"errors",position:"center"}}),e._v(" "),s("notifications",{attrs:{group:"settings",position:"center"}}),e._v(" "),s("router-view")],1)}),[],!1,null,null,null).exports,o=s(17),l=s(29),c=s.n(l),d=s(33),u={abw:"Aruba",afg:"Afghanistan",ago:"Angola",aia:"Anguilla",ala:"Åland Islands",alb:"Albania",and:"Andorra",are:"United Arab Emirates (the)",arg:"Argentina",arm:"Armenia",asm:"American Samoa",ata:"Antarctica",atf:"French Southern Territories (the)",atg:"Antigua and Barbuda",aus:"Australia",aut:"Austria",aze:"Azerbaijan",bdi:"Burundi",bel:"Belgium",ben:"Benin",bes:"Bonaire, Sint Eustatius and Saba",bfa:"Burkina Faso",bgd:"Bangladesh",bgr:"Bulgaria",bhr:"Bahrain",bhs:"Bahamas (the)",bih:"Bosnia and Herzegovina",blm:"Saint Barthélemy",blr:"Belarus",blz:"Belize",bmu:"Bermuda",bol:"Bolivia (Plurinational State of)",bra:"Brazil",brb:"Barbados",brn:"Brunei Darussalam",btn:"Bhutan",bvt:"Bouvet Island",bwa:"Botswana",caf:"Central African Republic (the)",can:"Canada",cck:"Cocos (Keeling) Islands (the)",che:"Switzerland",chl:"Chile",chn:"China",civ:"Côte d'Ivoire",cmr:"Cameroon",cod:"Congo (the Democratic Republic of the)",cog:"Congo (the)",cok:"Cook Islands (the)",col:"Colombia",com:"Comoros (the)",cpv:"Cabo Verde",cri:"Costa Rica",cub:"Cuba",cuw:"Curaçao",cxr:"Christmas Island",cym:"Cayman Islands (the)",cyp:"Cyprus",cze:"Czechia",deu:"Germany",dji:"Djibouti",dma:"Dominica",dnk:"Denmark",dom:"Dominican Republic (the)",dza:"Algeria",ecu:"Ecuador",egy:"Egypt",eri:"Eritrea",esh:"Western Sahara*",esp:"Spain",est:"Estonia",eth:"Ethiopia",fin:"Finland",fji:"Fiji",flk:"Falkland Islands (the) [Malvinas]",fra:"France",fro:"Faroe Islands (the)",fsm:"Micronesia (Federated States of)",gab:"Gabon",gbr:"United Kingdom of Great Britain and Northern Ireland (the)",geo:"Georgia",ggy:"Guernsey",gha:"Ghana",gib:"Gibraltar",gin:"Guinea",glp:"Guadeloupe",gmb:"Gambia (the)",gnb:"Guinea-Bissau",gnq:"Equatorial Guinea",grc:"Greece",grd:"Grenada",grl:"Greenland",gtm:"Guatemala",guf:"French Guiana",gum:"Guam",guy:"Guyana",hkg:"Hong Kong",hmd:"Heard Island and McDonald Islands",hnd:"Honduras",hrv:"Croatia",hti:"Haiti",hun:"Hungary",idn:"Indonesia",imn:"Isle of Man",ind:"India",iot:"British Indian Ocean Territory (the)",irl:"Ireland",irn:"Iran (Islamic Republic of)",irq:"Iraq",isl:"Iceland",isr:"Israel",ita:"Italy",jam:"Jamaica",jey:"Jersey",jor:"Jordan",jpn:"Japan",kaz:"Kazakhstan",ken:"Kenya",kgz:"Kyrgyzstan",khm:"Cambodia",kir:"Kiribati",kna:"Saint Kitts and Nevis",kor:"Korea (the Republic of)",kwt:"Kuwait",lao:"Lao People's Democratic Republic (the)",lbn:"Lebanon",lbr:"Liberia",lby:"Libya",lca:"Saint Lucia",lie:"Liechtenstein",lka:"Sri Lanka",lso:"Lesotho",ltu:"Lithuania",lux:"Luxembourg",lva:"Latvia",mac:"Macao",maf:"Saint Martin (French part)",mar:"Morocco",mco:"Monaco",mda:"Moldova (the Republic of)",mdg:"Madagascar",mdv:"Maldives",mex:"Mexico",mhl:"Marshall Islands (the)",mkd:"Macedonia (the former Yugoslav Republic of)",mli:"Mali",mlt:"Malta",mmr:"Myanmar",mne:"Montenegro",mng:"Mongolia",mnp:"Northern Mariana Islands (the)",moz:"Mozambique",mrt:"Mauritania",msr:"Montserrat",mtq:"Martinique",mus:"Mauritius",mwi:"Malawi",mys:"Malaysia",myt:"Mayotte",nam:"Namibia",ncl:"New Caledonia",ner:"Niger (the)",nfk:"Norfolk Island",nga:"Nigeria",nic:"Nicaragua",niu:"Niue",nld:"Netherlands (the)",nor:"Norway",npl:"Nepal",nru:"Nauru",nzl:"New Zealand",omn:"Oman",pak:"Pakistan",pan:"Panama",pcn:"Pitcairn",per:"Peru",phl:"Philippines (the)",plw:"Palau",png:"Papua New Guinea",pol:"Poland",pri:"Puerto Rico",prk:"Korea (the Democratic People's Republic of)",prt:"Portugal",pry:"Paraguay",pse:"Palestine, State of",pyf:"French Polynesia",qat:"Qatar",reu:"Réunion",rou:"Romania",rus:"Russian Federation (the)",rwa:"Rwanda",sau:"Saudi Arabia",sdn:"Sudan (the)",sen:"Senegal",sgp:"Singapore",sgs:"South Georgia and the South Sandwich Islands",shn:"Saint Helena, Ascension and Tristan da Cunha",sjm:"Svalbard and Jan Mayen",slb:"Solomon Islands",sle:"Sierra Leone",slv:"El Salvador",smr:"San Marino",som:"Somalia",spm:"Saint Pierre and Miquelon",srb:"Serbia",ssd:"South Sudan",stp:"Sao Tome and Principe",sur:"Suriname",svk:"Slovakia",svn:"Slovenia",swe:"Sweden",swz:"Swaziland",sxm:"Sint Maarten (Dutch part)",syc:"Seychelles",syr:"Syrian Arab Republic",tca:"Turks and Caicos Islands (the)",tcd:"Chad",tgo:"Togo",tha:"Thailand",tjk:"Tajikistan",tkl:"Tokelau",tkm:"Turkmenistan",tls:"Timor-Leste",ton:"Tonga",tto:"Trinidad and Tobago",tun:"Tunisia",tur:"Turkey",tuv:"Tuvalu",twn:"Taiwan (Province of China)",tza:"Tanzania, United Republic of",uga:"Uganda",ukr:"Ukraine",umi:"United States Minor Outlying Islands (the)",ury:"Uruguay",usa:"United States of America (the)",uzb:"Uzbekistan",vat:"Holy See (the)",vct:"Saint Vincent and the Grenadines",ven:"Venezuela (Bolivarian Republic of)",vgb:"Virgin Islands (British)",vir:"Virgin Islands (U.S.)",vnm:"Viet Nam",vut:"Vanuatu",wlf:"Wallis and Futuna",wsm:"Samoa",yem:"Yemen",zaf:"South Africa",zmb:"Zambia",zwe:"Zimbabwe",zzz:"Others"},h=[{name:"keys",title:"",sortField:"keys",titleClass:"eight wide",callback:"keyFormat",width:"50%"},{name:"clicks",titleClass:"two wide",sortField:"clicks",width:"12.5%"},{name:"impressions",titleClass:"two wide",sortField:"impressions",width:"12.5%"},{name:"ctr",titleClass:"two wide",sortField:"ctr",callback:"ctrFormat",width:"12.5%"},{name:"position",titleClass:"two wide",sortField:"position",width:"12.5%"}],m={table:{tableWrapper:"table-responsive",tableHeaderClass:"fixed",tableBodyClass:"fixed",tableClass:"table-responsive",loadingClass:"loading",ascendingIcon:"dashicons dashicons-arrow-up",descendingIcon:"dashicons dashicons-arrow-down",ascendingClass:"sorted-asc",descendingClass:"sorted-desc",sortableIcon:"grey sort icon",handleIcon:"grey sidebar icon"},pagination:{wrapperClass:"pagination",activeClass:"active large",disabledClass:"disabled",pageClass:"item",linkClass:"icon item",paginationClass:"ui bottom attached segment grid",paginationInfoClass:"left floated left aligned six wide column",dropdownClass:"ui search dropdown",icons:{first:"dashicons dashicons-controls-back",prev:"dashicons dashicons-arrow-left-alt2",next:"dashicons dashicons-arrow-right-alt2",last:"dashicons dashicons-controls-forward"}},paginationInfo:{infoClass:"left floated left aligned six wide column"}},v=s(16),p=s.n(v),f={name:"Home",props:["dimension","filters","searchType","searchFor","dates"],data(){return{mycss:m,localData:[],perPage:10,dataCount:0,ranges:{"Last Week":[this.dayjs().startOf("week").subtract(6,"days"),this.dayjs().startOf("week")],"Last 28 Days":[this.dayjs().subtract(27,"days"),this.dayjs()],"Last Month":[this.dayjs().subtract(1,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 3 Months":[this.dayjs().subtract(3,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 6 Months":[this.dayjs().subtract(6,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 12 Months":[this.dayjs().subtract(12,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")],"Last 16 Months":[this.dayjs().subtract(16,"month").startOf("month"),this.dayjs().subtract(1,"month").endOf("month")]},fields:h,columns:["clicks","ctr","impressions","keys","position"]}},mounted(){gapi.client.load("webmasters","v3").then((()=>{gapi.auth.setToken({access_token:this.$store.getters.config.token}),this.getData()})),this.$events.$on("refresh-table",(e=>this.getData())),this.$refs.vuetable.setData(this.localData)},watch:{localData(e,t){this.$refs.vuetable.refresh()}},methods:{keyFormat:e=>e[0],ctrFormat:e=>(100*e).toFixed(2)+"%",onPaginationData(e){this.$refs.pagination.setPaginationData(e)},onChangePage(e){this.$refs.vuetable.changePage(e)},dataManager(e,t){let s=this.localData;if(this.searchFor){let e=new RegExp(this.searchFor,"i");s=_.filter(s,(function(t){return t.keys[0].search(e)>=0}))}return e.length>0&&(s=_.orderBy(s,e[0].sortField,e[0].direction)),{pagination:t=s?this.$refs.vuetable.makePagination(s.length):"",data:_.slice(s,t.from-1,t.to)}},doFilter(){a.default.nextTick((()=>this.$refs.vuetable.refresh()))},onCellClicked(e,t,s){"country"==this.dimension&&(e.keys[0]=_.findKey(u,(function(t){return-1!==t.indexOf(e.keys[0])}))),this.localData=this.formatData([e]),this.$events.fire("add-filter",{dimension:this.dimension,operator:"equals",expression:e.keys[0]}),this.doFilter()},resetFilter(){this.searchFor="",this.$refs.vuetable.refresh()},setDate(e){this.startDate=this.dayjs(e.startDate).format("YYYY-MM-DD"),this.endDate=this.dayjs(e.endDate).format("YYYY-MM-DD"),this.getData()},formatData:e=>(_.forEach(e,(function(e){e.position=parseFloat(e.position).toFixed(2),null==e.keys[0]&&(e.keys[0]="")})),e),getData(){gapi.client.webmasters.searchanalytics.query({siteUrl:this.$store.getters.site,fields:"rows",rowLimit:null,searchType:this.searchType,startDate:this.dates.startDate,endDate:this.dates.endDate,dimensions:[this.dimension],dimensionFilterGroups:[{filters:this.filters}]}).then((e=>{"country"==this.dimension&&_.forEach(e.result.rows,(e=>{e.keys[0]=u[e.keys[0]]})),this.localData=this.formatData(e.result.rows)})).then(null,(function(e){console.log(e)}))}},components:{Vuetable:c.a,VuetablePagination:d.a}},g=(s(37),Object(n.a)(f,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dashy-gsc-container"},[s("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,fields:e.fields,"data-total":e.dataCount,"data-manager":e.dataManager,"pagination-path":"pagination","per-page":e.perPage,css:e.mycss.table},on:{"vuetable:cell-clicked":e.onCellClicked,"vuetable:pagination-data":e.onPaginationData}}),e._v(" "),s("vuetable-pagination",{ref:"pagination",staticClass:"pull-right",attrs:{css:e.mycss.pagination},on:{"vuetable-pagination:change-page":e.onChangePage}}),e._v(" "),s("div",{staticClass:"paging pull-right"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.perPage,expression:"perPage"}],on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.perPage=t.target.multiple?s:s[0]},e.doFilter]}},[s("option",{domProps:{value:10}},[e._v("10")]),e._v(" "),s("option",{domProps:{value:25}},[e._v("25")]),e._v(" "),s("option",{domProps:{value:50}},[e._v("50")]),e._v(" "),s("option",{domProps:{value:100}},[e._v("100")])])])],1)}),[],!1,null,null,null).exports),b={props:["dates"],data(){return{selected:this.dates,selectedVcalendar:{start:this.dates.startDate,end:this.dates.endDate},ranges:[{label:"Last 28 Days",value:{startDate:this.dayjs().subtract(27,"days").format("YYYY-MM-DD"),endDate:this.dayjs(new Date).format("YYYY-MM-DD")}},{label:"Last Month",value:{startDate:this.dayjs().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 3 Months",value:{startDate:this.dayjs().subtract(3,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 6 Months",value:{startDate:this.dayjs().subtract(6,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 12 Months",value:{startDate:this.dayjs().subtract(12,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}},{label:"Last 16 Months",value:{startDate:this.dayjs().subtract(16,"month").startOf("month").format("YYYY-MM-DD"),endDate:this.dayjs().subtract(1,"month").endOf("month").format("YYYY-MM-DD")}}]}},methods:{setDate(){this.$events.fire("set-date",this.selected)},setDateVcalendar(e){this.selected={startDate:this.dayjs(e.start).format("YYYY-MM-DD"),endDate:this.dayjs(e.end).format("YYYY-MM-DD")},this.setDate()}}},y=(Object(n.a)(b,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("div",{staticClass:"input-container"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"input-field",on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selected=t.target.multiple?s:s[0]},e.setDate]}},[s("option",[e._v("Choose a daterange")]),e._v(" "),e._l(e.ranges,(function(t){return s("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])}))],2),e._v(" "),s("v-date-picker",{attrs:{columns:2,"max-date":new Date,mode:"range","show-caps":"",popover:{placement:"bottom-end",visibility:"click"}},on:{input:e.setDateVcalendar},model:{value:e.selectedVcalendar,callback:function(t){e.selectedVcalendar=t},expression:"selectedVcalendar"}},[s("button",{staticClass:"inputaddon-item pure-button pure-button-primary"},[s("i",{staticClass:"icon-calendar"})])])],1)])}),[],!1,null,null,null).exports,{data:()=>({searchFor:""}),methods:{doFilter(){this.$events.fire("filter-setSearch",this.searchFor)},resetFilter(){this.searchFor="",this.$events.fire("filter-resetSearch")}}}),w=(s(38),Object(n.a)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchFor,expression:"searchFor"}],staticClass:"input-field",attrs:{type:"text",placeholder:"keyword"},domProps:{value:e.searchFor},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.doFilter(t))},input:function(t){t.target.composing||(e.searchFor=t.target.value)}}}),e._v(" "),s("span",{staticClass:"icon-field",on:{click:function(t){return t.preventDefault(),e.doFilter(t)}}},[s("i",{staticClass:"dashicons dashicons-search"})])])}),[],!1,null,null,null).exports),k={props:["dimension"],methods:{doFilter(e){this.$events.fire("set-dimension",e)}},components:{SearchBar:w}},C=(s(39),Object(n.a)(k,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"filter-bar"},[s("ul",[s("li",[s("a",{staticClass:"tabs",class:{active:"query"==e.dimension},on:{click:function(t){return e.doFilter("query")}}},[e._v("Query\n    ")])]),e._v(" "),s("li",[s("a",{staticClass:"tabs",class:{active:"page"==e.dimension},on:{click:function(t){return e.doFilter("page")}}},[e._v("Pages\n    ")])]),e._v(" "),s("li",[s("a",{staticClass:"tabs",class:{active:"country"==e.dimension},on:{click:function(t){return e.doFilter("country")}}},[e._v("Countries\n    ")])]),e._v(" "),s("li",[s("a",{staticClass:"tabs",class:{active:"device"==e.dimension},on:{click:function(t){return e.doFilter("device")}}},[e._v("Devices\n    ")])])]),e._v(" "),s("div",{staticClass:"bar-field"},[s("search-bar")],1)])}),[],!1,null,null,null).exports),D=s(5),x={directives:{onClickaway:D.directive},methods:{clickAway(){this.$emit("close")}}},M=(s(40),Object(n.a)(x,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.clickAway,expression:"clickAway"}],staticClass:"modal-container"},[e._t("header",[e._v("Header")]),e._v(" "),s("div",{staticClass:"modal-content"},[e._t("body",[e._v("Header")])],2),e._v(" "),s("div",{staticClass:"modal-footer"},[e._t("footer",[e._v("Header")])],2)],2)])])}),[],!1,null,null,null).exports),$={props:["searchType"],data(){return{search:this.searchType}}},S=Object(n.a)($,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"pure-form pure-form-stacked"},[s("fieldset",[s("div",{staticClass:"row"},[s("label",{attrs:{for:"web"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"radio",value:"web"},domProps:{checked:e._q(e.search,"web")},on:{change:function(t){e.search="web"}}}),e._v("\n          Web\n        ")])]),e._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"image"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"radio",value:"image"},domProps:{checked:e._q(e.search,"image")},on:{change:function(t){e.search="image"}}}),e._v("\n          Image\n        ")])]),e._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"video"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"radio",value:"video"},domProps:{checked:e._q(e.search,"video")},on:{change:function(t){e.search="video"}}}),e._v("\n          Video\n        ")])])])])}),[],!1,null,null,null).exports,Y={data:()=>({device:null,filter:null}),methods:{setFilter(e){this.filter={dimension:"device",operator:"equals",expression:e}}}},F=Object(n.a)(Y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",[s("fieldset",[s("div",{staticClass:"row"},[s("label",{attrs:{for:"desktop"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.device,expression:"device"}],attrs:{type:"radio",value:"desktop"},domProps:{checked:e._q(e.device,"desktop")},on:{change:[function(t){e.device="desktop"},function(t){return e.setFilter(e.device)}]}}),e._v("\n          Desktop\n        ")])]),e._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"mobile"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.device,expression:"device"}],attrs:{type:"radio",value:"mobile"},domProps:{checked:e._q(e.device,"mobile")},on:{change:[function(t){e.device="mobile"},function(t){return e.setFilter(e.device)}]}}),e._v("\n          Mobile\n        ")])]),e._v(" "),s("div",{staticClass:"row"},[s("label",{attrs:{for:"tablet"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.device,expression:"device"}],attrs:{type:"radio",value:"tablet"},domProps:{checked:e._q(e.device,"tablet")},on:{change:[function(t){e.device="tablet"},function(t){return e.setFilter(e.device)}]}}),e._v("\n          Tablet\n        ")])])])])}),[],!1,null,null,null).exports,j={data:()=>({isActive:!1,filter:{operator:"contains",dimension:"query"}})},A=Object(n.a)(j,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"pure-form pure-form-stacked"},[s("fieldset",[s("div",{staticClass:"row"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.filter.operator,expression:"filter.operator"}],staticClass:"regular-text",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filter,"operator",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"contains"}},[e._v("Queries containing")]),e._v(" "),s("option",{attrs:{value:"notContains"}},[e._v("Queries not containing")]),e._v(" "),s("option",{attrs:{value:"equals"}},[e._v("Query is exactly")])])]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.expression,expression:"filter.expression"}],staticClass:"regular-text",attrs:{type:"text",required:"",placeholder:"keyword"},domProps:{value:e.filter.expression},on:{input:function(t){t.target.composing||e.$set(e.filter,"expression",t.target.value)}}}),e._v(" "),s("span",{staticClass:"pure-form-message"},[e._v("This is a required field.")])])])])}),[],!1,null,null,null).exports,T={data:()=>({isActive:!1,filter:{operator:"contains",dimension:"page"}})},P=Object(n.a)(T,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"pure-form pure-form-stacked"},[s("fieldset",[s("div",{staticClass:"row"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.filter.operator,expression:"filter.operator"}],staticClass:"regular-text",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.filter,"operator",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"contains"}},[e._v("URLs containing")]),e._v(" "),s("option",{attrs:{value:"notContains"}},[e._v("URLs not containing")]),e._v(" "),s("option",{attrs:{value:"equals"}},[e._v("URL is exactly")])])]),e._v(" "),s("div",{staticClass:"row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filter.expression,expression:"filter.expression"}],staticClass:"regular-text",attrs:{type:"text",required:"",placeholder:"http://www.example.com/foo"},domProps:{value:e.filter.expression},on:{input:function(t){t.target.composing||e.$set(e.filter,"expression",t.target.value)}}}),e._v(" "),s("span",{staticClass:"pure-form-message"},[e._v("This is a required field.")])])])])}),[],!1,null,null,null).exports,O={mixins:[D.mixin],props:["dates","searchType","filters"],data:()=>({isActive:!1,drop:"",showModal:!1,showCloseIcon:!1,closeOnClickAway:!0,modalType:"",options:[{value:"queryForm",text:"Query"},{value:"pageForm",text:"Page"},{value:"deviceForm",text:"Device"}]}),mounted(){},methods:{showModalForm(e,t){t&&(e=e.dimension+"Form"),this.modalType=e,this.showModal=!0},sendValue(){"searchTypeModal"==this.$refs.myform.$options._componentTag?this.$events.fire("change-searchType",this.$refs.myform.search):this.$refs.myform.filter.expression&&this.$events.fire("add-filter",this.$refs.myform.filter),this.showModal=!1},resetFilter(e){let t=this.filters.indexOf(e);this.filters.splice(t,1),this.$events.fire("remove-filter",e)},openDropDown(){this.isActive=!this.isActive},onDateSelected(e){},away(){this.isActive=!1}},components:{mymodal:M,deviceForm:F,pageForm:P,queryForm:A,searchTypeModal:S}},R=(s(41),Object(n.a)(O,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"custom-filters"},[s("li",[s("a",{staticClass:"filter-button",on:{click:function(t){return e.showModalForm("searchTypeModal")}}},[e._v("Search type:"+e._s(e.searchType)),s("i",{staticClass:"search icon"})])]),e._v(" "),s("li",e._l(e.filters,(function(t){return s("a",{staticClass:"filter-button"},[s("span",{on:{click:function(s){return e.showModalForm(t,!0)}}},[e._v(e._s(t.dimension)+":"+e._s(t.expression))]),s("i",{staticClass:"icon-cancel",on:{click:function(s){return e.resetFilter(t)}}})])})),0),e._v(" "),s("li",{staticClass:"dropdown",class:{active:e.isActive}},[s("a",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.away,expression:"away"}],staticClass:"pure-button pure-button-primary",on:{click:e.openDropDown}},[e._v("New "),s("i",{staticClass:"dashicons dashicons-plus"})]),e._v(" "),s("ul",{staticClass:"dropdown-content"},e._l(e.options,(function(t){return s("li",{staticClass:"item",on:{click:function(s){return e.showModalForm(t.value)}}},[s("a",[e._v(e._s(t.text))])])})),0)]),e._v(" "),s("transition",{attrs:{name:"modal"}},[e.showModal?s("mymodal",{on:{close:function(t){e.showModal=!1},clickAwayModal:function(t){e.showModal=!1}}},[s("h3",{attrs:{slot:"header"},slot:"header"},[e._v("Select a filter")]),e._v(" "),s("template",{slot:"body"},[s(e.modalType,{ref:"myform",tag:"component",attrs:{dates:e.dates,searchType:e.searchType}})],1),e._v(" "),s("template",{slot:"footer"},[s("a",{staticClass:"btn btn-danger",on:{click:function(t){e.showModal=!1}}},[e._v("\n          Cancel\n        ")]),e._v(" "),s("a",{staticClass:"btn btn-primary",on:{click:function(t){return e.sendValue()}}},[e._v("\n          Ok\n        ")])])],2):e._e()],1)],1)}),[],!1,null,null,null).exports),I={width:"100%",height:"400",colors:["#4285f4","#00bcd4","#009688","#673ab7"],smoothline:"true",focusTarget:"category",chartArea:{width:"100%",height:"80%"},hAxis:{gridlines:{count:0,minSpacing:150},minorGridlines:{count:0},showTextEvery:1,format:"MMM dd"},vAxis:{gridlines:{count:0,minSpacing:100},minorGridlines:{count:2},showTextEvery:2},vAxes:{0:{direction:-1,textPosition:"none"},1:{textPosition:"none"},2:{textPosition:"none"},3:{textPosition:"none"}},series:{0:{type:"line",targetAxisIndex:1,tooltip:!0},1:{type:"line",targetAxisIndex:2,tooltip:!0},2:{type:"line",targetAxisIndex:3,tooltip:!0},3:{type:"line",targetAxisIndex:0,tooltip:!0},4:{type:"line",targetAxisIndex:0,tooltip:!0}}},E={props:["dimension","filters","searchType","searchFor","dates"],data(){return{chartData:[],chartOptions:I,chartEvents:{select:e=>{const t=this.$refs.chart.chartObject;if(t.getSelection()[0].column){var s=t.getSelection()[0].column-1;I.series[s].tooltip=!I.series[s].tooltip,0==I.series[s].lineWidth?(I.series[s].lineWidth=2,I.series[s].areaOpacity=.3):(I.series[s].lineWidth=0,I.series[s].areaOpacity=0),t.draw(this.chartData,I)}}}}},mounted(){gapi.client.load("webmasters","v3").then((()=>{gapi.auth.setToken({access_token:this.$store.getters.config.token}),this.getData()}))},methods:{getData(){gapi.client.webmasters.searchanalytics.query({siteUrl:this.$store.getters.site,rowLimit:null,searchType:this.searchType,startDate:this.dates.startDate,endDate:this.dates.endDate,dimensions:["date"],dimensionFilterGroups:[{filters:this.filters}]}).then((e=>{this.chartData=this.formatData(e.result.rows)})).then(null,(function(e){console.log(e)}))},formatData(e){let t=this;var s=new google.visualization.DataTable;return s.addColumn("date","Keys"),s.addColumn("number","Clicks"),s.addColumn("number","Impressions"),s.addColumn("number","CTR"),s.addColumn("number","Position"),_.forEach(e,(function(e){s.addRow([t.dayjs(e.keys[0]).toDate(),e.clicks,e.impressions,100*e.ctr,parseFloat(e.position)])})),s}}},N=Object(n.a)(E,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"v-select"},[s("GChart",{ref:"chart",attrs:{type:"LineChart",data:e.chartData,options:e.chartOptions,events:e.chartEvents}})],1)}),[],!1,null,null,null).exports,B=s(30),L=s.n(B),V=(s(42),{mixins:[D.mixin],props:["presets"],computed:{outputRange(){if(this.selectedRange.length>1)return this.selectedRange?this.start.format("MMM D YYYY")+" - "+this.end.format("MMM D YYYY"):""}},data:()=>({currentMonthDate:dayjs(),month:[],prevMonth:[],monthNames:[],start:dayjs().add(-28,"days"),end:dayjs(),selectedRange:[],maxDate:dayjs(),minDate:dayjs().add(-60,"days"),isActive:!1}),mounted(){dayjs.extend(L.a),dayjs.locale("en"),this.monthNames=dayjs().localeData().weekdaysMin(),this.getMonths(dayjs().startOf("month")),this.selectedRange=[this.start,this.end]},methods:{openDropDown(){this.isActive=!this.isActive},send(){this.$events.fire("update-range",{start:this.start.format("YYYY-MM-DD"),end:this.end.format("YYYY-MM-DD")}),this.openDropDown()},isSelected(e){return!(!e.isBefore(this.end,"day")||!e.isAfter(this.start,"day"))||!(!e.isSame(this.start,"day")&&!e.isSame(this.end,"day"))},isAfter(e){return!e.isAfter(this.maxDate,"day")},isBefore(e){return!e.isBefore(this.minDate,"day")},isSelectedRange(e){return!(!e.isSame(this.start,"day")&&!e.isSame(this.end,"day"))},column(e){if(0==e)return this.month[0].day()+1},column2(e){if(0==e)return this.prevMonth[0].day()+1},next(){let e=dayjs(this.month[1]).add(1,"months").startOf("month");this.getMonths(e)},prev(){let e=dayjs(this.month[1]).add(-1,"months").startOf("month");this.getMonths(e)},getMonths(e){this.currentMonthDate=e,this.month=[...Array(e.daysInMonth())].map(((t,s)=>e.clone().add(s,"day"))),this.prevMonth=[...Array(e.subtract(1,"months").daysInMonth())].map(((t,s)=>e.subtract(1,"months").clone().add(s,"day")))},setRange(e){this.selectedRange.length>1&&this.clean(),this.selectedRange.length>0?this.end=e:this.start=e,this.$set(e,"selected",!e.selected),this.selectedRange.push(e),this.selectedRange.length>1&&(this.checkRange(),this.start=this.selectedRange[0],this.end=this.selectedRange[1])},selectDay(e){e.isBefore(this.start)&&this.$set(e,"selected",!value.selected)},checkDate(e){return!e.isAfter(this.maxDate,"day")&&(!e.isBefore(this.minDate,"day")&&void this.setRange(e))},checkRange(){this.selectedRange[1].isBefore(this.selectedRange[0])&&this.selectedRange.reverse()},setPresets(e){this.start=e.value.start,this.end=e.value.end},clean(){this.selectedRange=[],this.start="",this.end=""},away(){this.isActive=!1}}}),z=(s(43),{name:"SearchConsole",data(){return{dates:{startDate:this.dayjs().subtract(27,"days").format("YYYY-MM-DD"),endDate:this.dayjs(new Date).format("YYYY-MM-DD")},dimension:"query",searchFor:"",searchType:"web",filters:[],ranges:[{label:"Last Week",value:{start:dayjs().startOf("week").subtract(6,"days"),end:dayjs().startOf("week")}},{label:"Last 28 Days",value:{start:dayjs().subtract(27,"days"),end:dayjs()}},{label:"Last Month",value:{start:dayjs().subtract(1,"month").startOf("month"),end:dayjs().subtract(1,"month").endOf("month")}},{label:"Last 3 Months",value:{start:dayjs().subtract(3,"month").startOf("month"),end:dayjs().subtract(1,"month").endOf("month")}}]}},mounted(){this.$events.$on("update-range",(e=>this.setDate(e))),this.$events.$on("set-dimension",(e=>this.setDimension(e))),this.$events.$on("remove-filter",(e=>this.removeFilter(e))),this.$events.$on("add-filter",(e=>this.setFilter(e))),this.$events.$on("change-searchType",(e=>this.setSearchType(e))),this.$events.$on("filter-setSearch",(e=>this.onFilterSetSearch(e))),this.$events.$on("filter-resetSearch",(e=>this.onFilterResetSearch()))},methods:{getData(){a.default.nextTick((()=>{this.$refs.table.getData(),this.$refs.chart.getData()}))},doFilter(){a.default.nextTick((()=>this.$refs.table.$refs.vuetable.refresh()))},setSearchType(e){this.searchType=e,this.getData()},onFilterSetSearch(e){this.searchFor=e,this.doFilter()},onFilterResetSearch(){this.searchFor="",this.doFilter()},setFilter(e){var t=_.findIndex(this.filters,{dimension:e.dimension});t?this.filters.push(e):this.filters.splice(t,1,e),this.getData()},removeFilter(e){_.remove(this.filters,e),this.getData()},setDimension(e){this.dimension=e,this.getData()},setDate(e){this.dates={startDate:e.start,endDate:e.end},this.getData()}},components:{Chart:N,FilterTabs:C,SearchBar:w,CustomFilters:R,Table:g,DateRange:Object(n.a)(V,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.away,expression:"away"}],staticClass:"bar-field datedropdown",class:{active:e.isActive}},[s("div",{staticClass:"input-container",on:{click:function(t){return e.openDropDown()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.outputRange,expression:"outputRange"}],staticClass:"input-field",attrs:{type:"text",disabled:""},domProps:{value:e.outputRange},on:{input:function(t){t.target.composing||(e.outputRange=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),s("div",{staticClass:"datedropdown-content"},[s("div",{staticClass:"dropdown-panel"},[s("div",{staticClass:"presets-container"},[s("ul",e._l(e.presets,(function(t){return s("li",[s("a",{on:{click:function(s){return e.setPresets(t)}}},[e._v(e._s(t.label))])])})),0),e._v(" "),s("div",{staticClass:"calendar-buttons"},[s("a",{staticClass:"btn btn-danger",on:{click:e.away}},[e._v("Cancel")]),e._v(" "),s("a",{staticClass:"btn btn-primary",on:{click:function(t){return e.send()}}},[e._v("Apply")])])]),e._v(" "),s("div",{staticClass:"calendar-container"},[s("div",{staticClass:"calendar"},[s("div",{staticClass:"toolbar"},[s("div",[s("a",{on:{click:e.prev}},[s("i",{staticClass:"dashicons dashicons-arrow-left-alt2"})])]),e._v(" "),s("div",[e._v(e._s(e.currentMonthDate.subtract(1,"months").format("MMM")))]),e._v(" "),s("div",[s("a",{on:{click:e.next}},[s("i",{staticClass:"dashicons dashicons-arrow-right-alt2"})])])]),e._v(" "),s("div",{staticClass:"calendar-grids"},[e._l(e.monthNames,(function(t){return s("div",[s("b",[e._v(e._s(t))])])})),e._v(" "),e._l(e.prevMonth,(function(t,a){return s("div",{class:[e.isSelected(t)?"highlight":"",e.isSelectedRange(t)?"range":"",e.isAfter(t)?"":"disabled",e.isBefore(t)?"":"disabled"],style:{gridColumn:e.column2(a)}},[s("a",{on:{click:function(s){return e.checkDate(t)}}},[e._v(e._s(t.format("D")))])])}))],2)]),e._v(" "),s("div",{staticClass:"calendar"},[s("div",{staticClass:"toolbar"},[s("div",[s("a",{on:{click:e.prev}},[s("i",{staticClass:"dashicons dashicons-arrow-left-alt2"})])]),e._v(" "),s("div",[e._v(e._s(e.currentMonthDate.format("MMM")))]),e._v(" "),s("div",[s("a",{on:{click:e.next}},[s("i",{staticClass:"dashicons dashicons-arrow-right-alt2"})])])]),e._v(" "),s("div",{staticClass:"calendar-grids"},[e._l(e.monthNames,(function(t){return s("div",[s("b",[e._v(e._s(t))])])})),e._v(" "),e._l(e.month,(function(t,a){return s("div",{class:[e.isSelected(t)?"highlight":"",e.isSelectedRange(t)?"range":"",e.isAfter(t)?"":"disabled",e.isBefore(t)?"":"disabled"],style:{gridColumn:e.column(a)}},[s("a",{on:{click:function(s){return e.checkDate(t)}}},[e._v(e._s(t.format("D")))])])}))],2)])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon-field"},[t("i",{staticClass:"dashicons dashicons-calendar-alt"})])}],!1,null,null,null).exports}}),q={beforeRouteEnter:(e,t,s)=>{s((e=>{e.$store.getters.config.token&&e.$store.getters.config.site||s("/settings")}))},data:()=>({loaded:!1}),mounted(){this.loaded=!0},components:{SearchConsole:Object(n.a)(z,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pure-g"},[s("div",[s("Chart",{ref:"chart",attrs:{dates:e.dates,filters:e.filters}})],1),e._v(" "),s("div",{staticClass:"filter-bar"},[s("custom-filters",{attrs:{searchType:e.searchType,dates:e.dates,filters:e.filters}}),e._v(" "),s("date-range",{attrs:{presets:e.ranges}})],1),e._v(" "),s("filter-tabs",{attrs:{dimension:e.dimension}}),e._v(" "),s("Table",{ref:"table",attrs:{dimension:e.dimension,filters:e.filters,searchFor:e.searchFor,searchType:e.searchType,dates:e.dates}})],1)}),[],!1,null,null,null).exports}},G=Object(n.a)(q,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-console"},[e.loaded?s("search-console"):e._e()],1)}),[],!1,null,null,null).exports,U={name:"Advanced",data(){return{show:this.$store.getters.settings.custom_credentials,settings:this.$store.getters.settings,showSpinner:!1,webmasters:this.$store.getters.webmasters}},computed:{token(){return this.$store.getters.token}},methods:{validate(){this.show=!this.show,this.settings.reset_token=!this.settings.reset_token},getToken(){this.axios.post("/token",{code:this.code}).then((e=>{this.$store.commit("setToken",e.data.access_token),this.getSites()}))},setSelected(e){console.log(event.target.value),event.target.value?(this.$store.commit("setSite",event.target.value),this.getVerification()):this.site=""},getVerification(){if(this.webmasters.siteVerification&&this.webmasters.site.length){this.showSpinner=!0;let e=this;gapi.client.load("siteVerification","v1").then((function(t){gapi.auth.setToken({access_token:e.token}),gapi.client.siteVerification.webResource.getToken({verificationMethod:"META",site:{identifier:e.$store.getters.site.replace("sc-domain:",""),type:"SITE"}}).then((function(t){e.webmasters.meta=t.result.token,e.showSpinner=!1}))}))}},revoke(){this.axios.delete("/token").then((e=>{this.$store.dispatch("initialize")}))}}},H=Object(n.a)(U,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row"},[e._m(0),e._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.webmasters.siteVerification,expression:"webmasters.siteVerification"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.webmasters.siteVerification)?e._i(e.webmasters.siteVerification,null)>-1:e.webmasters.siteVerification},on:{change:[function(t){var s=e.webmasters.siteVerification,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&e.$set(e.webmasters,"siteVerification",s.concat([null])):n>-1&&e.$set(e.webmasters,"siteVerification",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.webmasters,"siteVerification",i)},e.getVerification]}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.showSpinner,expression:"showSpinner"}],staticClass:"dashicons dashicons-update spin"})])]),e._v(" "),s("div",{staticClass:"row"},[e._m(1),e._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.webmasters.meta,expression:"webmasters.meta"}],staticClass:"regular-text",attrs:{type:"text"},domProps:{value:e.webmasters.meta},on:{input:function(t){t.target.composing||e.$set(e.webmasters,"meta",t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"row"},[e._m(2),e._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.custom_credentials,expression:"settings.custom_credentials"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.custom_credentials)?e._i(e.settings.custom_credentials,null)>-1:e.settings.custom_credentials},on:{change:[function(t){var s=e.settings.custom_credentials,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&e.$set(e.settings,"custom_credentials",s.concat([null])):n>-1&&e.$set(e.settings,"custom_credentials",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.settings,"custom_credentials",i)},function(t){return e.validate()}]}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.reset_token,expression:"settings.reset_token"}],staticClass:"hidden",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.settings.reset_token)?e._i(e.settings.reset_token,null)>-1:e.settings.reset_token},on:{change:function(t){var s=e.settings.reset_token,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&e.$set(e.settings,"reset_token",s.concat([null])):n>-1&&e.$set(e.settings,"reset_token",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.settings,"reset_token",i)}}})])]),e._v(" "),e.show?s("div",[s("div",{staticClass:"row"},[e._m(3),e._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.credentials.clientId,expression:"settings.credentials.clientId"}],staticClass:"pure-input-1-4",attrs:{type:"text"},domProps:{value:e.settings.credentials.clientId},on:{input:function(t){t.target.composing||e.$set(e.settings.credentials,"clientId",t.target.value)}}}),e._v(" "),s("span",[e._v("Please go to Analytics settings to set up your view")])])]),e._v(" "),s("div",{staticClass:"row"},[e._m(4),e._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.credentials.clientSecret,expression:"settings.credentials.clientSecret"}],staticClass:"pure-input-1-4",attrs:{type:"text"},domProps:{value:e.settings.credentials.clientSecret},on:{input:function(t){t.target.composing||e.$set(e.settings.credentials,"clientSecret",t.target.value)}}}),e._v(" "),s("span",[e._v("Please go to Search Console settings to set up your site")])])]),e._v(" "),s("div",{staticClass:"row"},[e._m(5),e._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.credentials.redirectUri,expression:"settings.credentials.redirectUri"}],staticClass:"pure-input-1-4",attrs:{type:"text"},domProps:{value:e.settings.credentials.redirectUri},on:{input:function(t){t.target.composing||e.$set(e.settings.credentials,"redirectUri",t.target.value)}}}),e._v(" "),s("span",[e._v("Please go to Search Console settings to set up your site")])])])]):e._e()])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Add verification to site?")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Verification meta")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Custom credentials")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Client ID")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Client secret")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Redirect url")])])}],!1,null,null,null).exports,K={name:"Basic",data(){return{selected:"",sites:[],code:"",config:this.$store.getters.config,settings:this.$store.getters.settings,webmasters:this.$store.getters.webmasters,showWebmasters:!1}},mounted(){gapi.client.load("webmasters","v3").then((()=>{gapi.auth.setToken({access_token:this.token}),this.token&&this.getSites()}))},computed:{token(){return this.$store.getters.token}},methods:{authenticate(){this.settings.custom_credentials?window.open(this.settings.credentials.redirectUri,"_blank"):window.open(this.$store.getters.config.authUrl,"","width=400,height=600")},getToken(){this.axios.post("/token",{code:this.code}).then((e=>{this.$store.commit("setToken",e.data.access_token)}))},setSelected(e){console.log(event.target.value),event.target.value?(this.$store.commit("setSite",event.target.value),this.getVerification()):this.site=""},getSites(){let e=this;this.token&&(gapi.auth.setToken({access_token:this.token}),gapi.client.webmasters.sites.list().then((t=>{_.forEach(t.result.siteEntry,(function(t){e.sites.push(t.siteUrl)})),e.site||(e.site=t.result.siteEntry[0])})))},revoke(){this.axios.delete("/token").then((e=>{this.$store.commit("setToken",""),this.code=""}))}}},W={computed:{settings(){return this.$store.getters.settings}},data:()=>({tabs:["Basic","Advanced"],selected:"Basic",spin:!1,loaded:!1}),mounted(){this.axios.get("/settings").then((e=>e.data)).then((e=>{this.$store.commit("setSettings",e),this.loaded=!0}))},methods:{storeSettings(){let e=this,t=this.$store.getters.settings;e.spinner(),this.axios.post("/settings",{settings:t}).then((()=>{e.spinner(),e.showMessage()}))},spinner(){this.spin=!this.spin},showMessage(){this.$notify({group:"settings",title:"Settings saved"})}},components:{Basic:Object(n.a)(K,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.token?e._e():s("div",{staticClass:"row"},[e._m(0),e._v(" "),s("div",{staticClass:"fields"},[s("button",{staticClass:"button button-primary",on:{click:function(t){return e.authenticate()}}},[e._v("Get Google Authorization Code")])])]),e._v(" "),e.token?e._e():s("div",{staticClass:"row"},[e._m(1),e._v(" "),s("div",{staticClass:"fields"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"regular-text",attrs:{type:"text"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),s("button",{staticClass:"button button-primary",attrs:{disabled:!e.code},on:{click:function(t){return t.preventDefault(),e.getToken(t)}}},[e._v("Authenticate")]),e._v(" "),s("br"),e._v(" "),s("span",{staticClass:"descriptionss"},[e._v("Paste here the response code and then click Authenticate button to receive your token.")])])]),e._v(" "),e.token?s("div",[s("div",{staticClass:"row"},[e._m(2),e._v(" "),s("div",{staticClass:"fields"},[s("button",{staticClass:"pure-button button-secondary",on:{click:function(t){return e.revoke()}}},[e._v("Revoke access")])])]),e._v(" "),s("div",{staticClass:"row"},[e._m(3),e._v(" "),s("div",{staticClass:"fields"},[s("div",{staticClass:"select-site"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.webmasters.site,expression:"webmasters.site"}],attrs:{label:"siteUrl"},on:{change:[function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.webmasters,"site",t.target.multiple?s:s[0])},e.setSelected]}},[s("option",[e._v("Select here")]),e._v(" "),e._l(e.sites,(function(t){return s("option",[e._v(e._s(t))])}))],2)]),e._v(" "),e.showWebmasters?s("span",[e._v(e._s(e.config.site))]):e._e()])])]):e._e()])}),[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Authorize")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Request access token")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Revoke token")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"description"},[s("b",[e._v("Choose site")])])}],!1,null,null,null).exports,Advanced:H}},J=(s(44),Object(n.a)(W,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"settings"},[s("h1",[e._v("Settings")]),e._v(" "),s("h1",{staticClass:"nav-tab-wrapper"},e._l(e.tabs,(function(t){return s("a",{key:t,staticClass:"nav-tab",class:{"nav-tab-active":e.selected==t},on:{click:function(s){e.selected=t}}},[e._v("\n\t\t\t\t"+e._s(t)+"\n\t\t\t")])})),0),e._v(" "),s("br"),e._v(" "),e.loaded?s(e.selected,{tag:"component"}):e._e(),e._v(" "),s("div",{staticClass:"pure-g form-div"},[s("div",{staticClass:"pure-u-1-5 row"}),e._v(" "),s("div",{staticClass:"pure-u-4-5 row"},[s("button",{staticClass:"button button-primary",on:{click:function(t){return e.storeSettings()}}},[e._v("\n\t\t\t\t\tSave settings "),e.spin?s("i",{staticClass:"dashicons dashicons-update spin"}):e._e()])])])],1)}),[],!1,null,null,null).exports);a.default.use(o.a);var Q=new o.a({routes:[{path:"/",name:"SearchConsole",component:G},{path:"/settings",name:"Settings",component:J}]});var Z=function(e){var t=jQuery;let s=t("#toplevel_page_"+e),a=window.location.href,i=a.substr(a.indexOf("admin.php"));s.on("click","a",(function(){var e=t(this);t("ul.wp-submenu li",s).removeClass("current"),e.hasClass("wp-has-submenu")?t("li.wp-first-item",s).addClass("current"):e.parents("li").addClass("current")})),t("ul.wp-submenu a",s).each((function(e,s){t(s).attr("href")!==i||t(s).parent().addClass("current")}))},X=s(3),ee=s.n(X),te=(s(61),s(18)),se=s.n(te),ae=s(19);var ie={state:{config:{},loading:!1},mutations:{setConfig(e,t){e.config=t},setProfile(e,t){e.config.profile=t},setSite(e,t){e.config.site=t},setToken(e,t){e.config.token=t}},getters:{config:e=>e.config,authUrl:e=>e.config.authUrl,site:e=>e.config.site,token:e=>e.config.token,profile:e=>e.config.profile},actions:{}};var ne={state:{settings:{analytics:{account:"",webprop:"",profile:"",settings:{}},webmasters:{site:"",siteVerification:"",meta:""},credentials:{}},loading:!1},mutations:{setSettings(e,t){e.settings=_.merge(e.settings,t)},setAnalytics(e,t){e.settings.analytics=t},setWebmasters(e,t){e.settings.webmasters=t}},getters:{settings:e=>e.settings,analytics:e=>e.settings.analytics,webmasters:e=>e.settings.webmasters},actions:{initialize(){ee.a.get("/settings").then((e=>e.data)).then((e=>{this.commit("setSettings",e)}))},storeSettings(){ee.a.post("/settings",{settings:state.settings})}}};a.default.use(ae.a);var re=new ae.a.Store({modules:{config:ie,settings:ne}}),oe=s(31),le=s(32),ce=s.n(le);window.dayjs=se.a,window.axios=ee.a,ee.a.defaults.headers.common={"X-WP-Nonce":_nonce},ee.a.interceptors.response.use((e=>e),(function(e){if(e.config.hasOwnProperty("errorHandle")&&!1===e.config.errorHandle)return Promise.reject(e);e.response&&a.default.notify({group:"errors",title:"Error message",type:"error",text:e.response.data.message})})),ee.a.defaults.baseURL=sc_baseurl.siteurl+"/wp-json/searchconsole/api",a.default.config.productionTip=!1,a.default.prototype.$http=ee.a,a.default.prototype.axios=ee.a,a.default.prototype.dayjs=se.a,a.default.use(p.a),a.default.use(oe.default),a.default.use(ce.a),gapi.load("client",(()=>{ee.a.get("/config").then((e=>e.data)).then((e=>{re.commit("setConfig",e),new a.default({el:"#vue-admin-app",router:Q,store:re,render:e=>e(r)})}))})),Z("search-console")}],[[63,0,3]]]);